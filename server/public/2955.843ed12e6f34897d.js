"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[2955],{36554:(Z,C,e)=>{e.r(C),e.d(C,{default:()=>A});var t=e(15861),o=e(17626),N=(e(29132),e(73281)),W=(e(4832),e(49067),e(96794),e(69747),e(40425),e(69357),e(40342),e(73640),e(33474),e(32088)),k=e(99959),i=e(77712),D=(e(90912),e(85931),e(8314),e(76898)),I=e(71774),m=e(44917),z=e(26584),q=e(47996),h=e(89628),V=e(17253),P=e(65234);let T=class extends q.Z{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(r){return this.addResolvingPromise(this._loadOGCServices(this.layer,r)),this.when()}getSource(){const{featureDefinition:{collection:r,layerDefinition:n,spatialReference:l,supportedCrs:g},layer:{apiKey:U,customParameters:B,effectiveMaxRecordCount:j}}=this;return{type:"ogc-source",collection:r,layerDefinition:n,maxRecordCount:j,queryParameters:{apiKey:U,customParameters:B},spatialReference:l,supportedCrs:g}}queryExtent(r,n={}){return null}queryFeatureCount(r,n={}){return null}queryFeatures(r,n={}){return this.queryFeaturesJSON(r,n).then(l=>V.Z.fromJSON(l))}queryFeaturesJSON(r,n={}){const l=this.getSource();return this.load(n).then(()=>(0,h.yN)(l,r,n))}queryObjectIds(r,n={}){return null}serviceSupportsSpatialReference(r){return!(!r.isWGS84&&!r.isWebMercator&&!this.featureDefinition.supportedCrs[r.wkid])}_conformsToType(r,n){const l=new RegExp(`^${n}$`,"i");return r.conformsTo.some(g=>l.test(g))??!1}_getCapabilities(r,n){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:r},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:n,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}_getMaxRecordCount(r){const n=r?.components?.parameters;return n?.limit?.schema?.maximum??n?.limitFeatures?.schema?.maximum}_getStorageSpatialReference(r){const l=(0,h.d)(r.storageCrs??h.$9);return null==l?P.Z.WGS84:new P.Z({wkid:l})}_getSupportedSpatialReferences(r,n){const l="#/crs",g=r.crs??[h.$9],U=g.includes(l)?g.filter(j=>j!==l).concat(n.crs??[]):g,B=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return U.filter(j=>!B.test(j))}_loadOGCServices(r,n){var l=this;return(0,t.Z)(function*(){const g=null!=n?n.signal:null,{apiKey:U,collectionId:B,customParameters:j,fields:me,geometryType:ge,hasZ:Ce,objectIdField:Se,timeInfo:Re,url:Ee}=r,Ie={fields:me?.map(G=>G.toJSON()),geometryType:I.P.toJSON(ge),hasZ:Ce??!1,objectIdField:Se,timeInfo:Re?.toJSON()},Y={apiKey:U,customParameters:j,signal:g},ue=yield(0,h.gp)(Ee,Y),[ve,fe]=yield Promise.all([(0,h.G4)(ue,Y),(0,h.j)(ue,Y)]);if(!l._conformsToType(ve,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new z.Z("ogc-feature-layer:no-geojson-support","Server does not support geojson");const w=fe.collections.find(G=>G.id===B);if(!w)throw new z.Z("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const be=l._conformsToType(ve,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?yield(0,h.eS)(ue,Y):null,he=yield(0,h.w9)(w,Ie,Y),Oe=l._getMaxRecordCount(be),xe=l._getCapabilities(he.hasZ,Oe),De=l._getStorageSpatialReference(w).toJSON(),je=l._getSupportedSpatialReferences(w,fe),Te=new RegExp(`^${h.Lu}`,"i"),ye={};for(const G of je){const ce=(0,h.d)(G);null!=ce&&(ye[ce]||(ye[ce]=G.replace(Te,"")))}l.featureDefinition={capabilities:xe,collection:w,layerDefinition:he,spatialReference:De,supportedCrs:ye}})()}};(0,o._)([(0,i.Cb)()],T.prototype,"featureDefinition",void 0),(0,o._)([(0,i.Cb)({constructOnly:!0})],T.prototype,"layer",void 0),(0,o._)([(0,i.Cb)()],T.prototype,"type",void 0),T=(0,o._)([(0,D.j)("esri.layers.graphics.sources.OGCFeatureSource")],T);var _=e(50085),J=e(552),ne=e(50107),f=e(35126),ee=e(15008),ie=e(49286),ae=e(32629),F=e(6647),H=e(30346),pe=e(99555),te=e(97941),u=e(13812),re=e(41638),se=e(36255),oe=e(55911),$=e(90194),le=e(170),de=e(62667),y=e(96854),c=e(49430),d=e(2004);const a=(0,oe.v)();let s=class extends((0,_.V)((0,ne.N)((0,ee.M)((0,f.b)((0,J.h)((0,ae.c)((0,te.n)((0,pe.M)((0,ie.q)((0,F.I)((0,H.Q)((0,k.R)(m.Z))))))))))))){constructor(r){super(r),this.capabilities=null,this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxRecordCount=null,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new T({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){this.source?.destroy()}load(r){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},r).then(()=>this._fetchService(r))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get effectiveMaxRecordCount(){return this.maxRecordCount??this.capabilities?.query.maxRecordCount??5e3}get isTable(){return this.loaded&&null==this.geometryType}set renderer(r){(0,$.YN)(r,this.fieldsIndex),this._set("renderer",r)}on(r,n){return super.on(r,n)}createPopupTemplate(r){return(0,c.eZ)(this,r)}createQuery(){return new y.Z}getField(r){return this.fieldsIndex.get(r)}getFieldDomain(r,n){let l,g=!1;const U=n?.feature?.attributes,B=this.typeIdField&&U?.[this.typeIdField];return null!=B&&this.types&&(g=this.types.some(j=>j.id==B&&(l=j.domains?.[r],"inherited"===l?.type&&(l=this._getLayerDomain(r)),!0))),g||l||(l=this._getLayerDomain(r)),l}queryFeatures(r,n){return this.load().then(()=>this.source.queryFeatures(y.Z.from(r)||this.createQuery(),n)).then(l=>(l?.features?.forEach(g=>{g.layer=g.sourceLayer=this}),l))}serviceSupportsSpatialReference(r){return this.source?.serviceSupportsSpatialReference(r)??!1}_fetchService(r){var n=this;return(0,t.Z)(function*(){yield n.source.load(r),n.read(n.source.featureDefinition,{origin:"service"}),(0,$.YN)(n.renderer,n.fieldsIndex),(0,$.UF)(n.timeInfo,n.fieldsIndex)})()}_getLayerDomain(r){if(!this.fields)return null;for(const n of this.fields)if(n.name===r&&n.domain)return n.domain;return null}};(0,o._)([(0,i.Cb)({readOnly:!0,json:{origins:{service:{read:!0}}}})],s.prototype,"capabilities",void 0),(0,o._)([(0,i.Cb)({type:String,json:{write:!0}})],s.prototype,"collectionId",void 0),(0,o._)([(0,i.Cb)({type:String})],s.prototype,"copyright",void 0),(0,o._)([(0,i.Cb)({readOnly:!0})],s.prototype,"defaultPopupTemplate",null),(0,o._)([(0,i.Cb)({type:String})],s.prototype,"definitionExpression",void 0),(0,o._)([(0,i.Cb)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],s.prototype,"description",void 0),(0,o._)([(0,i.Cb)({type:String})],s.prototype,"displayField",void 0),(0,o._)([(0,i.Cb)({type:Number})],s.prototype,"effectiveMaxRecordCount",null),(0,o._)([(0,i.Cb)(u.PV)],s.prototype,"elevationInfo",void 0),(0,o._)([(0,i.Cb)({type:[se.Z],json:{origins:{service:{name:"layerDefinition.fields"}}}})],s.prototype,"fields",void 0),(0,o._)([(0,i.Cb)(a.fieldsIndex)],s.prototype,"fieldsIndex",void 0),(0,o._)([(0,i.Cb)({readOnly:!0,type:d.Z,json:{origins:{service:{name:"layerDefinition.extent"}}}})],s.prototype,"fullExtent",void 0),(0,o._)([(0,i.Cb)({type:I.M.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:I.M.read}}}}})],s.prototype,"geometryType",void 0),(0,o._)([(0,i.Cb)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],s.prototype,"hasZ",void 0),(0,o._)([(0,i.Cb)({type:Boolean,readOnly:!0})],s.prototype,"isTable",null),(0,o._)([(0,i.Cb)({type:[le.Z],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:de.r},write:!0}}}})],s.prototype,"labelingInfo",void 0),(0,o._)([(0,i.Cb)(u.iR)],s.prototype,"labelsVisible",void 0),(0,o._)([(0,i.Cb)(u.rn)],s.prototype,"legendEnabled",void 0),(0,o._)([(0,i.Cb)({type:Number})],s.prototype,"maxRecordCount",void 0),(0,o._)([(0,i.Cb)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],s.prototype,"objectIdField",void 0),(0,o._)([(0,i.Cb)({type:["OGCFeatureLayer"]})],s.prototype,"operationalLayerType",void 0),(0,o._)([(0,i.Cb)(u.C_)],s.prototype,"popupEnabled",void 0),(0,o._)([(0,i.Cb)({type:N.Z,json:{name:"popupInfo",write:!0}})],s.prototype,"popupTemplate",void 0),(0,o._)([(0,i.Cb)({types:W.A,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:W.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],s.prototype,"renderer",null),(0,o._)([(0,i.Cb)(u.YI)],s.prototype,"screenSizePerspectiveEnabled",void 0),(0,o._)([(0,i.Cb)({readOnly:!0})],s.prototype,"source",void 0),(0,o._)([(0,i.Cb)({readOnly:!0,type:P.Z,json:{origins:{service:{read:!0}}}})],s.prototype,"spatialReference",void 0),(0,o._)([(0,i.Cb)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],s.prototype,"title",void 0),(0,o._)([(0,i.Cb)({readOnly:!0,json:{read:!1}})],s.prototype,"type",void 0),(0,o._)([(0,i.Cb)({type:String,readOnly:!0})],s.prototype,"typeIdField",void 0),(0,o._)([(0,i.Cb)({type:[re.Z]})],s.prototype,"types",void 0),(0,o._)([(0,i.Cb)(u.HQ)],s.prototype,"url",void 0),s=(0,o._)([(0,D.j)("esri.layers.OGCFeatureLayer")],s);const A=s},87757:(Z,C,e)=>{e.d(C,{g:()=>t});const t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},35126:(Z,C,e)=>{e.d(C,{b:()=>b});var t=e(17626),o=e(77712),L=(e(90912),e(85931),e(8314),e(76898)),R=e(2319);const v={write:{allowNull:!0}},b=E=>{let S=class extends E{constructor(){super(...arguments),this.featureEffect=null}};return(0,t._)([(0,o.Cb)({type:R.Z,json:{origins:{"web-map":v,"portal-item":v}}})],S.prototype,"featureEffect",void 0),S=(0,t._)([(0,L.j)("esri.layers.mixins.FeatureEffectLayer")],S),S}},15008:(Z,C,e)=>{e.d(C,{M:()=>de});var J,t=e(17626),o=e(32917),p=e(77712),R=(e(90912),e(85931),e(8314),e(76898)),v=e(43149),b=e(9256),E=e(83989),S=e(73281),x=(e(4832),e(49067),e(96794),e(69747),e(40425),e(69357),e(40342)),D=(e(73640),e(33474)),I=e(32088),m=e(58817),z=e(94113),q=e(55342),h=e(68653),V=e(99433),P=e(13812),T=e(56347),_=e(170);let f=J=class extends E.B{constructor(y){super(y),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(y,c,d){const a=y.filter(s=>"avg_angle"!==s.statisticType).map(s=>s.toJSON());(0,z.RB)(d,a,c)}readRenderer(y,c,d){const a=c.drawingInfo?.renderer;return a?(0,D.a)(a,c,d)??void 0:(0,T.Ob)(c,d)}clone(){return new J({fields:(0,m.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,m.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,m.d9)(this.popupTemplate),renderer:(0,m.d9)(this.renderer)})}};(0,t._)([(0,q.J)({binning:"binning"})],f.prototype,"type",void 0),(0,t._)([(0,q.J)({geohash:"geohash"})],f.prototype,"binType",void 0),(0,t._)([(0,p.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],f.prototype,"fixedBinLevel",void 0),(0,t._)([(0,p.Cb)({type:[_.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],f.prototype,"labelingInfo",void 0),(0,t._)([(0,p.Cb)(P.iR)],f.prototype,"labelsVisible",void 0),(0,t._)([(0,p.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],f.prototype,"maxScale",void 0),(0,t._)([(0,p.Cb)(P.C_)],f.prototype,"popupEnabled",void 0),(0,t._)([(0,p.Cb)({type:S.Z,json:{name:"popupInfo",write:!0}})],f.prototype,"popupTemplate",void 0),(0,t._)([(0,p.Cb)({type:[v.Z],json:{write:!0}})],f.prototype,"fields",void 0),(0,t._)([(0,V.c)("fields")],f.prototype,"writeFields",null),(0,t._)([(0,p.Cb)({types:I.A,json:{write:{target:"drawingInfo.renderer"}}})],f.prototype,"renderer",void 0),(0,t._)([(0,h.r)("renderer",["drawingInfo.renderer"])],f.prototype,"readRenderer",null),f=J=(0,t._)([(0,R.j)("esri.layers.support.FeatureReductionBinning")],f);const ee=f;var H,ie=e(20383),ae=e(86810),F=e(23841);function te(y){return"simple"===y.type&&!y.visualVariables?.length}let u=H=class extends ae.wq{constructor(y){super(y),this.type="cluster",this.clusterRadius=(0,F.t_)("80px"),this.clusterMinSize=(0,F.t_)("12px"),this.clusterMaxSize=(0,F.t_)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(y,c,d){const a=c.drawingInfo?.renderer;return a?.authoringInfo?.isAutoGenerated?null:a?te(a)?null:(0,D.a)(a,c,d)??void 0:(0,T.Ob)(c,d)}readSymbol(y,c,d){const a=c.drawingInfo?.renderer;return a?.authoringInfo?.isAutoGenerated?null:a&&te(a)?(0,D.a)(a,c,d)?.symbol:null}writeSymbol(y,c,d,a){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const A=new x.Z({symbol:y});c.drawingInfo={renderer:A.write({},a)}}}writeFields(y,c,d){const a=y.filter(s=>"avg_angle"!==s.statisticType).map(s=>s.toJSON());(0,z.RB)(d,a,c)}readFields(y,c,d){return y.filter(a=>!a.isAutoGenerated).map(a=>v.Z.fromJSON(a))}clone(){return new H({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,m.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,m.d9)(this.fields),maxScale:this.maxScale,renderer:(0,m.d9)(this.renderer),symbol:(0,m.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,m.d9)(this.popupTemplate)})}};(0,t._)([(0,p.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],u.prototype,"type",void 0),(0,t._)([(0,p.Cb)({type:Number,cast:y=>"auto"===y?y:(0,F.t_)(y),json:{write:!0}})],u.prototype,"clusterRadius",void 0),(0,t._)([(0,p.Cb)({type:Number,cast:F.t_,json:{write:!0}})],u.prototype,"clusterMinSize",void 0),(0,t._)([(0,p.Cb)({type:Number,cast:F.t_,json:{write:!0}})],u.prototype,"clusterMaxSize",void 0),(0,t._)([(0,p.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],u.prototype,"maxScale",void 0),(0,t._)([(0,p.Cb)(P.C_)],u.prototype,"popupEnabled",void 0),(0,t._)([(0,p.Cb)({type:S.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],u.prototype,"popupTemplate",void 0),(0,t._)([(0,p.Cb)({types:I.A,json:{write:{target:"drawingInfo.renderer"}}})],u.prototype,"renderer",void 0),(0,t._)([(0,h.r)("renderer",["drawingInfo.renderer"])],u.prototype,"readRenderer",null),(0,t._)([(0,p.Cb)({types:ie.AH})],u.prototype,"symbol",void 0),(0,t._)([(0,h.r)("symbol",["drawingInfo.renderer"])],u.prototype,"readSymbol",null),(0,t._)([(0,V.c)("symbol")],u.prototype,"writeSymbol",null),(0,t._)([(0,p.Cb)({type:[_.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],u.prototype,"labelingInfo",void 0),(0,t._)([(0,p.Cb)(P.iR)],u.prototype,"labelsVisible",void 0),(0,t._)([(0,p.Cb)({type:[v.Z],json:{write:!0}})],u.prototype,"fields",void 0),(0,t._)([(0,V.c)("fields")],u.prototype,"writeFields",null),(0,t._)([(0,h.r)("fields")],u.prototype,"readFields",null),u=H=(0,t._)([(0,R.j)("esri.layers.support.FeatureReductionCluster")],u);const re=u;var se=e(47058);const oe={key:"type",base:E.B,typeMap:{cluster:re,binning:ee}},$={types:{key:"type",base:E.B,typeMap:{selection:se.Z,cluster:re,binning:ee}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:oe},"portal-item":{types:oe},"web-scene":{types:{key:"type",base:E.B,typeMap:{selection:se.Z}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:b.C}}}}};var le=e(62192);const de=y=>{let c=class extends y{constructor(...d){super(...d),this.addHandles((0,o.YP)(()=>this.renderer,()=>{if(this.featureReduction){const a=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",a)}},o.Z_))}set featureReduction(d){const a=this._normalizeFeatureReduction(d);this._set("featureReduction",a)}set renderer(d){}_normalizeFeatureReduction(d){if("cluster"!==d?.type)return d;const a=d.clone(),s=[new v.Z({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],A=(a.fields??[]).filter(n=>!n.isAutoGenerated);if(d.renderer&&!d.renderer.authoringInfo?.isAutoGenerated)return a.fields=[...s,...A],a;if(d.symbol)return a.fields=[...s,...A],a.renderer=null,a;if(!this.renderer)return d;const r=(0,le.S1)(s,this.renderer,d,null,!1);return a.fields=[...s,...A],a.renderer=r,a}};return(0,t._)([(0,p.Cb)($)],c.prototype,"featureReduction",null),c=(0,t._)([(0,R.j)("esri.layers.mixins.FeatureReductionLayer")],c),c}},32629:(Z,C,e)=>{e.d(C,{c:()=>i});var E,t=e(17626),o=e(94113),p=e(77712),R=(e(90912),e(85931),e(8314),e(76898)),v=e(2076),b=e(86810);const S=new v.X({asc:"ascending",desc:"descending"});let M=E=class extends b.wq{constructor(O){super(O),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new E({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,t._)([(0,p.Cb)({type:String,json:{write:!0}})],M.prototype,"field",void 0),(0,t._)([(0,p.Cb)({type:String,json:{write:!0}})],M.prototype,"valueExpression",void 0),(0,t._)([(0,p.Cb)({type:S.apiValues,json:{read:S.read,write:S.write}})],M.prototype,"order",void 0),M=E=(0,t._)([(0,R.j)("esri.layers.support.OrderByInfo")],M);const X=M;function W(O,x,Q){if(!O)return null;const D=O.find(m=>!!m.field);if(!D)return null;const I=new X;return I.read(D,Q),[I]}function k(O,x,Q,D){const I=O.find(m=>!!m.field);I&&(0,o.RB)(Q,[I.toJSON()],x)}const i=O=>{let x=class extends O{constructor(){super(...arguments),this.orderBy=null}};return(0,t._)([(0,p.Cb)({type:[X],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:W},write:{target:"layerDefinition.orderBy",writer:k}}})],x.prototype,"orderBy",void 0),x=(0,t._)([(0,R.j)("esri.layers.mixins.OrderedLayer")],x),x}},83989:(Z,C,e)=>{e.d(C,{B:()=>v});var t=e(17626),o=e(86810),p=e(77712),R=(e(90912),e(85931),e(8314),e(76898));let v=class extends o.wq{constructor(){super(...arguments),this.type=null}};(0,t._)([(0,p.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],v.prototype,"type",void 0),v=(0,t._)([(0,R.j)("esri.layers.support.FeatureReduction")],v)},47058:(Z,C,e)=>{e.d(C,{Z:()=>E});var v,t=e(17626),o=e(77712),L=(e(90912),e(85931),e(8314),e(76898)),R=e(83989);let b=v=class extends R.B{constructor(S){super(S),this.type="selection"}clone(){return new v}};(0,t._)([(0,o.Cb)({type:["selection"]})],b.prototype,"type",void 0),b=v=(0,t._)([(0,L.j)("esri.layers.support.FeatureReductionSelection")],b);const E=b}}]);