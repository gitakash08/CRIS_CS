"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[5177],{11915:(St,lt,u)=>{u.d(lt,{e:()=>et});var Y,K,S=u(1719),q={exports:{}};Y=q,void 0!==(K=function(){function V(i,d,v){v=v||2;var y,h,M,T,I,nt,mt,Rt=d&&d.length,Mt=Rt?d[0]*v:i.length,dt=G(i,0,Mt,v,!0),it=[];if(!dt||dt.next===dt.prev)return it;if(Rt&&(dt=function $(i,d,v,y){var h,M,T,I=[];for(h=0,M=d.length;h<M;h++)(T=G(i,d[h]*y,h<M-1?d[h+1]*y:i.length,y,!1))===T.next&&(T.steiner=!0),I.push(at(T));for(I.sort(j),h=0;h<I.length;h++)v=W(v=P(I[h],v),v.next);return v}(i,d,dt,v)),i.length>80*v){y=M=i[0],h=T=i[1];for(var ot=v;ot<Mt;ot+=v)(I=i[ot])<y&&(y=I),(nt=i[ot+1])<h&&(h=nt),I>M&&(M=I),nt>T&&(T=nt);mt=0!==(mt=Math.max(M-y,T-h))?1/mt:0}return X(dt,it,v,y,h,mt),it}function G(i,d,v,y,h){var M,T;if(h===Kt(i,d,v,y)>0)for(M=d;M<v;M+=y)T=st(M,i[M],i[M+1],T);else for(M=v-y;M>=d;M-=y)T=st(M,i[M],i[M+1],T);if(T&&xt(T,T.next)){var I=T.next;Lt(T),T=I}return T}function W(i,d){if(!i)return i;d||(d=i);var v,y=i;do{if(v=!1,y.steiner||!xt(y,y.next)&&0!==rt(y.prev,y,y.next))y=y.next;else{var h=y.prev;if(Lt(y),(y=d=h)===y.next)break;v=!0}}while(v||y!==d);return d}function X(i,d,v,y,h,M,T){if(i){!T&&M&&function C(i,d,v,y){var h=i;do{null===h.z&&(h.z=J(h.x,h.y,d,v,y)),h.prevZ=h.prev,h.nextZ=h.next,h=h.next}while(h!==i);h.prevZ.nextZ=null,h.prevZ=null,function Z(i){var d,v,y,h,M,T,I,nt,mt=1;do{for(v=i,i=null,M=null,T=0;v;){for(T++,y=v,I=0,d=0;d<mt&&(I++,y=y.nextZ);d++);for(nt=mt;I>0||nt>0&&y;)0!==I&&(0===nt||!y||v.z<=y.z)?(h=v,v=v.nextZ,I--):(h=y,y=y.nextZ,nt--),M?M.nextZ=h:i=h,h.prevZ=M,M=h;v=y}M.nextZ=null,mt*=2}while(T>1)}(h)}(i,y,h,M);for(var I,nt,mt=i;i.prev!==i.next;)if(I=i.prev,nt=i.next,M?R(i,y,h,M):L(i))d.push(I.i/v),d.push(i.i/v),d.push(nt.i/v),Lt(i),i=nt.next,mt=nt.next;else if((i=nt)===mt){T?1===T?X(i=N(W(i),d,v),d,v,y,h,M,2):2===T&&w(i,d,v,y,h,M):X(W(i),d,v,y,h,M,1);break}}}function L(i){var d=i.prev,v=i,y=i.next;if(rt(d,v,y)>=0)return!1;for(var h=i.next.next;h!==i.prev;){if(yt(d.x,d.y,v.x,v.y,y.x,y.y,h.x,h.y)&&rt(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function R(i,d,v,y){var h=i.prev,M=i,T=i.next;if(rt(h,M,T)>=0)return!1;for(var mt=h.x>M.x?h.x>T.x?h.x:T.x:M.x>T.x?M.x:T.x,Rt=h.y>M.y?h.y>T.y?h.y:T.y:M.y>T.y?M.y:T.y,Mt=J(h.x<M.x?h.x<T.x?h.x:T.x:M.x<T.x?M.x:T.x,h.y<M.y?h.y<T.y?h.y:T.y:M.y<T.y?M.y:T.y,d,v,y),dt=J(mt,Rt,d,v,y),it=i.prevZ,ot=i.nextZ;it&&it.z>=Mt&&ot&&ot.z<=dt;){if(it!==i.prev&&it!==i.next&&yt(h.x,h.y,M.x,M.y,T.x,T.y,it.x,it.y)&&rt(it.prev,it,it.next)>=0||(it=it.prevZ,ot!==i.prev&&ot!==i.next&&yt(h.x,h.y,M.x,M.y,T.x,T.y,ot.x,ot.y)&&rt(ot.prev,ot,ot.next)>=0))return!1;ot=ot.nextZ}for(;it&&it.z>=Mt;){if(it!==i.prev&&it!==i.next&&yt(h.x,h.y,M.x,M.y,T.x,T.y,it.x,it.y)&&rt(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;ot&&ot.z<=dt;){if(ot!==i.prev&&ot!==i.next&&yt(h.x,h.y,M.x,M.y,T.x,T.y,ot.x,ot.y)&&rt(ot.prev,ot,ot.next)>=0)return!1;ot=ot.nextZ}return!0}function N(i,d,v){var y=i;do{var h=y.prev,M=y.next.next;!xt(h,M)&&Ct(h,y,y.next,M)&&Et(h,M)&&Et(M,h)&&(d.push(h.i/v),d.push(y.i/v),d.push(M.i/v),Lt(y),Lt(y.next),y=i=M),y=y.next}while(y!==i);return W(y)}function w(i,d,v,y,h,M){var T=i;do{for(var I=T.next.next;I!==T.prev;){if(T.i!==I.i&&_t(T,I)){var nt=bt(T,I);return T=W(T,T.next),nt=W(nt,nt.next),X(T,d,v,y,h,M),void X(nt,d,v,y,h,M)}I=I.next}T=T.next}while(T!==i)}function j(i,d){return i.x-d.x}function x(i){if(i.next.prev===i)return i;let d=i;for(;;){const v=d.next;if(v.prev===d||v===d||v===i)break;d=v}return d}function P(i,d){var v=function F(i,d){var v,y=d,h=i.x,M=i.y,T=-1/0;do{if(M<=y.y&&M>=y.next.y&&y.next.y!==y.y){var I=y.x+(M-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(I<=h&&I>T){if(T=I,I===h){if(M===y.y)return y;if(M===y.next.y)return y.next}v=y.x<y.next.x?y:y.next}}y=y.next}while(y!==d);if(!v)return null;if(h===T)return v;var nt,mt=v,Rt=v.x,Mt=v.y,dt=1/0;y=v;do{h>=y.x&&y.x>=Rt&&h!==y.x&&yt(M<Mt?h:T,M,Rt,Mt,M<Mt?T:h,M,y.x,y.y)&&(nt=Math.abs(M-y.y)/(h-y.x),Et(y,i)&&(nt<dt||nt===dt&&(y.x>v.x||y.x===v.x&&tt(v,y)))&&(v=y,dt=nt)),y=y.next}while(y!==mt);return v}(i,d);if(!v)return d;var y=bt(v,i),h=W(v,v.next);let M=x(y);return W(M,M.next),h=x(h),x(d===v?h:d)}function tt(i,d){return rt(i.prev,i,d.prev)<0&&rt(d.next,i,i.next)<0}function J(i,d,v,y,h){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-v)*h)|i<<8))|i<<4))|i<<2))|i<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-y)*h)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function at(i){var d=i,v=i;do{(d.x<v.x||d.x===v.x&&d.y<v.y)&&(v=d),d=d.next}while(d!==i);return v}function yt(i,d,v,y,h,M,T,I){return(h-T)*(d-I)-(i-T)*(M-I)>=0&&(i-T)*(y-I)-(v-T)*(d-I)>=0&&(v-T)*(M-I)-(h-T)*(y-I)>=0}function _t(i,d){return i.next.i!==d.i&&i.prev.i!==d.i&&!function Ut(i,d){var v=i;do{if(v.i!==i.i&&v.next.i!==i.i&&v.i!==d.i&&v.next.i!==d.i&&Ct(v,v.next,i,d))return!0;v=v.next}while(v!==i);return!1}(i,d)&&(Et(i,d)&&Et(d,i)&&function Tt(i,d){var v=i,y=!1,h=(i.x+d.x)/2,M=(i.y+d.y)/2;do{v.y>M!=v.next.y>M&&v.next.y!==v.y&&h<(v.next.x-v.x)*(M-v.y)/(v.next.y-v.y)+v.x&&(y=!y),v=v.next}while(v!==i);return y}(i,d)&&(rt(i.prev,i,d.prev)||rt(i,d.prev,d))||xt(i,d)&&rt(i.prev,i,i.next)>0&&rt(d.prev,d,d.next)>0)}function rt(i,d,v){return(d.y-i.y)*(v.x-d.x)-(d.x-i.x)*(v.y-d.y)}function xt(i,d){return i.x===d.x&&i.y===d.y}function Ct(i,d,v,y){var h=pt(rt(i,d,v)),M=pt(rt(i,d,y)),T=pt(rt(v,y,i)),I=pt(rt(v,y,d));return h!==M&&T!==I||!(0!==h||!k(i,v,d))||!(0!==M||!k(i,y,d))||!(0!==T||!k(v,i,y))||!(0!==I||!k(v,d,y))}function k(i,d,v){return d.x<=Math.max(i.x,v.x)&&d.x>=Math.min(i.x,v.x)&&d.y<=Math.max(i.y,v.y)&&d.y>=Math.min(i.y,v.y)}function pt(i){return i>0?1:i<0?-1:0}function Et(i,d){return rt(i.prev,i,i.next)<0?rt(i,d,i.next)>=0&&rt(i,i.prev,d)>=0:rt(i,d,i.prev)<0||rt(i,i.next,d)<0}function bt(i,d){var v=new Zt(i.i,i.x,i.y),y=new Zt(d.i,d.x,d.y),h=i.next,M=d.prev;return i.next=d,d.prev=i,v.next=h,h.prev=v,y.next=v,v.prev=y,M.next=y,y.prev=M,y}function st(i,d,v,y){var h=new Zt(i,d,v);return y?(h.next=y.next,h.prev=y,y.next.prev=h,y.next=h):(h.prev=h,h.next=h),h}function Lt(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Zt(i,d,v){this.i=i,this.x=d,this.y=v,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Kt(i,d,v,y){for(var h=0,M=d,T=v-y;M<v;M+=y)h+=(i[T]-i[M])*(i[M+1]+i[T+1]),T=M;return h}return V.deviation=function(i,d,v,y){var h=d&&d.length,T=Math.abs(Kt(i,0,h?d[0]*v:i.length,v));if(h)for(var I=0,nt=d.length;I<nt;I++)T-=Math.abs(Kt(i,d[I]*v,I<nt-1?d[I+1]*v:i.length,v));var Mt=0;for(I=0;I<y.length;I+=3){var dt=y[I]*v,it=y[I+1]*v,ot=y[I+2]*v;Mt+=Math.abs((i[dt]-i[ot])*(i[it+1]-i[dt+1])-(i[dt]-i[it])*(i[ot+1]-i[dt+1]))}return 0===T&&0===Mt?0:Math.abs((Mt-T)/T)},V.flatten=function(i){for(var d=i[0][0].length,v={vertices:[],holes:[],dimensions:d},y=0,h=0;h<i.length;h++){for(var M=0;M<i[h].length;M++)for(var T=0;T<d;T++)v.vertices.push(i[h][M][T]);h>0&&v.holes.push(y+=i[h-1].length)}return v},V}())&&(Y.exports=K);const et=(0,S.g)(q.exports)},61751:(St,lt,u)=>{u.d(lt,{Z:()=>j});var R,S=u(17626),Y=u(86810),Q=u(58817),K=u(63290),q=u(77712),et=u(66656),V=u(76898),G=u(90912),W=u(45348),X=u(27530),L=u(92529);const N="esri.geometry.support.MeshComponent",w=K.Z.getLogger(N);let $=R=class extends Y.wq{static from(x){return(0,G.TJ)(R,x)}constructor(x){super(x),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(x){return(0,L.X)(x,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},w)}castMaterial(x){return(0,G.TJ)(x&&"object"==typeof x&&("metallic"in x||"roughness"in x||"metallicRoughnessTexture"in x)?X.Z:W.Z,x)}clone(){return new R({faces:(0,Q.d9)(this.faces),shading:this.shading,material:(0,Q.d9)(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(x,P){const F={faces:(0,Q.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(x,P):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new R(F)}get memoryUsage(){let x=0;return null!=this.faces&&(x+=this.faces.byteLength),null!=this.material&&(x+=this.material.memoryUsage),x}};(0,S._)([(0,q.Cb)({json:{write:!0}})],$.prototype,"faces",void 0),(0,S._)([(0,et.p)("faces")],$.prototype,"castFaces",null),(0,S._)([(0,q.Cb)({type:W.Z,json:{write:!0}})],$.prototype,"material",void 0),(0,S._)([(0,et.p)("material")],$.prototype,"castMaterial",null),(0,S._)([(0,q.Cb)()],$.prototype,"name",void 0),(0,S._)([(0,q.Cb)({type:String,json:{write:!0}})],$.prototype,"shading",void 0),(0,S._)([(0,q.Cb)({type:Boolean})],$.prototype,"trustSourceNormals",void 0),$=R=(0,S._)([(0,V.j)(N)],$);const j=$},80130:(St,lt,u)=>{u.d(lt,{Z:()=>N});var S=u(17626),Y=u(79608),Q=u(86810),K=u(77712),G=(u(90912),u(85931),u(8314),u(55342)),W=u(76898),X=u(28093),L=u(72642);let R=class extends((0,Y.J)(Q.wq)){constructor(w){super(w),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=(0,X.c)()}getOriginPoint(w){const[$,j,x]=this.origin;return new L.Z({x:$,y:j,z:x,spatialReference:w})}setOriginFromPoint({x:w,y:$,z:j}){this.origin=(0,X.f)(w,$,j??0)}};(0,S._)([(0,G.J)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],R.prototype,"type",void 0),(0,S._)([(0,K.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],R.prototype,"origin",void 0),R=(0,S._)([(0,W.j)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],R);const N=R},45348:(St,lt,u)=>{u.d(lt,{Z:()=>N});var L,S=u(17626),Y=u(91558),Q=u(86810),K=u(77712),G=(u(90912),u(85931),u(8314),u(76898)),W=u(1607),X=u(7787);let R=L=class extends Q.wq{constructor(w){super(w),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(w,$){const j=null!=w?w.get(this):null;if(j)return j;const x=new L(this.clonePropertiesWithDeduplication($));return w?.set(this,x),x}clonePropertiesWithDeduplication(w){return{color:null!=this.color?this.color.clone():null,colorTexture:this.colorTexture?.cloneWithDeduplication(w),normalTexture:this.normalTexture?.cloneWithDeduplication(w),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:this.colorTextureTransform?.clone(),normalTextureTransform:this.normalTextureTransform?.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let w=0;return w+=null!=this.color?16:0,null!=this.colorTexture&&(w+=this.colorTexture.memoryUsage),w+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(w+=this.normalTexture.memoryUsage),w+=null!=this.normalTextureTransform?20:0,w}};(0,S._)([(0,K.Cb)({type:Y.Z,json:{write:!0}})],R.prototype,"color",void 0),(0,S._)([(0,K.Cb)({type:W.Z,json:{write:!0}})],R.prototype,"colorTexture",void 0),(0,S._)([(0,K.Cb)({type:X.Z,json:{write:!0}})],R.prototype,"colorTextureTransform",void 0),(0,S._)([(0,K.Cb)({type:W.Z,json:{write:!0}})],R.prototype,"normalTexture",void 0),(0,S._)([(0,K.Cb)({type:X.Z,json:{write:!0}})],R.prototype,"normalTextureTransform",void 0),(0,S._)([(0,K.Cb)({nonNullable:!0,json:{write:!0}})],R.prototype,"alphaMode",void 0),(0,S._)([(0,K.Cb)({nonNullable:!0,json:{write:!0}})],R.prototype,"alphaCutoff",void 0),(0,S._)([(0,K.Cb)({nonNullable:!0,json:{write:!0}})],R.prototype,"doubleSided",void 0),R=L=(0,S._)([(0,G.j)("esri.geometry.support.MeshMaterial")],R);const N=R},27530:(St,lt,u)=>{u.d(lt,{Z:()=>N});var L,S=u(17626),Y=u(91558),Q=u(77712),V=(u(90912),u(85931),u(8314),u(76898)),G=u(45348),W=u(1607),X=u(7787);let R=L=class extends G.Z{constructor(w){super(w),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(w,$){const j=null!=w?w.get(this):null;if(j)return j;const x=new L(this.clonePropertiesWithDeduplication($));return w?.set(this,x),x}getMemoryUsage(){let w=super.getMemoryUsage();return w+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(w+=this.emissiveTexture.memoryUsage),w+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(w+=this.occlusionTexture.memoryUsage),w+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(w+=this.metallicRoughnessTexture.memoryUsage),w+=null!=this.metallicRoughnessTextureTransform?20:0,w}clonePropertiesWithDeduplication(w){return{...super.clonePropertiesWithDeduplication(w),emissiveColor:this.emissiveColor?.clone(),emissiveTexture:this.emissiveTexture?.cloneWithDeduplication(w),emissiveTextureTransform:this.emissiveTextureTransform?.clone(),occlusionTexture:this.occlusionTexture?.cloneWithDeduplication(w),occlusionTextureTransform:this.occlusionTextureTransform?.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:this.metallicRoughnessTexture?.cloneWithDeduplication(w),metallicRoughnessTextureTransform:this.metallicRoughnessTextureTransform?.clone()}}};(0,S._)([(0,Q.Cb)({type:Y.Z,json:{write:!0}})],R.prototype,"emissiveColor",void 0),(0,S._)([(0,Q.Cb)({type:W.Z,json:{write:!0}})],R.prototype,"emissiveTexture",void 0),(0,S._)([(0,Q.Cb)({type:X.Z,json:{write:!0}})],R.prototype,"emissiveTextureTransform",void 0),(0,S._)([(0,Q.Cb)({type:W.Z,json:{write:!0}})],R.prototype,"occlusionTexture",void 0),(0,S._)([(0,Q.Cb)({type:X.Z,json:{write:!0}})],R.prototype,"occlusionTextureTransform",void 0),(0,S._)([(0,Q.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],R.prototype,"metallic",void 0),(0,S._)([(0,Q.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],R.prototype,"roughness",void 0),(0,S._)([(0,Q.Cb)({type:W.Z,json:{write:!0}})],R.prototype,"metallicRoughnessTexture",void 0),(0,S._)([(0,Q.Cb)({type:X.Z,json:{write:!0}})],R.prototype,"metallicRoughnessTextureTransform",void 0),R=L=(0,S._)([(0,V.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],R);const N=R},1607:(St,lt,u)=>{u.d(lt,{Z:()=>j});var R,S=u(17626),Q=(u(8314),u(90740)),K=u(86810),q=u(77712),et=u(90912),G=(u(85931),u(68653)),W=u(76898),X=u(99433),L=u(29840);const N=new WeakMap;let w=0,$=R=class extends K.wq{constructor(x){super(x),this.wrap="repeat"}get url(){return this._get("url")||null}set url(x){this._set("url",x),x&&this._set("data",null)}get data(){return this._get("data")||null}set data(x){this._set("data",x),x&&this._set("url",null)}writeData(x,P,F,tt){if(x instanceof HTMLImageElement){const C={type:"image-element",src:(0,L.t)(x.src,tt),crossOrigin:x.crossOrigin};P[F]=C}else if(x instanceof HTMLCanvasElement){const C=x.getContext("2d").getImageData(0,0,x.width,x.height),Z={type:"canvas-element",imageData:this._encodeImageData(C)};P[F]=Z}else if(x instanceof HTMLVideoElement){const C={type:"video-element",src:(0,L.t)(x.src,tt),autoplay:x.autoplay,loop:x.loop,muted:x.muted,crossOrigin:x.crossOrigin,preload:x.preload};P[F]=C}else if(x instanceof ImageData){const C={type:"image-data",imageData:this._encodeImageData(x)};P[F]=C}}readData(x){switch(x.type){case"image-element":{const P=new Image;return P.src=x.src,P.crossOrigin=x.crossOrigin,P}case"canvas-element":{const P=this._decodeImageData(x.imageData),F=document.createElement("canvas");return F.width=P.width,F.height=P.height,F.getContext("2d").putImageData(P,0,0),F}case"image-data":return this._decodeImageData(x.imageData);case"video-element":{const P=document.createElement("video");return P.src=x.src,P.crossOrigin=x.crossOrigin,P.autoplay=x.autoplay,P.loop=x.loop,P.muted=x.muted,P.preload=x.preload,P}default:return}}get transparent(){const x=this.data,P=this.url;if(x instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(x.getContext("2d").getImageData(0,0,x.width,x.height));if(x instanceof ImageData)return this._imageDataContainsTransparent(x);if(P){const F=P.substr(P.length-4,4).toLowerCase(),tt=P.substr(0,15).toLocaleLowerCase();if(".png"===F||"data:image/png;"===tt)return!0}return!1}set transparent(x){this._overrideIfSome("transparent",x)}get contentHash(){const x="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",P=(F="")=>`d:${F},t:${this.transparent},w:${x}`;return null!=this.url?P(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?P(this.data.src):(N.has(this.data)||N.set(this.data,++w),P(N.get(this.data))):P()}get memoryUsage(){let x=0;if(x+=null!=this.url?this.url.length:0,null!=this.data){const P=this.data;"data"in P?x+=P.data.byteLength:P instanceof HTMLImageElement?x+=P.naturalWidth*P.naturalHeight*3:P instanceof HTMLCanvasElement&&(x+=P.width*P.height*3)}return x}clone(){const x={url:this.url,data:this.data,wrap:this._cloneWrap()};return new R(x)}cloneWithDeduplication(x){const P=x.get(this);if(P)return P;const F=this.clone();return x.set(this,F),F}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(x){let P="";for(let F=0;F<x.data.length;F++)P+=String.fromCharCode(x.data[F]);return{data:btoa(P),width:x.width,height:x.height}}_decodeImageData(x){const P=atob(x.data),F=new Uint8ClampedArray(P.length);for(let tt=0;tt<P.length;tt++)F[tt]=P.charCodeAt(tt);return(0,Q.Jl)(F,x.width,x.height)}_imageDataContainsTransparent(x){for(let P=3;P<x.data.length;P+=4)if(255!==x.data[P])return!0;return!1}static from(x){return"string"==typeof x?new R({url:x}):x instanceof HTMLImageElement||x instanceof HTMLCanvasElement||x instanceof ImageData||x instanceof HTMLVideoElement?new R({data:x}):(0,et.TJ)(R,x)}};(0,S._)([(0,q.Cb)({type:String,json:{write:L.w}})],$.prototype,"url",null),(0,S._)([(0,q.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,q.Cb)()],$.prototype,"data",null),(0,S._)([(0,X.c)("data")],$.prototype,"writeData",null),(0,S._)([(0,G.r)("data")],$.prototype,"readData",null),(0,S._)([(0,q.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],$.prototype,"transparent",null),(0,S._)([(0,q.Cb)({json:{write:!0}})],$.prototype,"wrap",void 0),(0,S._)([(0,q.Cb)({readOnly:!0})],$.prototype,"contentHash",null),$=R=(0,S._)([(0,W.j)("esri.geometry.support.MeshTexture")],$);const j=$},7787:(St,lt,u)=>{u.d(lt,{Z:()=>X});var S=u(17626),Y=u(79608),Q=u(86810),K=u(77712),G=(u(90912),u(85931),u(8314),u(76898));let W=class extends((0,Y.J)(Q.wq)){constructor(L){super(L),this.offset=[0,0],this.rotation=0,this.scale=[1,1]}};(0,S._)([(0,K.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],W.prototype,"offset",void 0),(0,S._)([(0,K.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],W.prototype,"rotation",void 0),(0,S._)([(0,K.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],W.prototype,"scale",void 0),W=(0,S._)([(0,G.j)("esri.geometry.support.MeshTextureTransform")],W);const X=W},92529:(St,lt,u)=>{u.d(lt,{Q:()=>L,X:()=>N});var G,S=u(17626),Y=u(86810),Q=u(58817),K=u(63290),q=u(77712),et=u(66656),V=u(76898);const W="esri.geometry.support.MeshVertexAttributes",X=K.Z.getLogger(W);let L=G=class extends Y.wq{constructor(j){super(j),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(j){return N(j,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},X)}castPosition(j){return j&&j instanceof Float32Array&&X.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),N(j,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},X)}castUv(j){return N(j,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},X)}castNormal(j){return N(j,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},X)}castTangent(j){return N(j,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},X)}clone(){const j={position:(0,Q.d9)(this.position),uv:(0,Q.d9)(this.uv),normal:(0,Q.d9)(this.normal),tangent:(0,Q.d9)(this.tangent),color:(0,Q.d9)(this.color)};return new G(j)}clonePositional(){const j={position:(0,Q.d9)(this.position),normal:(0,Q.d9)(this.normal),tangent:(0,Q.d9)(this.tangent),uv:this.uv,color:this.color};return new G(j)}get memoryUsage(){let j=0;return j+=this.position.byteLength,null!=this.uv&&(j+=this.uv.byteLength),null!=this.normal&&(j+=this.normal.byteLength),null!=this.tangent&&(j+=this.tangent.byteLength),null!=this.color&&(j+=this.color.byteLength),j}};function R(j,x,P,F){const{loggerTag:tt,stride:C}=x;return j.length%C!=0?(F.error(tt,`Invalid array length, expected a multiple of ${C}`),new P([])):j}function N(j,x,P,F,tt){if(!j)return j;if(j instanceof x)return R(j,F,x,tt);for(const C of P)if(j instanceof C)return R(new x(j),F,x,tt);if(Array.isArray(j))return R(new x(j),F,x,tt);{const C=P.map(Z=>`'${Z.name}'`);return tt.error(`Failed to set property, expected one of ${C}, but got ${j.constructor.name}`),new x([])}}function w(j,x,P){x[P]=function $(j){const x=new Array(j.length);for(let P=0;P<j.length;P++)x[P]=j[P];return x}(j)}(0,S._)([(0,q.Cb)({json:{write:w}})],L.prototype,"color",void 0),(0,S._)([(0,et.p)("color")],L.prototype,"castColor",null),(0,S._)([(0,q.Cb)({nonNullable:!0,json:{write:w}})],L.prototype,"position",void 0),(0,S._)([(0,et.p)("position")],L.prototype,"castPosition",null),(0,S._)([(0,q.Cb)({json:{write:w}})],L.prototype,"uv",void 0),(0,S._)([(0,et.p)("uv")],L.prototype,"castUv",null),(0,S._)([(0,q.Cb)({json:{write:w}})],L.prototype,"normal",void 0),(0,S._)([(0,et.p)("normal")],L.prototype,"castNormal",null),(0,S._)([(0,q.Cb)({json:{write:w}})],L.prototype,"tangent",void 0),(0,S._)([(0,et.p)("tangent")],L.prototype,"castTangent",null),L=G=(0,S._)([(0,V.j)(W)],L)},96603:(St,lt,u)=>{u.d(lt,{CP:()=>et,JG:()=>w,LL:()=>V,NZ:()=>G,fV:()=>$,vj:()=>P,yT:()=>tt,zE:()=>F});var S=u(15861),Y=u(84792),Q=u(85931),K=u(10699),q=u(35391);class et{constructor(Z,J,at){this.assetName=Z,this.assetMimeType=J,this.parts=at}equals(Z){return this===Z||this.assetName===Z.assetName&&this.assetMimeType===Z.assetMimeType&&(0,Q.fS)(this.parts,Z.parts,(J,at)=>J.equals(at))}isOnService(Z){return this.parts.every(J=>J.isOnService(Z))}makeHash(){let Z="";for(const J of this.parts)Z+=J.partHash;return Z}toBlob(Z){var J=this;return(0,S.Z)(function*(){const{parts:at}=J;if(1===at.length)return at[0].toBlob(Z);const yt=yield Promise.all(at.map(_t=>_t.toBlob(Z)));return(0,K.k_)(Z),new Blob(yt)})()}}class V{constructor(Z,J){this.partUrl=Z,this.partHash=J}equals(Z){return this===Z||this.partUrl===Z.partUrl&&this.partHash===Z.partHash}isOnService(Z){return this.partUrl.startsWith(`${Z.path}/assets/`)}toBlob(Z){var J=this;return(0,S.Z)(function*(){const{data:at}=yield(0,Y.Z)(J.partUrl,{responseType:"blob"});return(0,K.k_)(Z),at})()}}function G(C){return function R(C){return!!C&&(Array.isArray(C)?C.some(N):N(C))}(C?.source)}function W(C){return!!Array.isArray(C)&&C.every(Z=>Z instanceof et)}const X=/^(model\/gltf\+json)|(model\/gltf-binary)$/,L=/\.(gltf|glb)/i;function N(C){if(C instanceof File){const{type:Z,name:J}=C;return X.test(Z)||L.test(J)}return X.test(C.assetMimeType)||L.test(C.assetName)}function w(C,Z){if(!C)return!1;const{source:J}=C;return function j(C,Z){return Array.isArray(C)?C.length>0&&C.every(at=>x(at,Z)):x(C,Z)}(J,Z)}function $(C,Z){if(C===Z)return!0;const{source:J}=C,{source:at}=Z;if(J===at)return!0;if(W(J)&&W(at)){if(J.length!==at.length)return!1;const yt=(xt,Ct)=>xt.assetName<Ct.assetName?-1:xt.assetName>Ct.assetName?1:0,_t=[...J].sort(yt),rt=[...at].sort(yt);for(let xt=0;xt<_t.length;++xt)if(!_t[xt].equals(rt[xt]))return!1;return!0}return!1}function x(C,Z){return C instanceof et&&C.isOnService(Z)}function P(C,Z){return C instanceof File?(0,q.dm)(C,Z):(0,q.S0)(C.assetMimeType,Z)??(0,q.Ow)(C.assetName,Z)}function F(C){return Array.isArray(C)?C:[C]}function tt(C){return!!C.original}},13757:(St,lt,u)=>{u.d(lt,{d:()=>Q});var S=u(21286),Y=u(28844);function Q(G,W,X){const L=Array.isArray(G),R=L?G.length/W:G.byteLength/(4*W),N=L?G:new Uint32Array(G,0,R*W),w=X?.minReduction??0,$=X?.originalIndices||null,j=$?$.length:0,x=X?.componentOffsets||null;let P=0;if(x)for(let k=0;k<x.length-1;k++){const pt=x[k+1]-x[k];pt>P&&(P=pt)}else P=R;const F=Math.floor(1.1*P)+1;(null==V||V.length<2*F)&&(V=new Uint32Array((0,S.Sf)(2*F)));for(let k=0;k<2*F;k++)V[k]=0;let tt=0;const C=!!x&&!!$,Z=C?j:R;let J=(0,Y.$z)(R);const at=new Uint32Array(j);let _t=0!==w?Math.ceil(7.84*1.96/(w*w)*w*(1-w)):Z,rt=1,xt=x?x[1]:Z;for(let k=0;k<Z;k++){if(k===_t){const st=1-tt/k;if(st+1.96*Math.sqrt(st*(1-st)/k)<w)return null;_t*=2}if(k===xt){for(let st=0;st<2*F;st++)V[st]=0;if($)for(let st=x[rt-1];st<x[rt];st++)at[st]=J[$[st]];xt=x[++rt]}const pt=C?$[k]:k,Ut=pt*W,Et=et(N,Ut,W);let Tt=Et%F,bt=tt;for(;0!==V[2*Tt+1];){if(V[2*Tt]===Et){const st=V[2*Tt+1]-1;if(K(N,Ut,st*W,W)){bt=J[st];break}}Tt++,Tt>=F&&(Tt-=F)}bt===tt&&(V[2*Tt]=Et,V[2*Tt+1]=pt+1,tt++),J[pt]=bt}if(0!==w&&1-tt/R<w)return null;if(C){for(let k=x[rt-1];k<at.length;k++)at[k]=J[$[k]];J=(0,Y.mi)(at)}const Ct=L?new Array(tt):new Uint32Array(tt*W);tt=0;for(let k=0;k<Z;k++)J[k]===tt&&(q(N,(C?$[k]:k)*W,Ct,tt*W,W),tt++);if($&&!C){const k=new Uint32Array(j);for(let pt=0;pt<k.length;pt++)k[pt]=J[$[pt]];J=(0,Y.mi)(k)}return{buffer:Array.isArray(Ct)?Ct:Ct.buffer,indices:J,uniqueCount:tt}}function K(G,W,X,L){for(let R=0;R<L;R++)if(G[W+R]!==G[X+R])return!1;return!0}function q(G,W,X,L,R){for(let N=0;N<R;N++)X[L+N]=G[W+N]}function et(G,W,X){let L=0;for(let R=0;R<X;R++)L=G[W+R]+L|0,L=L+(L<<11)+(L>>>2)|0;return L>>>0}let V=null},75177:(St,lt,u)=>{u.r(lt),u.d(lt,{assetMapFromAssetMapsJSON:()=>Ve,extractMesh:()=>$e,meshFeatureSetFromJSON:()=>Hr});var S=u(88879),Y=u(63290),Q=u(88159),K=u(28093),q=u(2004),et=u(15861),V=u(17626),G=u(26584),W=u(47996),X=u(60330),L=u(10699),R=u(32917),N=u(77712),x=(u(90912),u(85931),u(8314),u(76898)),P=u(21674),F=u(72642),tt=u(37118),C=u(89586),Z=u(61751);class J extends G.Z{constructor(){super("mesh-not-loaded","Mesh must be loaded before applying operations")}}class at extends G.Z{constructor(){super("component-not-found","Provided component is not part of the list of components")}}class yt extends G.Z{constructor(){super("invalid-polygon","expected polygon to be a Polygon instance")}}class _t extends G.Z{constructor(){super("invalid-input:location","Expected location to be a Point instance")}}class rt extends G.Z{constructor(){super("invalid-input:no-layer","A layer is needed to convert the files")}}class xt extends G.Z{constructor(){super("invalid-input:no-model","No supported model found")}}class Ct extends G.Z{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}var k=u(80130),pt=u(57517),Ut=u(28036),Et=u(99746),Tt=u(92529),bt=u(11915),st=u(78172),Lt=u(25748),Zt=u(36344),Kt=u(28844),i=u(13757),v=(u(29132),u(21286)),y=u(16730),h=u(84161),M=u(4688);u(24425),u(13150),u(16396);const Mt=(0,M.Ue)();function ee(t,e,r,s,c,_,E){c*=3;for(let D=0;D<_;++D){const O=t[e];s[c++]=O[0],s[c++]=O[1],s[c++]=E?O[2]:0,e+=r}return c/3}function Ye(t,e,r){if(e){const c=function Rt(t,e,r){const s=function mt(t,e,r,s){const c=Array.isArray(e[0])?(E,D)=>e[E][D]:(E,D)=>e[3*E+D],_=s?(0,y.c9)(s)/(0,y._R)(s):1;return(0,M.zu)(t,(E,D)=>(0,h.s)(E,c(D,0)*_,c(D,1)*_,c(D,2)),r)}(Mt,t,e,r)?(0,M.mJ)(Mt):[0,0,1];return Math.abs(s[2])>Math.cos((0,v.Vl)(80))?st.R.Z:Math.abs(s[1])>Math.abs(s[0])?st.R.Y:st.R.X}(t,t.length-1,r);if(c===st.R.X)return!(0,Lt.bu)(t,st.R.Y,st.R.Z);if(c===st.R.Y)return!(0,Lt.bu)(t,st.R.X,st.R.Z)}return!(0,Lt.bu)(t,st.R.X,st.R.Y)}var re,t;(t=re||(re={}))[t.NONE=0]="NONE",t[t.CCW_IS_HOLE=1]="CCW_IS_HOLE";var kt=u(60853);let xe=null;function ne(t,e){let r=1/0,s=1/0,c=1/0,_=-1/0,E=-1/0,D=-1/0;const O=t.length;let A=0;for(;A<O;){const U=t[A++],B=t[A++],z=t[A++];r=Math.min(r,U),s=Math.min(s,B),c=Math.min(c,z),_=Math.max(_,U),E=Math.max(E,B),D=Math.max(D,z)}return new q.Z({xmin:r,ymin:s,zmin:c,xmax:_,ymax:E,zmax:D,spatialReference:e})}var ke=u(39774);function wt(t,e,r,s=0){oe[0]=t.x,oe[1]=t.y;const c=t.z;return oe[2]=void 0!==c?c:s,(0,ke.projectBuffer)(oe,t.spatialReference,0,e,r,0,1)}const oe=(0,K.c)();var It=u(92545);const qt="esri.geometry.support.meshUtils.centerAt";const _e=(0,K.c)(),Ee=(0,K.c)(),or=(0,K.c)();u(54346),u(84792);var Me=u(21726);function le(){return le=(0,et.Z)(function*(t,e,r){const{source:s}=e,{loadGLTFMesh:c}=yield(0,L.Hl)(Promise.all([u.e(9327),u.e(3355)]).then(u.bind(u,3355)),r),_=yield function ar(t,e){return ce.apply(this,arguments)}(s,r);(0,L.k_)(r);const E=c(new F.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),_.url,{resolveFile:ir(_),requestFile:void 0,useTransform:!0,signal:r?.signal,expectedType:_.type});E.then(()=>_.dispose(),()=>_.dispose());const{vertexAttributes:D,components:O}=yield E;t.vertexAttributes=D,t.components=O}),le.apply(this,arguments)}function ir(t){const e=(0,Me.Yd)(t.url);return r=>{const s=(0,Me.PF)(r,e,e),c=s?s.replace(/^ *\.\//,""):null;return(c?t.files.get(c):null)??r}}function ce(){return ce=(0,et.Z)(function*(t,e){if(Array.isArray(t)){if(!t.length)throw new G.Z("mesh-load-external:missing-assets","There must be at least one file to load");return t[0]instanceof File?function cr(t){return Oe(t.map(e=>({name:e.name,mimeType:e.type,source:Ae(e)})))}(t):function ur(t,e){return pe.apply(this,arguments)}(t,e)}return Ae(t)}),ce.apply(this,arguments)}function ue(){return ue=(0,et.Z)(function*(t,e){const{parts:r,assetMimeType:s,assetName:c}=t;if(1===r.length)return new Nt(r[0].partUrl);const _=yield t.toBlob(e);return(0,L.k_)(e),Nt.fromBlob(_,Pe(c,s))}),ue.apply(this,arguments)}function Ae(t){return Nt.fromBlob(t,Pe(t.name,t.type))}function pe(){return pe=(0,et.Z)(function*(t,e){const r=yield(0,L.OT)(t.map(function(){var s=(0,et.Z)(function*(c){const _=yield function lr(t,e){return ue.apply(this,arguments)}(c);return(0,L.k_)(e),{name:c.assetName,mimeType:c.assetMimeType,source:_}});return function(c){return s.apply(this,arguments)}}()));if((0,L.Hc)(e))throw r.forEach(s=>s.source.dispose()),(0,L.zE)();return Oe(r)}),pe.apply(this,arguments)}u(42743);const Te=/^model\/gltf\+json$/,De=/^model\/gltf-binary$/,he=/\.gltf$/i,pr=/\.glb$/i;function Oe(t){const e=new Map;let r,s=null;for(const{name:c,mimeType:_,source:E}of t)null===s&&(Te.test(_)||he.test(c)?(s=E.url,r="gltf"):(De.test(_)||pr.test(c))&&(s=E.url,r="glb")),e.set(c,E.url),E.files.forEach((D,O)=>e.set(O,D));if(null==s)throw new G.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new Nt(s,()=>t.forEach(({source:c})=>c.dispose()),e,r)}class Nt{constructor(e,r=(()=>{}),s=new Map,c){this.url=e,this.dispose=r,this.files=s,this.type=c}static fromBlob(e,r){const s=URL.createObjectURL(e);return new Nt(s,()=>URL.revokeObjectURL(s),void 0,r)}}function Pe(t,e){return Te.test(e)||he.test(t)?"gltf":De.test(e)||he.test(t)?"glb":void 0}var hr=u(79608),fr=u(74333),zt=u(96603);let Wt=class extends hr.j{constructor(){super(),this.externalSources=new fr.Z,this._explicitDisplaySource=null,this.addHandles((0,R.on)(()=>this.externalSources,"after-remove",({item:t})=>{t===this._explicitDisplaySource&&(this._explicitDisplaySource=null)},{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}))}get displaySource(){return this._explicitDisplaySource??this._implicitDisplaySource}set displaySource(t){if(null!=t&&!(0,zt.NZ)(t))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=t,t&&this.externalSources.every(e=>!(0,zt.fV)(e,t))&&this.externalSources.add(t)}clearSources(){this.externalSources.removeAll()}getExternalSourcesOnService(t){return this.externalSources.items.filter(e=>(0,zt.JG)(e,t))}get _implicitDisplaySource(){return this.externalSources.find(zt.NZ)}};(0,V._)([(0,N.Cb)()],Wt.prototype,"externalSources",void 0),(0,V._)([(0,N.Cb)()],Wt.prototype,"displaySource",null),(0,V._)([(0,N.Cb)()],Wt.prototype,"_implicitDisplaySource",null),(0,V._)([(0,N.Cb)()],Wt.prototype,"_explicitDisplaySource",void 0),Wt=(0,V._)([(0,x.j)("esri.geometry.support.meshUtils.Metadata")],Wt);var Ce=u(30217),fe=u(550),Re=u(43703),me=u(81863),Se=u(21575),vt=u(65231);const mr="esri.geometry.support.meshUtils.offset";function we(t,e){if(t)for(let r=0;r<t.length;r+=3)for(let s=0;s<3;s++)t[r+s]+=e[s]}const xr=(0,K.c)(),je=(0,Re.a)(),Ue=(0,fe.a)(),te={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function se(t,e,r){t.isPlane||function Or(t){for(let e=0;e<t.position.length;e+=3)t.position[e+2]+=.5}(t),function Pr(t,e){if(null==e)return;const r="number"==typeof e?[e,e,e]:[null!=e.width?e.width:1,null!=e.depth?e.depth:1,null!=e.height?e.height:1];Ft[0]=r[0],Ft[4]=r[1],Ft[8]=r[2];for(let s=0;s<t.position.length;s+=3){for(let c=0;c<3;c++)ht[c]=t.position[s+c];(0,h.t)(ht,ht,Ft);for(let c=0;c<3;c++)t.position[s+c]=ht[c]}if(r[0]!==r[1]||r[1]!==r[2]){Ft[0]=1/r[0],Ft[4]=1/r[1],Ft[8]=1/r[2];for(let s=0;s<t.normal.length;s+=3){for(let c=0;c<3;c++)ht[c]=t.normal[s+c];(0,h.t)(ht,ht,Ft),(0,h.n)(ht,ht);for(let c=0;c<3;c++)t.normal[s+c]=ht[c]}}}(t,r?.size);const{vertexAttributes:s,vertexSpace:c,transform:_}=(0,kt.georeferenceByTransform)(t,e,r);return{vertexAttributes:new Tt.Q({...s,uv:t.uv}),vertexSpace:c,transform:_,components:[new Z.Z({faces:t.faces,material:r?.material||null})],spatialReference:e.spatialReference}}const Cr={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Rr={south:0,east:1,north:2,west:3,up:4,down:5},ht=(0,K.c)(),Ft=(0,fe.a)();var Sr=u(28347);const Le="esri.geometry.support.meshUtils.rotate";function Gt(t,e,r,s=K.Z){if(null!=t){(0,Sr.c)(ie,(0,C.WH)(e),(0,C.ZZ)(e));for(let c=0;c<t.length;c+=r){for(let _=0;_<3;_++)Jt[_]=t[c+_]-s[_];(0,h.e)(Jt,Jt,ie);for(let _=0;_<3;_++)t[c+_]=Jt[_]+s[_]}}}const Jt=(0,K.c)(),be=(0,K.c)(),Ze=(0,C.Ue)(),ie=(0,Re.a)(),Ie=(0,fe.a)(),We=(0,K.c)(),Fe="esri.geometry.support.meshUtils.scale";function Be(t,e,r=K.Z){if(t)for(let s=0;s<t.length;s+=3){for(let c=0;c<3;c++)Xt[c]=t[s+c]-r[c];(0,h.i)(Xt,Xt,e);for(let c=0;c<3;c++)t[s+c]=Xt[c]+r[c]}}const Xt=(0,K.c)(),Ke=(0,K.c)(),Ne=(0,K.c)();var Ot,de=u(35391);function ge(){return ge=(0,et.Z)(function*(t){const e=[];for(const r of t)r.name.toLowerCase().endsWith(".zip")?e.push(Br(r)):e.push(Promise.resolve(r));return(yield Promise.all(e)).flat()}),ge.apply(this,arguments)}function Br(t){return ve.apply(this,arguments)}function ve(){return ve=(0,et.Z)(function*(t){const{BlobReader:e,ZipReader:r,BlobWriter:s}=yield u.e(6547).then(u.bind(u,76547)),c=[];return(yield new r(new e(t)).getEntries()).forEach(E=>{if(E.directory||/^__MACOS/i.test(E.filename))return;const D=new s,O=E.getData?.(D).then(A=>new File([A],E.filename));O&&c.push(O)}),Promise.all(c)}),ve.apply(this,arguments)}const Bt="esri.geometry.Mesh",Kr={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:pt.Z,"georeferenced-relative":k.Z,local:Ut.Z}};let At=Ot=class extends(W.Z.LoadableMixin((0,X.v)(P.Z))){constructor(t){super(t),this.components=null,this.vertexSpace=new pt.Z,this.transform=null,this.metadata=new Wt,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new Tt.Q,this.type="mesh"}initialize(){(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.addHandles((0,R.YP)(()=>({vertexAttributes:this.vertexAttributes,components:this.components?.map(t=>t.clone())}),()=>this._clearSources(),{once:!0,sync:!0}))})}get hasExtent(){return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=this.metadata.displaySource?.extent}get _transformedExtent(){const{components:t,spatialReference:e,vertexAttributes:r,vertexSpace:s}=this,c=r.position;if(0===c.length||t&&0===t.length)return new q.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:e});if("local"===s.type){const{_untransformedExtent:_,transform:E}=this;return function Qe({xmin:t,xmax:e,ymin:r,ymax:s,zmin:c,zmax:_},E,D,O){c??=0,_??=0,xe??=new Float64Array(24);const A=xe;return A[0]=t,A[1]=r,A[2]=c,A[3]=t,A[4]=s,A[5]=c,A[6]=e,A[7]=s,A[8]=c,A[9]=e,A[10]=r,A[11]=c,A[12]=t,A[13]=r,A[14]=_,A[15]=t,A[16]=s,A[17]=_,A[18]=e,A[19]=s,A[20]=_,A[21]=e,A[22]=r,A[23]=_,(0,kt.project)({positions:A,transform:E,vertexSpace:D,inSpatialReference:O,outSpatialReference:O,outPositions:A}),ne(A,O)}(_,E,s,e)}if("georeferenced-relative"===s.type){const{transform:_}=this;return ne((0,kt.project)({positions:c,transform:_,vertexSpace:s,inSpatialReference:e,outSpatialReference:e}),e)}return ne(c,e)}get _untransformedExtent(){return ne(this.vertexAttributes.position,this.spatialReference)}get anchor(){const{vertexSpace:t}=this;if(t.isRelative)return t.getOriginPoint(this.spatialReference);const{center:e,zmin:r}=this._transformedExtent;return new F.Z({x:e.x,y:e.y,z:r,spatialReference:this.spatialReference})}get origin(){const{vertexSpace:t}=this;return t.isRelative?t.getOriginPoint(this.spatialReference):this._transformedExtent.center}get extent(){return this.loaded||null==this.metadata?.displaySource?.extent?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(t){if(!this.loaded)return Y.Z.getLogger(this).error("addComponent()",(new J).message);this.components||(this.components=[]),this.components.push(Z.Z.from(t)),this.notifyChange("components")}removeComponent(t){if(!this.loaded)return Y.Z.getLogger(this).error("removeComponent()",(new J).message);if(this.components){const e=this.components.indexOf(t);if(-1!==e)return this.components.splice(e,1),void this.notifyChange("components")}Y.Z.getLogger(this).error("removeComponent()",(new at).message)}rotate(t,e,r,s){return(0,C.qw)(t,e,r,ze),function wr(t,e,r){if(!t.vertexAttributes?.position||0===e[3])return;const{spatialReference:s,vertexSpace:c}=t;if(c.isRelative){(0,It.A)(c,Le,r);const _=r?.origin??t.origin;t.transform??=new Et.Z,function jr(t,e,r,s){const c=e.origin,_=(0,h.s)(Jt,s.x,s.y,s.z??0),E=(0,h.f)(Jt,_,c);t.applyLocalInverse(E,be),t.rotation=(0,C.qC)(t.rotation,r,(0,C.Ue)()),t.applyLocalInverse(E,E),(0,h.f)(E,E,be),t.translation=(0,h.g)((0,K.c)(),t.translation,E)}(t.transform,c,e,_)}else{const _=r?.origin??t.origin;(0,It.h)(s,r)?function Ur(t,e,r){const s=t.spatialReference,c=(0,me.rS)(s),_=We;wt(r,_,c)||wt(t.origin,_,c);const E=t.vertexAttributes.position,D=t.vertexAttributes.normal,O=t.vertexAttributes.tangent,A=new Float64Array(E.length),U=null!=D?new Float32Array(D.length):null,B=null!=O?new Float32Array(O.length):null;(0,Se.B)(c,_,ie,c),(0,Ce.f)(Ie,ie);const z=Ze;(0,h.t)((0,C.ZZ)(Ze),(0,C.ZZ)(e),Ie),z[3]=e[3],(0,vt.XO)(E,s,A),null!=D&&null!=U&&(0,vt.Iz)(D,E,A,s,U),null!=O&&null!=B&&(0,vt.wi)(O,E,A,s,B),Gt(A,z,3,_),(0,vt.To)(A,E,s),null!=D&&null!=U&&(Gt(U,z,3),(0,vt.Yk)(U,E,A,s,D)),null!=O&&null!=B&&(Gt(B,z,4),(0,vt.M2)(B,E,A,s,O)),t.vertexAttributesChanged()}(t,e,_):function Lr(t,e,r){const s=We;if(!wt(r,s,t.spatialReference)){const c=t.origin;s[0]=c.x,s[1]=c.y,s[2]=c.z,Y.Z.getLogger(Le).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}Gt(t.vertexAttributes.position,e,3,s),Gt(t.vertexAttributes.normal,e,3),Gt(t.vertexAttributes.tangent,e,4),t.vertexAttributesChanged()}(t,e,_)}}(this,ze,s),this}offset(t,e,r,s){return this.loaded?(ae[0]=t,ae[1]=e,ae[2]=r,function dr(t,e,r){if(!t.vertexAttributes?.position)return;const{vertexSpace:s}=t;s.isRelative?((0,It.A)(s,mr,r),function gr(t,e){const r=t.origin;t.origin=(0,h.g)((0,K.c)(),r,e)}(s,e)):(0,It.h)(t.spatialReference,r)?function vr(t,e){const r=t.spatialReference,s=t.vertexAttributes.position,c=t.vertexAttributes.normal,_=t.vertexAttributes.tangent,E=new Float64Array(s.length),D=null!=c?new Float32Array(c.length):null,O=null!=_?new Float32Array(_.length):null,A=t.extent.center,U=xr;(0,Se.B)(r,[A.x,A.y,A.z],je,(0,me.rS)(r)),(0,Ce.f)(Ue,je),(0,h.t)(U,e,Ue),(0,vt.XO)(s,r,E),null!=c&&null!=D&&(0,vt.Iz)(c,s,E,r,D),null!=_&&null!=O&&(0,vt.wi)(_,s,E,r,O),we(E,U),(0,vt.To)(E,s,r),null!=c&&null!=D&&(0,vt.Yk)(D,s,E,r,c),null!=_&&null!=O&&(0,vt.M2)(O,s,E,r,_),t.vertexAttributesChanged()}(t,e):function yr(t,e){we(t.vertexAttributes.position,e),t.vertexAttributesChanged()}(t,e)}(this,ae,s),this):(Y.Z.getLogger(this).error("offset()",(new J).message),this)}scale(t,e){return this.loaded?(function br(t,e,r){if(!t.vertexAttributes?.position)return;const{spatialReference:s,vertexSpace:c}=t;if(c.isRelative){(0,It.A)(c,Fe,r);const _=r?.origin??t.origin;t.transform??=new Et.Z,function Zr(t,e,r,s){const c=e.origin,_=(0,h.s)(Xt,s.x,s.y,s.z),E=(0,h.f)(Xt,_,c);t.applyLocalInverse(E,Ke);const D=(0,h.i)((0,K.c)(),t.scale,r);t.scale=D,t.applyLocalInverse(E,E),(0,h.f)(E,E,Ke),t.translation=(0,h.g)((0,K.c)(),t.translation,E)}(t.transform,c,e,_)}else{const _=(0,It.h)(s,r),E=r?.origin??t.origin;_?function Ir(t,e,r){const s=t.spatialReference,c=(0,me.rS)(s),_=Ne;wt(r,_,c)||wt(t.origin,_,c);const E=t.vertexAttributes.position,D=t.vertexAttributes.normal,O=t.vertexAttributes.tangent,A=new Float64Array(E.length),U=null!=D?new Float32Array(D.length):null,B=null!=O?new Float32Array(O.length):null;(0,vt.XO)(E,s,A),null!=D&&null!=U&&(0,vt.Iz)(D,E,A,s,U),null!=O&&null!=B&&(0,vt.wi)(O,E,A,s,B),Be(A,e,_),(0,vt.To)(A,E,s),null!=D&&null!=U&&(0,vt.Yk)(U,E,A,s,D),null!=O&&null!=B&&(0,vt.M2)(B,E,A,s,O),t.vertexAttributesChanged()}(t,e,E):function Wr(t,e,r){const s=Ne;if(!wt(r,s,t.spatialReference)){const c=t.origin;s[0]=c.x,s[1]=c.y,s[2]=c.z,Y.Z.getLogger(Fe).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}Be(t.vertexAttributes.position,e,s),t.vertexAttributesChanged()}(t,e,E)}}(this,t,e),this):(Y.Z.getLogger(this).error("scale()",(new J).message),this)}centerAt(t,e){return this.loaded?(function qe(t,e,r){if(!t.vertexAttributes?.position)return;const{vertexSpace:s}=t,c=r?.origin??t.origin;s.isRelative?((0,It.A)(s,qt,r),function tr(t,e,r){const{vertexSpace:s}=t;if(!s.isRelative)return;const c=Ee,_=_e;if(!wt(e,_,t.spatialReference))return void Y.Z.getLogger(qt).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!wt(r,c,t.spatialReference)){const O=t.origin;c[0]=O.x,c[1]=O.y,c[2]=O.z,Y.Z.getLogger(qt).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}const E=(0,h.f)(or,_,c),D=s.origin;s.origin=(0,h.g)((0,K.c)(),D,E)}(t,e,c)):(0,It.h)(t.spatialReference,r)?function er(t,e,r){const s=(0,kt.ungeoreference)(t.vertexAttributes,r,{geographic:!0}),{position:c,normal:_,tangent:E}=(0,kt.georeference)(s,e,{geographic:!0});t.vertexAttributes.position=c,t.vertexAttributes.normal=_,t.vertexAttributes.tangent=E,t.vertexAttributesChanged()}(t,e,c):function rr(t,e,r){const s=Ee,c=_e;if(wt(e,c,t.spatialReference)){if(!wt(r,s,t.spatialReference)){const _=t.origin;s[0]=_.x,s[1]=_.y,s[2]=_.z,Y.Z.getLogger(qt).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(function nr(t,e,r){if(t)for(let s=0;s<t.length;s+=3)for(let c=0;c<3;c++)t[s+c]+=e[c]-r[c]})(t.vertexAttributes.position,c,s),t.vertexAttributesChanged()}else Y.Z.getLogger(qt).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(t,e,c)}(this,t,e),this):(Y.Z.getLogger(this).error("centerAt()",(new J).message),this)}load(t){const{metadata:{displaySource:e}}=this;return e&&this.addResolvingPromise(function sr(t,e,r){return le.apply(this,arguments)}(this,e,t)),Promise.resolve(this)}addExternalSources(t){this.metadata.externalSources.addMany(t)}updateDisplaySource(t){this.metadata.displaySource=t}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(t){let e=null;if(this.components){const s=new Map,c=new Map;e=this.components.map(_=>_.cloneWithDeduplication(s,c))}const r={components:e,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:t,transform:this.transform?.clone()??null,metadata:this.metadata.clone()};return new Ot(r)}cloneShallow(){return new Ot({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var e=this;return(0,et.Z)(function*(){const r=u.e(4367).then(u.bind(u,54367)),s=e.load(),c=yield Promise.all([r,s]),{toBinaryGLTF:_}=c[0];return _(e,t)})()}get memoryUsage(){let t=0;if(t+=this.vertexAttributes.memoryUsage,null!=this.components)for(const e of this.components)t+=e.memoryUsage;return t}_clearSources(){this.metadata.clearSources()}static createBox(t,e){if(!(t instanceof F.Z))return Y.Z.getLogger(Bt).error(".createBox()",(new _t).message),null;const r=new Ot(se(function _r(){const{faceDescriptions:t,faceVertexOffsets:e,uvScales:r}=Cr,s=4*t.length,c=new Float64Array(3*s),_=new Float32Array(3*s),E=new Float32Array(2*s),D=new Uint32Array(2*t.length*3);let O=0,A=0,U=0,B=0;for(let z=0;z<t.length;z++){const H=t[z],ft=O/3;for(const Dt of e)D[B++]=ft+Dt;const ct=H.corners;for(let Dt=0;Dt<4;Dt++){const jt=ct[Dt];let gt=0;E[U++]=.25*r[Dt][0]+H.uvOrigin[0],E[U++]=H.uvOrigin[1]-.25*r[Dt][1];for(let ut=0;ut<3;ut++)0!==H.axis[ut]?(c[O++]=.5*H.axis[ut],_[A++]=H.axis[ut]):(c[O++]=.5*jt[gt++],_[A++]=0)}}return{position:c,normal:_,uv:E,faces:D}}(),t,e));return e?.imageFace&&"all"!==e.imageFace?function Er(t,e){const r=t.components[0],s=r.faces,c=Rr[e],_=6*c,E=new Array(6),D=new Array(s.length-6);let O=0,A=0;for(let U=0;U<s.length;U++)U>=_&&U<_+6?E[O++]=s[U]:D[A++]=s[U];if(null!=t.vertexAttributes.uv){const U=new Float32Array(t.vertexAttributes.uv),B=4*c*2,z=[0,1,1,1,1,0,0,0];for(let H=0;H<z.length;H++)U[B+H]=z[H];t.vertexAttributes.uv=U}return t.components=[new Z.Z({faces:E,material:r.material}),new Z.Z({faces:D})],t}(r,e.imageFace):r}static createSphere(t,e){return t instanceof F.Z?new Ot(se(function Mr(t=0){const e=Math.round(8*2**t),r=2*e,s=(e-1)*(r+1)+2*r,c=new Float64Array(3*s),_=new Float32Array(3*s),E=new Float32Array(2*s),D=new Uint32Array((e-1)*r*2*3);let O=0,A=0,U=0,B=0;for(let z=0;z<=e;z++){const H=z/e*Math.PI+.5*Math.PI,ft=Math.cos(H),ct=Math.sin(H);ht[2]=ct;const Dt=0===z||z===e,jt=Dt?r-1:r;for(let gt=0;gt<=jt;gt++){const ut=gt/jt*2*Math.PI;ht[0]=-Math.sin(ut)*ft,ht[1]=Math.cos(ut)*ft;for(let Pt=0;Pt<3;Pt++)c[O]=.5*ht[Pt],_[O]=ht[Pt],++O;E[A++]=(gt+(Dt?.5:0))/r,E[A++]=z/e,0!==z&&gt!==r&&(z!==e&&(D[U++]=B,D[U++]=B+1,D[U++]=B-r),1!==z&&(D[U++]=B,D[U++]=B-r,D[U++]=B-r-1)),B++}}return{position:c,normal:_,uv:E,faces:D}}(e?.densificationFactor||0),t,e)):(Y.Z.getLogger(Bt).error(".createSphere()",(new _t).message),null)}static createCylinder(t,e){return t instanceof F.Z?new Ot(se(function Ar(t=0){const r=Math.round(16*2**t),s=4*(r+1)+2*r,c=new Float64Array(3*s),_=new Float32Array(3*s),E=new Float32Array(2*s),D=new Uint32Array(4*r*3);let O=0,A=0,U=0,B=0,z=0;for(let H=0;H<=5;H++){const ft=0===H||5===H,ct=H<=1||H>=4,Dt=2===H||4===H,jt=ft?r-1:r;for(let gt=0;gt<=jt;gt++){const ut=gt/jt*2*Math.PI,Pt=ft?0:.5;ht[0]=Pt*Math.sin(ut),ht[1]=Pt*-Math.cos(ut),ht[2]=H<=2?.5:-.5;for(let Qt=0;Qt<3;Qt++)c[O++]=ht[Qt],_[A++]=ct?2===Qt?H<=1?1:-1:0:2===Qt?0:ht[Qt]/Pt;E[U++]=(gt+(ft?.5:0))/r,E[U++]=H<=1?1*H/3:H<=3?1*(H-2)/3+1/3:1*(H-4)/3+2/3,Dt||0===H||gt===r||(5!==H&&(D[B++]=z,D[B++]=z+1,D[B++]=z-r),1!==H&&(D[B++]=z,D[B++]=z-r,D[B++]=z-r-1)),z++}}return{position:c,normal:_,uv:E,faces:D}}(e?.densificationFactor||0),t,e)):(Y.Z.getLogger(Bt).error(".createCylinder()",(new _t).message),null)}static createPlane(t,e){if(!(t instanceof F.Z))return Y.Z.getLogger(Bt).error(".createPlane()",(new _t).message),null;const r=e?.facing??"up",s=function Tr(t,e){const r="number"==typeof e?e:null!=e?e.width:1,s="number"==typeof e?e:null!=e?e.height:1;switch(t){case"up":case"down":return{width:r,depth:s};case"north":case"south":return{width:r,height:s};case"east":case"west":return{depth:r,height:s}}}(r,e?.size);return new Ot(se(function Dr(t){const e=te.facingAxisOrderSwap[t],r=te.position,s=te.normal,c=new Float64Array(r.length),_=new Float32Array(s.length);let E=0;for(let D=0;D<4;D++){const O=E;for(let A=0;A<3;A++){const U=e[A],B=Math.abs(U)-1,z=U>=0?1:-1;c[E]=r[O+B]*z,_[E]=s[O+B]*z,E++}}return{position:c,normal:_,uv:new Float32Array(te.uv),faces:new Uint32Array(te.faces),isPlane:!0}}(r),t,{...e,size:s}))}static createFromPolygon(t,e){if(!(t instanceof tt.Z))return Y.Z.getLogger(Bt).error(".createFromPolygon()",(new yt).message),null;const r=function Ge(t){const e=function Xe(t,e,r,s){const c=t.length,_=new Array(c),E=new Array(c),D=new Array(c);let O=0,A=0,U=0,B=0;for(let ft=0;ft<c;++ft)B+=t[ft].length;const z=(0,Zt.bg)(3*B);let H=0;for(let ft=c-1;ft>=0;ft--){const ct=t[ft],Dt=r===re.CCW_IS_HOLE&&Ye(ct,e,s);if(Dt&&1!==c)_[O++]=ct;else{let jt=ct.length;for(let ut=0;ut<O;++ut)jt+=_[ut].length;const gt={index:H,pathLengths:new Array(O+1),count:jt,holeIndices:new Array(O)};gt.pathLengths[0]=ct.length,ct.length>0&&(D[U++]={index:H,count:ct.length}),H=Dt?ee(ct,ct.length-1,-1,z,H,ct.length,e):ee(ct,0,1,z,H,ct.length,e);for(let ut=0;ut<O;++ut){const Pt=_[ut];gt.holeIndices[ut]=H,gt.pathLengths[ut+1]=Pt.length,Pt.length>0&&(D[U++]={index:H,count:Pt.length}),H=ee(Pt,0,1,z,H,Pt.length,e)}O=0,gt.count>0&&(E[A++]=gt)}}for(let ft=0;ft<O;++ft){const ct=_[ft];ct.length>0&&(D[U++]={index:H,count:ct.length}),H=ee(ct,0,1,z,H,ct.length,e)}return E.length=A,D.length=U,{position:z,polygons:E,outlines:D}}(t.rings,t.hasZ,re.CCW_IS_HOLE,t.spatialReference),r=new Array;let s=0,c=0;for(const D of e.polygons){const A=D.index,U=(0,Zt.Rq)(e.position,3*A,3*D.count),B=D.holeIndices.map(H=>H-A),z=(0,Kt.mi)((0,bt.e)(U,B,3));r.push({position:U,faces:z}),s+=U.length,c+=z.length}const _=function Je(t,e,r){if(1===t.length)return t[0];const s=(0,Zt.bg)(e),c=new Array(r);let _=0,E=0,D=0;for(const O of t){for(let A=0;A<O.position.length;A++)s[_++]=O.position[A];for(const A of O.faces)c[E++]=A+D;D=_/3}return{position:s,faces:(0,Kt.mi)(c)}}(r,s,c),E=Array.isArray(_.position)?(0,i.d)(_.position,3,{originalIndices:_.faces}):(0,i.d)(_.position.buffer,6,{originalIndices:_.faces});return _.position=(0,Zt.QZ)(new Float64Array(E.buffer)),_.faces=E.indices,_}(t);return new Ot({vertexAttributes:new Tt.Q({position:r.position}),components:[new Z.Z({faces:r.faces,shading:"flat",material:e?.material??null})],spatialReference:t.spatialReference,vertexSpace:new pt.Z})}static createFromGLTF(t,e,r){return(0,et.Z)(function*(){if(!(t instanceof F.Z)){const c=new _t;throw Y.Z.getLogger(Bt).error(".createfromGLTF()",c.message),c}const{loadGLTFMesh:s}=yield(0,L.Hl)(Promise.all([u.e(9327),u.e(3355)]).then(u.bind(u,3355)),r);return new Ot(yield s(t,e,r))})()}static createFromFiles(t,e,r){return(0,et.Z)(function*(){const s=A=>Y.Z.getLogger(Bt).error(".createFromFiles()",A.message);if(!(t instanceof F.Z)){const A=new _t;throw s(A),A}const c=r?.layer;if(!c){const A=new rt;throw s(A),A}const _=yield Ot.extractAndFilterFiles(e,c),E=_.reduce((A,U)=>(0,de.$z)(c.infoFor3D,U)?A+1:A,0);if(0===E){const A=new xt;throw s(A),A}if(E>1){const A=new Ct;throw s(A),A}const D=Ot.createWithExternalSource(t,_),[O]=yield c.uploadAssets([D],r);return O})()}static extractAndFilterFiles(t,e){return(0,et.Z)(function*(){const r=e?.infoFor3D;return r?(yield function Fr(t){return ge.apply(this,arguments)}(t)).filter(s=>(0,de.F7)(r,s)):t})()}static createWithExternalSource(t,e,r){const s=r?.extent??null,{x:c,y:_,z:E,spatialReference:D}=t,O=r?.transform?.clone()??new Et.Z,A=r?.vertexSpace??new Ut.Z({origin:[c,_,E??0]}),U={source:e,extent:s},B=new Wt;return B.externalSources.push(U),new Ot({metadata:B,transform:O,vertexSpace:A,spatialReference:D})}static createIncomplete(t,e){const{x:r,y:s,z:c,spatialReference:_}=t,E=e?.transform?.clone()??new Et.Z,D=e?.vertexSpace??new Ut.Z({origin:[r,s,c??0]}),O=new Ot({transform:E,vertexSpace:D,spatialReference:_});return O.addResolvingPromise(Promise.reject(new G.Z("mesh-incomplete","Mesh resources are not complete"))),O}};(0,V._)([(0,N.Cb)({type:[Z.Z],json:{write:!0}})],At.prototype,"components",void 0),(0,V._)([(0,N.Cb)({nonNullable:!0,types:Kr,constructOnly:!0,json:{write:!0}})],At.prototype,"vertexSpace",void 0),(0,V._)([(0,N.Cb)({type:Et.Z,json:{write:!0}})],At.prototype,"transform",void 0),(0,V._)([(0,N.Cb)({constructOnly:!0})],At.prototype,"metadata",void 0),(0,V._)([(0,N.Cb)()],At.prototype,"hasExtent",null),(0,V._)([(0,N.Cb)()],At.prototype,"_transformedExtent",null),(0,V._)([(0,N.Cb)()],At.prototype,"_untransformedExtent",null),(0,V._)([(0,N.Cb)()],At.prototype,"anchor",null),(0,V._)([(0,N.Cb)()],At.prototype,"origin",null),(0,V._)([(0,N.Cb)({readOnly:!0,json:{read:!1}})],At.prototype,"extent",null),(0,V._)([(0,N.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],At.prototype,"hasZ",void 0),(0,V._)([(0,N.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],At.prototype,"hasM",void 0),(0,V._)([(0,N.Cb)({type:Tt.Q,nonNullable:!0,json:{write:!0}})],At.prototype,"vertexAttributes",void 0),At=Ot=(0,V._)([(0,x.j)(Bt)],At);const ae=(0,K.c)(),ze=(0,C.Ue)(),He=At;var Nr=u(65234),zr=u(17253);const ye=()=>Y.Z.getLogger("esri.rest.support.meshFeatureSet");function Hr(t,e,r){const s=r.features;r.features=[],delete r.geometryType;const c=zr.Z.fromJSON(r);if(c.geometryType="mesh",!r.assetMaps)return c;const _=Ve(e,r.assetMaps),E=t.sourceSpatialReference??Nr.Z.WGS84,D=r.globalIdFieldName,{outFields:O}=t,A=null!=O&&O.length>0?function $r(t){return({attributes:e})=>{if(!e)return{};if(!t)return e;for(const r in e)t.has(r)||delete e[r];return e}}(O.includes("*")?null:new Set(O)):()=>({});for(const U of s){const B=$e(U,D,E,e,_);null!=B&&c.features.push(new S.Z({geometry:B,attributes:A(U)}))}return c}function $e(t,e,r,s,c){const E=c.get(t.attributes[e]);if(null==E)return ye().error("mesh-feature-set:asset-not-found","Service returned a feature which was not found in the asset map",t),null;if(!t.geometry)return ye().error("mesh-feature-set:no-geometry","Service returned a feature without geometry",t),null;const{originPoint:D,originVector:O}=function Vr({attributes:t},e,{transformFieldRoles:r}){const s=t[r.originX],c=t[r.originY],_=t[r.originZ];return{originPoint:new F.Z({x:s,y:c,z:_,spatialReference:e}),originVector:(0,K.f)(s,c,_)}}(t,r,s),A=q.Z.fromJSON(t.geometry);A.spatialReference=r;const U=function Gr(t,{transformFieldRoles:e}){return new Et.Z({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}(t.attributes,s),B=E.projectVertices?new k.Z({origin:O}):new Ut.Z({origin:O}),z=function Jr(t){const e=Array.from(t.files.values()),r=new Array;for(const s of e){if(s.status!==Yt.COMPLETED)return null;const c=new Array;for(const _ of s.parts){if(!_)return null;c.push(new zt.LL(_.url,_.hash))}r.push(new zt.CP(s.name,s.mimeType,c))}return r}(E);return z?He.createWithExternalSource(D,z,{extent:A,transform:U,vertexSpace:B}):He.createIncomplete(D,{extent:A,transform:U,vertexSpace:B})}var Yt;function Ve(t,e){const r=new Map;for(const s of e){const c=s.parentGlobalId;if(null==c)continue;const _=s.assetName,E=s.assetType,D=s.assetHash,O=s.assetURL,A=s.conversionStatus,U=s.seqNo,B=(0,de.d1)(E,t.supportedFormats);if(!B){ye().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${E}, but it does not list it as a supported type`);continue}const z=(0,Q.s1)(r,c,()=>({projectVertices:Yr(s.flags).projectVertices,files:new Map}));(0,Q.s1)(z.files,_,()=>({name:_,type:E,mimeType:B,status:Xr(A),parts:[]})).parts[U]={hash:D,url:O}}return r}function Xr(t){switch(t){case"COMPLETED":case"SUBMITTED":return Yt.COMPLETED;case"INPROGRESS":return Yt.PENDING;default:return Yt.FAILED}}function Yr(t){return{projectVertices:t.includes("PROJECT_VERTICES")}}!function(t){t[t.FAILED=0]="FAILED",t[t.PENDING=1]="PENDING",t[t.COMPLETED=2]="COMPLETED"}(Yt||(Yt={}))}}]);