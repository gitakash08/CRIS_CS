"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[1715],{95324:($,A,p)=>{function j(y){return null!=M(y)||null!=R(y)}function v(y){return C.test(y)}function O(y){return M(y)??R(y)}function R(y){const s=new Date(y);return function S(y,s){if(Number.isNaN(y.getTime()))return!1;let u=!0;if(Z&&/\d+\W*$/.test(s)){const I=s.match(/[a-zA-Z]{2,}/);if(I){let T=!1,h=0;for(;!T&&h<=I.length;)T=!D.test(I[h]),h++;u=!T}}return u}(s,y)?Number.isNaN(s.getTime())?null:s.getTime()-6e4*s.getTimezoneOffset():null}function M(y){const s=C.exec(y);if(!s?.groups)return null;const u=s.groups,I=+u.year,T=+u.month-1,h=+u.day,x=+(u.hours??"0"),W=+(u.minutes??"0"),B=+(u.seconds??"0");if(x>23||W>59||B>59)return null;const L=u.ms??"0",Q=L?+L.padEnd(3,"0").substring(0,3):0;let U;return U=u.isUTC||!u.offsetSign?Date.UTC(I,T,h,x,W,B,Q):6e4*("+"===u.offsetSign?-1:1)*(60*+u.offsetHours+ +u.offsetMinutes)+Date.UTC(I,T,h,x,W,B,Q),Number.isNaN(U)?null:U}p.d(A,{mu:()=>v,of:()=>j,sG:()=>O});const C=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,D=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,Z=!Number.isNaN(new Date("technology 10").getTime())},7728:($,A,p)=>{p.r(A),p.d(A,{default:()=>U});var j=p(15861),v=p(26584),O=p(91179),R=p(37053),M=p(82054),C=p(1476),S=p(81975),D=p(82959),Z=p(60331),y=p(56554),s=p(35775),u=p(60466),I=p(85),T=p(90194),h=p(28302);const x=R.Zn,W={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:R.Zn},B={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function Q(F){return(0,O.wp)(F)?null!=F.m:!!F.hasM}class U{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}load(e){var n=this;return(0,j.Z)(function*(){const a=[],{features:o}=e,d=n._inferLayerProperties(o,e.fields),c=e.fields||[],m=null!=e.hasM?e.hasM:!!d.hasM,_=null!=e.hasZ?e.hasZ:!!d.hasZ,f=!e.spatialReference&&!d.spatialReference,b=f?x:e.spatialReference||d.spatialReference,E=f?W:null,l=e.geometryType||d.geometryType,g=!l;let t=e.objectIdField||d.objectIdField,i=e.timeInfo;const P=new u.Z(c);if(!g&&(f&&a.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!l))throw new v.Z("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!t)throw new v.Z("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(d.objectIdField&&t!==d.objectIdField&&(a.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${t}" doesn't match the field name "${d.objectIdField}", found in the provided fields`}),t=d.objectIdField),t&&!d.objectIdField){const r=P.get(t);r?(t=r.name,r.type="esriFieldTypeOID",r.editable=!1,r.nullable=!1):c.unshift({alias:t,name:t,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const r of c){if(null==r.name&&(r.name=r.alias),null==r.alias&&(r.alias=r.name),!r.name)throw new v.Z("feature-layer:invalid-field-name","field name is missing",{field:r});if(r.name===t&&(r.type="esriFieldTypeOID"),!I.v.jsonValues.includes(r.type))throw new v.Z("feature-layer:invalid-field-type",`invalid type for field "${r.name}"`,{field:r});null==r.length&&(r.length=(0,T.ZR)(r))}const K={};for(const r of c)if("esriFieldTypeOID"!==r.type&&"esriFieldTypeGlobalID"!==r.type){const G=(0,T.os)(r);void 0!==G&&(K[r.name]=G)}if(i){if(i.startTimeField){const r=P.get(i.startTimeField);r?(i.startTimeField=r.name,r.type="esriFieldTypeDate"):i.startTimeField=null}if(i.endTimeField){const r=P.get(i.endTimeField);r?(i.endTimeField=r.name,r.type="esriFieldTypeDate"):i.endTimeField=null}if(i.trackIdField){const r=P.get(i.trackIdField);r?i.trackIdField=r.name:(i.trackIdField=null,a.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:i}}))}i.startTimeField||i.endTimeField||(a.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:i}}),i=null)}const N=P.dateFields.length?{timeZoneIANA:e.dateFieldsTimeZone??h.pt}:null;n._createDefaultAttributes=(0,y.Dm)(K,t);const q={warnings:a,featureErrors:[],layerDefinition:{...B,drawingInfo:(0,y.bU)(l),templates:(0,y.Hq)(K),extent:E,geometryType:l,objectIdField:t,fields:c,hasZ:_,hasM:m,timeInfo:i,dateFieldsTimeReference:N},assignedObjectIds:{}};if(n._queryEngine=new Z.q({fieldsIndex:u.Z.fromLayerJSON({fields:c,timeInfo:i,dateFieldsTimeReference:N}),geometryType:l,hasM:m,hasZ:_,objectIdField:t,spatialReference:b,featureStore:new S.Z({geometryType:l,hasM:m,hasZ:_}),timeInfo:i,cacheSpatialQueries:!0}),!o?.length)return n._nextObjectId=C.X,q;const w=(0,C.S)(t,o);return n._nextObjectId=w+1,yield(0,D._W)(o,b),n._loadInitialFeatures(q,o)})()}applyEdits(e){var n=this;return(0,j.Z)(function*(){const{spatialReference:a,geometryType:o}=n._queryEngine;return yield Promise.all([(0,s.b)(a,o),(0,D._W)(e.adds,a),(0,D._W)(e.updates,a)]),n._applyEdits(e)})()}queryFeatures(e,n={}){return this._queryEngine.executeQuery(e,n.signal)}queryFeatureCount(e,n={}){return this._queryEngine.executeQueryForCount(e,n.signal)}queryObjectIds(e,n={}){return this._queryEngine.executeQueryForIds(e,n.signal)}queryExtent(e,n={}){return this._queryEngine.executeQueryForExtent(e,n.signal)}querySnapping(e,n={}){return this._queryEngine.executeQueryForSnapping(e,n.signal)}_inferLayerProperties(e,n){let a,o,d=null,c=null,m=null;for(const _ of e){const f=_.geometry;if(null!=f&&(d||(d=(0,O.Ji)(f)),c||(c=f.spatialReference),null==a&&(a=(0,O.wp)(F=f)?null!=F.z:!!F.hasZ),null==o&&(o=Q(f)),d&&c&&null!=a&&null!=o))break}var F;if(n&&n.length){let _=null;n.some(f=>{const b="esriFieldTypeOID"===f.type,E=!f.type&&f.name&&"objectid"===f.name.toLowerCase();return _=f,b||E})&&(m=_.name)}return{geometryType:d,spatialReference:c,objectIdField:m,hasM:o,hasZ:a}}_loadInitialFeatures(e,n){var a=this;return(0,j.Z)(function*(){const{geometryType:o,hasM:d,hasZ:c,objectIdField:m,spatialReference:_,featureStore:f,fieldsIndex:b}=a._queryEngine,E=[];for(const t of n){if(null!=t.uid&&(e.assignedObjectIds[t.uid]=-1),t.geometry&&o!==(0,O.Ji)(t.geometry)){e.featureErrors.push((0,s.av)("Incorrect geometry type."));continue}const i=a._createDefaultAttributes(),P=(0,s.O0)(b,i,t.attributes,!0);P?e.featureErrors.push(P):(a._assignObjectId(i,t.attributes,!0),t.attributes=i,null!=t.uid&&(e.assignedObjectIds[t.uid]=t.attributes[m]),null!=t.geometry&&(t.geometry=(0,D.iV)(t.geometry,t.geometry.spatialReference,_)),E.push(t))}f.addMany((0,M.Yn)([],E,o,c,d,m));const{fullExtent:l,timeExtent:g}=yield a._queryEngine.fetchRecomputedExtents();if(e.layerDefinition.extent=l,g){const{start:t,end:i}=g;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e})()}_applyEdits(e){var n=this;return(0,j.Z)(function*(){const{adds:a,updates:o,deletes:d}=e,c={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(a?.length&&n._applyAddEdits(c,a),o?.length&&n._applyUpdateEdits(c,o),d?.length){for(const f of d)c.deleteResults.push((0,s.d1)(f));n._queryEngine.featureStore.removeManyById(d)}const{fullExtent:m,timeExtent:_}=yield n._queryEngine.fetchRecomputedExtents();return{extent:m,timeExtent:_,featureEditResults:c}})()}_applyAddEdits(e,n){const{addResults:a}=e,{geometryType:o,hasM:d,hasZ:c,objectIdField:m,spatialReference:_,featureStore:f,fieldsIndex:b}=this._queryEngine,E=[];for(const l of n){if(l.geometry&&o!==(0,O.Ji)(l.geometry)){a.push((0,s.av)("Incorrect geometry type."));continue}const g=this._createDefaultAttributes(),t=(0,s.O0)(b,g,l.attributes);if(t)a.push(t);else{if(this._assignObjectId(g,l.attributes),l.attributes=g,null!=l.uid&&(e.uidToObjectId[l.uid]=l.attributes[m]),null!=l.geometry){const i=l.geometry.spatialReference??_;l.geometry=(0,D.iV)((0,s.og)(l.geometry,i),i,_)}E.push(l),a.push((0,s.d1)(l.attributes[m]))}}f.addMany((0,M.Yn)([],E,o,c,d,m))}_applyUpdateEdits({updateResults:e},n){const{geometryType:a,hasM:o,hasZ:d,objectIdField:c,spatialReference:m,featureStore:_,fieldsIndex:f}=this._queryEngine;for(const b of n){const{attributes:E,geometry:l}=b,g=E?.[c];if(null==g){e.push((0,s.av)(`Identifier field ${c} missing`));continue}if(!_.has(g)){e.push((0,s.av)(`Feature with object id ${g} missing`));continue}const t=(0,M.EI)(_.getFeature(g),a,d,o);if(null!=l){if(a!==(0,O.Ji)(l)){e.push((0,s.av)("Incorrect geometry type."));continue}const i=l.spatialReference??m;t.geometry=(0,D.iV)((0,s.og)(l,i),i,m)}if(E){const i=(0,s.O0)(f,t.attributes,E);if(i){e.push(i);continue}}_.add((0,M.XA)(t,a,d,o,c)),e.push((0,s.d1)(g))}}_assignObjectId(e,n,a=!1){const o=this._queryEngine.objectIdField;e[o]=a&&n&&isFinite(n[o])?n[o]:this._nextObjectId++}}},56554:($,A,p)=>{p.d(A,{Dm:()=>D,Hq:()=>Z,MS:()=>y,bU:()=>M});var j=p(8314),v=p(58817),O=p(87757),R=p(24837);function M(s){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===s||"esriGeometryMultipoint"===s?R.I4:"esriGeometryPolyline"===s?R.ET:R.lF}}}const C=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let S=1;function D(s,u){if((0,j.Z)("esri-csp-restrictions"))return()=>({[u]:null,...s});try{let I=`this.${u} = null;`;for(const h in s)I+=`this${C.test(h)?`.${h}`:`["${h}"]`} = ${JSON.stringify(s[h])};`;const T=new Function(`\n      return class AttributesClass$${S++} {\n        constructor() {\n          ${I};\n        }\n      }\n    `)();return()=>new T}catch{return()=>({[u]:null,...s})}}function Z(s={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,v.d9)(s)}}]}function y(s,u){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:s},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:u,supportsDelete:u,supportsEditing:u,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:u,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:O.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:u,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}}}]);