"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[5039],{35039:(gn,ge,h)=>{h.r(ge),h.d(ge,{executeScript:()=>yn,extend:()=>Ce,functionHelper:()=>hn});var d=h(15861),Me=h(78778),me=h(9288),v=h(6729),o=h(25919),_e=h(42275),m=h(7652),a=h(47562),Ze=h(19927),Ae=h(67525),Oe=h(84228),Fe=h(35879),E=h(24499),Pe=h(53840),De=h(97536),Be=h(31975),xe=h(21674),we=h(65234);function ve(n){return n&&"function"==typeof n.then}const I=100;function R(n,e){return C.apply(this,arguments)}function C(){return(C=(0,d.Z)(function*(n,e){const r=[];for(let t=0;t<e.arguments.length;t++)r.push(yield s(n,e.arguments[t]));return r})).apply(this,arguments)}function x(n,e,r){return M.apply(this,arguments)}function M(){return(M=(0,d.Z)(function*(n,e,r){return!0===e.preparsed?r(n,null,e.arguments):r(n,e,yield R(n,e))})).apply(this,arguments)}class Le extends m.Rm{constructor(e,r){super(),this.definition=null,this.context=null,this.definition=e,this.context=r}createFunction(e){return(...r)=>{const t={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(t.depthCounter.depth>64)throw new o.aV(e,o.rH.MaximumCallDepth,null);return de(this.definition,t,r,null)}}call(e,r){return S(e,r,(t,i,l)=>{const u={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(u.depthCounter.depth>64)throw new o.aV(e,o.rH.MaximumCallDepth,r);return de(this.definition,u,l,r)})}marshalledCall(e,r,t,i){var l=this;return i(e,r,function(){var u=(0,d.Z)(function*(c,f,p){const g={spatialReference:e.spatialReference,globalScope:t.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return p=p.map(w=>!(0,a.i)(w)||w instanceof m.Vg?w:(0,m.aq)(w,e,i)),(0,m.aq)(yield de(l.definition,g,p,r),t,i)});return function(c,f,p){return u.apply(this,arguments)}}())}}class b extends Me.P{constructor(e){super(e)}global(e){var r=this;return(0,d.Z)(function*(){const t=r.executingContext.globalScope[e.toLowerCase()];if(t.valueset||(t.value=yield s(r.executingContext,t.node),t.valueset=!0),(0,a.i)(t.value)&&!(t.value instanceof m.Vg)){const i=new m.Vg;i.fn=t.value,i.parameterEvaluator=S,i.context=r.executingContext,t.value=i}return t.value})()}setGlobal(e,r){if((0,a.i)(r))throw new o.aV(null,o.rH.AssignModuleFunction,null);this.executingContext.globalScope[e.toLowerCase()]={value:r,valueset:!0,node:null}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=e.toLowerCase()),void 0!==this.executingContext.exports[e]}loadModule(e){var r=this;return(0,d.Z)(function*(){let t=e.spatialReference;null==t&&(t=new we.Z({wkid:102100})),r.moduleScope=Ee({},e.customfunctions,e.timeZone),r.executingContext={spatialReference:t,services:e.services,libraryResolver:new me.s(e.libraryResolver._moduleSingletons,r.source.syntax.loadedModules),exports:{},abortSignal:null==e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:r.moduleScope,console:e.console??Re,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},yield s(r.executingContext,r.source.syntax)})()}}function S(n,e,r){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(n,e,r){if(!0===e.preparsed){const i=r(n,null,e.arguments);return ve(i),i}const t=r(n,e,yield R(n,e));return ve(t),t})).apply(this,arguments)}function s(n,e,r){return A.apply(this,arguments)}function A(){return A=(0,d.Z)(function*(n,e,r){if(e.breakpoint&&!0!==r)return yield e.breakpoint(),s(n,e,!0);try{switch(e?.type){case"VariableDeclarator":return yield function rn(n,e){return ee.apply(this,arguments)}(n,e);case"ImportDeclaration":return yield function en(n,e){return X.apply(this,arguments)}(n,e);case"ExportNamedDeclaration":return yield function nn(n,e){return $.apply(this,arguments)}(n,e);case"VariableDeclaration":return yield Ve(n,e,0);case"BlockStatement":case"Program":return yield function Xe(n,e){return z.apply(this,arguments)}(n,e);case"FunctionDeclaration":return yield function qe(n,e){return Q.apply(this,arguments)}(n,e);case"ReturnStatement":return yield function $e(n,e){return J.apply(this,arguments)}(n,e);case"IfStatement":return yield function Qe(n,e){return G.apply(this,arguments)}(n,e);case"ExpressionStatement":return yield function Je(n,e){return k.apply(this,arguments)}(n,e);case"UpdateExpression":return yield function ze(n,e){return U.apply(this,arguments)}(n,e);case"AssignmentExpression":return yield function Ye(n,e){return W.apply(this,arguments)}(n,e);case"ForStatement":return yield function Ue(n,e){try{return null!==e.init?s(n,e.init).then(()=>new Promise((r,t)=>{H(n,e,{testResult:!0,lastAction:a.x},i=>{r(i)},i=>{t(i)},0)})):new Promise((r,t)=>{H(n,e,{testResult:!0,lastAction:a.x},i=>{r(i)},i=>{t(i)},0)})}catch(r){return Promise.reject(r)}}(n,e);case"WhileStatement":return yield function Te(n,e){return P.apply(this,arguments)}(n,e);case"ForInStatement":return yield function Ge(n,e){return N.apply(this,arguments)}(n,e);case"BreakStatement":return a.y;case"EmptyStatement":return a.x;case"ContinueStatement":return a.z;case"TemplateElement":return yield function cn(n,e){return se.apply(this,arguments)}(n,e);case"TemplateLiteral":return yield function pn(n,e){return ce.apply(this,arguments)}(n,e);case"Identifier":return yield ie(n,e);case"MemberExpression":return yield function tn(n,e){return ne.apply(this,arguments)}(n,e);case"Literal":return e.value;case"CallExpression":return yield function sn(n,e){return ue.apply(this,arguments)}(n,e);case"UnaryExpression":return yield function on(n,e){return re.apply(this,arguments)}(n,e);case"BinaryExpression":return yield function ln(n,e){return oe.apply(this,arguments)}(n,e);case"LogicalExpression":return yield function un(n,e){return ae.apply(this,arguments)}(n,e);case"ArrayExpression":return yield function an(n,e){return te.apply(this,arguments)}(n,e);case"ObjectExpression":return yield function je(n,e){return O.apply(this,arguments)}(n,e);case"Property":return yield function Ke(n,e){return F.apply(this,arguments)}(n,e);default:throw new o.aV(n,o.rH.Unrecognized,e)}}catch(t){throw(0,o.VO)(n,e,t)}}),A.apply(this,arguments)}function O(){return(O=(0,d.Z)(function*(n,e){const r=[];for(let u=0;u<e.properties.length;u++)r[u]=yield s(n,e.properties[u]);const t={},i=new Map;for(let u=0;u<r.length;u++){const c=r[u];if((0,a.i)(c.value))throw new o.aV(n,o.rH.NoFunctionInDictionary,e);if(!1===(0,a.c)(c.key))throw new o.aV(n,o.rH.KeyMustBeString,e);let f=c.key.toString();const p=f.toLowerCase();i.has(p)?f=i.get(p):i.set(p,f),t[f]=c.value===a.x?null:c.value}const l=new v.Z(t);return l.immutable=!1,l})).apply(this,arguments)}function F(){return(F=(0,d.Z)(function*(n,e){const r=yield s(n,e.value);return"Identifier"===e.key.type?{key:e.key.name,value:r}:{key:yield s(n,e.key),value:r}})).apply(this,arguments)}function P(){return(P=(0,d.Z)(function*(n,e){const r={testResult:!0,lastAction:a.x};if(r.testResult=yield s(n,e.test),!1===r.testResult)return a.x;if(!0!==r.testResult)throw new o.aV(n,o.rH.BooleanConditionRequired,e);for(;!0===r.testResult&&(r.lastAction=yield s(n,e.body),r.lastAction!==a.y)&&!(r.lastAction instanceof a.R);)if(r.testResult=yield s(n,e.test),!0!==r.testResult&&!1!==r.testResult)throw new o.aV(n,o.rH.BooleanConditionRequired,e);return r.lastAction instanceof a.R?r.lastAction:a.x})).apply(this,arguments)}function be(n,e,r){return D.apply(this,arguments)}function D(){return(D=(0,d.Z)(function*(n,e,r){const t=yield s(n,e.body);return r.lastAction=t,r.lastAction===a.y||r.lastAction instanceof a.R?(r.testResult=!1,r):(null!==e.update&&(yield s(n,e.update)),r)})).apply(this,arguments)}function B(){return(B=(0,d.Z)(function*(n,e,r){if(null!==e.test){const t=yield s(n,e.test);if(!0===n.abortSignal?.aborted)throw new o.aV(n,o.rH.Cancelled,e);if(r.testResult=t,!1===r.testResult)return r;if(!0!==r.testResult)throw new o.aV(n,o.rH.BooleanConditionRequired,e);return be(n,e,r)}return be(n,e,r)})).apply(this,arguments)}function H(n,e,r,t,i,l){try{(function Ne(n,e,r){return B.apply(this,arguments)})(n,e,r).then(()=>{try{!0===r.testResult?++l>I?(l=0,setTimeout(()=>{H(n,e,r,t,i,l)},0)):H(n,e,r,t,i,l):t(r.lastAction instanceof a.R?r.lastAction:a.x)}catch(u){i(u)}},u=>{i(u)})}catch(u){i(u)}}function L(n,e,r,t,i,l,u,c,f,p){try{if(t<=l)return void c(a.x);i.value="k"===u?r[l]:l,s(n,e.body).then(g=>{try{g instanceof a.R?c(g):g===a.y?c(a.x):++p>I?(p=0,setTimeout(()=>{L(n,e,r,t,i,l+1,u,c,f,p)},0)):L(n,e,r,t,i,l+1,u,c,f,p)}catch(w){f(w)}},g=>{f(g)})}catch(g){f(g)}}function j(n,e,r,t,i,l,u,c,f){try{if(r.length()<=i)return void u(a.x);t.value="k"===l?r.get(i):i,s(n,e.body).then(p=>{p instanceof a.R?u(p):p===a.y?u(a.x):++f>I?(f=0,setTimeout(()=>{j(n,e,r,t,i+1,l,u,c,f)},0)):j(n,e,r,t,i+1,l,u,c,f)},p=>{c(p)})}catch(p){c(p)}}function K(n,e,r,t,i,l){try{if(void 0===l&&(l="i"),0===r.length)return void t.resolve(a.x);L(n,e,r,r.length,i,0,l,u=>{t.resolve(u)},u=>{t.reject(u)},0)}catch(u){t.reject(u)}}function We(n,e,r,t,i,l){try{if(void 0===l&&(l="i"),0===r.length)return void t.resolve(a.x);j(n,e,r,i,0,l,u=>{t.resolve(u)},u=>{t.reject(u)},0)}catch(u){t.reject(u)}}function T(n,e,r,t,i,l,u,c){try{n.next().then(f=>{try{if(null===f)l(a.x);else{const p=_e.Z.createFromGraphicLikeObject(f.geometry,f.attributes,t,e.timeZone);p._underlyingGraphic=f,i.value=p,s(e,r.body).then(g=>{try{g===a.y?l(a.x):g instanceof a.R?l(g):++c>I?(c=0,setTimeout(()=>{T(n,e,r,t,i,l,u,c)},0)):T(n,e,r,t,i,l,u,c)}catch(w){u(w)}},g=>{u(g)})}}catch(p){u(p)}},f=>{u(f)})}catch(f){u(f)}}function N(){return(N=(0,d.Z)(function*(n,e){return new Promise((r,t)=>{s(n,e.right).then(i=>{try{let l=null;l="VariableDeclaration"===e.left.type?s(n,e.left):Promise.resolve(),l.then(()=>{try{let u="";if("VariableDeclaration"===e.left.type){const f=e.left.declarations[0].id;"Identifier"===f.type&&(u=f.name)}else"Identifier"===e.left.type&&(u=e.left.name);if(!u)throw new o.aV(n,o.rH.InvalidIdentifier,e);u=u.toLowerCase();let c=null;if(null!=n.localScope&&void 0!==n.localScope[u]&&(c=n.localScope[u]),null===c&&void 0!==n.globalScope[u]&&(c=n.globalScope[u]),null===c)return void t(new o.aV(n,o.rH.InvalidIdentifier,e));(0,a.o)(i)||(0,a.c)(i)?K(n,e,i,{reject:t,resolve:r},c):(0,a.q)(i)?We(n,e,i,{reject:t,resolve:r},c):i instanceof v.Z||(0,a.r)(i)?function ke(n,e,r,t,i){try{K(n,e,r.keys(),t,i,"k")}catch(l){t.reject(l)}}(n,e,i,{reject:t,resolve:r},c):(0,a.u)(i)?T(i.iterator(n.abortSignal),n,e,i,c,f=>{r(f)},f=>{t(f)},0):K(n,e,[],{reject:t,resolve:r},c)}catch(u){t(u)}},t)}catch(l){t(l)}},t)})})).apply(this,arguments)}function U(){return(U=(0,d.Z)(function*(n,e){const r=e.argument;if("MemberExpression"===r.type){const l={t:null},u=yield s(n,r.object);let c=null;l.t=u,!0===r.computed?c=yield s(n,r.property):"Identifier"===r.property.type&&(c=r.property.name);const f=l.t;let p;if((0,a.o)(f)){if(!(0,a.b)(c))throw new o.aV(n,o.rH.ArrayAccessorMustBeNumber,e);if(c<0&&(c=f.length+c),c<0||c>=f.length)throw new o.aV(n,o.rH.OutOfBounds,e);p=(0,a.g)(f[c]),f[c]="++"===e.operator?p+1:p-1}else if(f instanceof v.Z){if(!1===(0,a.c)(c))throw new o.aV(n,o.rH.KeyAccessorMustBeString,e);if(!0!==f.hasField(c))throw new o.aV(n,o.rH.FieldNotFound,e,{key:c});p=(0,a.g)(f.field(c)),f.setField(c,"++"===e.operator?p+1:p-1)}else if(f instanceof b){if(!1===(0,a.c)(c))throw new o.aV(n,o.rH.ModuleAccessorMustBeString,e);if(!0!==f.hasGlobal(c))throw new o.aV(n,o.rH.ModuleExportNotFound,e);p=(0,a.g)(yield f.global(c)),f.setGlobal(c,"++"===e.operator?p+1:p-1)}else{if(!(0,a.r)(f))throw(0,a.q)(f)?new o.aV(n,o.rH.Immutable,e):new o.aV(n,o.rH.InvalidParameter,e);if(!1===(0,a.c)(c))throw new o.aV(n,o.rH.KeyAccessorMustBeString,e);if(!0!==f.hasField(c))throw new o.aV(n,o.rH.FieldNotFound,e,{key:c});p=(0,a.g)(f.field(c)),f.setField(c,"++"===e.operator?p+1:p-1)}return!1===e.prefix?p:"++"===e.operator?p+1:p-1}const t="Identifier"===e.argument.type?e.argument.name.toLowerCase():"";if(!t)throw new o.aV(n,o.rH.InvalidIdentifier,e);let i;if(null!=n.localScope&&void 0!==n.localScope[t])return i=(0,a.g)(n.localScope[t].value),n.localScope[t]={value:"++"===e.operator?i+1:i-1,valueset:!0,node:e},!1===e.prefix?i:"++"===e.operator?i+1:i-1;if(void 0!==n.globalScope[t])return i=(0,a.g)(n.globalScope[t].value),n.globalScope[t]={value:"++"===e.operator?i+1:i-1,valueset:!0,node:e},!1===e.prefix?i:"++"===e.operator?i+1:i-1;throw new o.aV(n,o.rH.InvalidIdentifier,e)})).apply(this,arguments)}function _(n,e,r,t,i){switch(e){case"=":return n===a.x?null:n;case"/=":return(0,a.g)(r)/(0,a.g)(n);case"*=":return(0,a.g)(r)*(0,a.g)(n);case"-=":return(0,a.g)(r)-(0,a.g)(n);case"+=":return(0,a.c)(r)||(0,a.c)(n)?(0,a.j)(r)+(0,a.j)(n):(0,a.g)(r)+(0,a.g)(n);case"%=":return(0,a.g)(r)%(0,a.g)(n);default:throw new o.aV(i,o.rH.UnsupportedOperator,t)}}function W(){return(W=(0,d.Z)(function*(n,e){const r=e.left;if("MemberExpression"===r.type){const i=yield s(n,r.object);let l=null;if(!0===r.computed)l=yield s(n,r.property);else{if("Identifier"!==r.property.type)throw new o.aV(n,o.rH.InvalidIdentifier,e);l=r.property.name}const u=yield s(n,e.right);if((0,a.o)(i)){if(!(0,a.b)(l))throw new o.aV(n,o.rH.ArrayAccessorMustBeNumber,e);if(l<0&&(l=i.length+l),l<0||l>i.length)throw new o.aV(n,o.rH.OutOfBounds,e);if(l===i.length){if("="!==e.operator)throw new o.aV(n,o.rH.OutOfBounds,e);i[l]=_(u,e.operator,i[l],e,n)}else i[l]=_(u,e.operator,i[l],e,n)}else if(i instanceof v.Z){if(!1===(0,a.c)(l))throw new o.aV(n,o.rH.KeyAccessorMustBeString,e);if(!0===i.hasField(l))i.setField(l,_(u,e.operator,i.field(l),e,n));else{if("="!==e.operator)throw new o.aV(n,o.rH.FieldNotFound,e,{key:l});i.setField(l,_(u,e.operator,null,e,n))}}else if(i instanceof b){if(!1===(0,a.c)(l))throw new o.aV(n,o.rH.KeyAccessorMustBeString,e);if(!0!==i.hasGlobal(l))throw new o.aV(n,o.rH.ModuleExportNotFound,e);i.setGlobal(l,_(u,e.operator,yield i.global(l),e,n))}else{if(!(0,a.r)(i))throw(0,a.q)(i)?new o.aV(n,o.rH.Immutable,e):new o.aV(n,o.rH.InvalidParameter,e);if(!1===(0,a.c)(l))throw new o.aV(n,o.rH.KeyAccessorMustBeString,e);if(!0===i.hasField(l))i.setField(l,_(u,e.operator,i.field(l),e,n));else{if("="!==e.operator)throw new o.aV(n,o.rH.FieldNotFound,e,{key:l});i.setField(l,_(u,e.operator,null,e,n))}}return a.x}const t=r.name.toLowerCase();if(null!=n.localScope&&void 0!==n.localScope[t]){const i=yield s(n,e.right);return n.localScope[t]={value:_(i,e.operator,n.localScope[t].value,e,n),valueset:!0,node:e.right},a.x}if(void 0!==n.globalScope[t]){const i=yield s(n,e.right);return n.globalScope[t]={value:_(i,e.operator,n.globalScope[t].value,e,n),valueset:!0,node:e.right},a.x}throw new o.aV(n,o.rH.InvalidIdentifier,e)})).apply(this,arguments)}function k(){return(k=(0,d.Z)(function*(n,e){if("AssignmentExpression"===e.expression.type)return s(n,e.expression);if("CallExpression"===e.expression.type){const t=yield s(n,e.expression);return t===a.x?a.x:new a.I(t)}const r=yield s(n,e.expression);return r===a.x?a.x:new a.I(r)})).apply(this,arguments)}function G(){return(G=(0,d.Z)(function*(n,e){const r=yield s(n,e.test);if(!0===r)return s(n,e.consequent);if(!1===r)return null!==e.alternate?s(n,e.alternate):a.x;throw new o.aV(n,o.rH.BooleanConditionRequired,e)})).apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(n,e){return Se(n,e,0)})).apply(this,arguments)}function Se(n,e,r){return Y.apply(this,arguments)}function Y(){return(Y=(0,d.Z)(function*(n,e,r){if(r>=e.body.length)return a.x;const t=yield s(n,e.body[r]);return t instanceof a.R||t===a.y||t===a.z||r===e.body.length-1?t:Se(n,e,r+1)})).apply(this,arguments)}function J(){return(J=(0,d.Z)(function*(n,e){if(null===e.argument)return new a.R(a.x);const r=yield s(n,e.argument);return new a.R(r)})).apply(this,arguments)}function Q(){return(Q=(0,d.Z)(function*(n,e){const r=e.id.name.toLowerCase();return n.globalScope[r]={valueset:!0,node:null,value:new Le(e,n)},a.x})).apply(this,arguments)}function X(){return(X=(0,d.Z)(function*(n,e){const r=e.specifiers[0].local.name.toLowerCase(),t=n.libraryResolver.loadLibrary(r);let i=null;return n.libraryResolver._moduleSingletons?.has(t.uri)?i=n.libraryResolver._moduleSingletons.get(t.uri):(i=new b(t),yield i.loadModule(n),n.libraryResolver._moduleSingletons?.set(t.uri,i)),n.globalScope[r]={value:i,valueset:!0,node:e},a.x})).apply(this,arguments)}function $(){return($=(0,d.Z)(function*(n,e){if(yield s(n,e.declaration),"FunctionDeclaration"===e.declaration.type)n.exports[e.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===e.declaration.type)for(const r of e.declaration.declarations)n.exports[r.id.name.toLowerCase()]="variable";return a.x})).apply(this,arguments)}function Ve(n,e,r){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(n,e,r){return r>=e.declarations.length||(yield s(n,e.declarations[r]),r===e.declarations.length-1||(yield Ve(n,e,r+1))),a.x})).apply(this,arguments)}function ee(){return(ee=(0,d.Z)(function*(n,e){let r=null;if(r=null===e.init?null:yield s(n,e.init),null!==n.localScope){if(r===a.x&&(r=null),"Identifier"!==e.id.type)throw new o.aV(n,o.rH.InvalidIdentifier,e);const i=e.id.name.toLowerCase();return null!=n.localScope&&(n.localScope[i]={value:r,valueset:!0,node:e.init}),a.x}if("Identifier"!==e.id.type)throw new o.aV(n,o.rH.InvalidIdentifier,e);const t=e.id.name.toLowerCase();return r===a.x&&(r=null),n.globalScope[t]={value:r,valueset:!0,node:e.init},a.x})).apply(this,arguments)}function ne(){return(ne=(0,d.Z)(function*(n,e){const r=yield s(n,e.object);if(null===r)throw new o.aV(n,o.rH.MemberOfNull,e);if(!1===e.computed){if("Identifier"===e.property.type){if(r instanceof v.Z||(0,a.r)(r))return r.field(e.property.name);if(r instanceof xe.Z)return(0,E.Z)(r,e.property.name,n,e);if(r instanceof b){if(!r.hasGlobal(e.property.name))throw new o.aV(n,o.rH.InvalidIdentifier,e);return r.global(e.property.name)}throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}let t=yield s(n,e.property);if(r instanceof v.Z||(0,a.r)(r)){if((0,a.c)(t))return r.field(t);throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}if(r instanceof b){if((0,a.c)(t))return r.global(t);throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}if(r instanceof xe.Z){if((0,a.c)(t))return(0,E.Z)(r,t,n,e);throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}if((0,a.o)(r)){if((0,a.b)(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=r.length+t),t>=r.length||t<0)throw new o.aV(n,o.rH.OutOfBounds,e);return r[t]}throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}if((0,a.q)(r)){if((0,a.b)(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=r.length()+t),t>=r.length()||t<0)throw new o.aV(n,o.rH.OutOfBounds,e);return r.get(t)}throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}if((0,a.c)(r)){if((0,a.b)(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=r.length+t),t>=r.length||t<0)throw new o.aV(n,o.rH.OutOfBounds,e);return r[t]}throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)}throw new o.aV(n,o.rH.InvalidMemberAccessKey,e)})).apply(this,arguments)}function re(){return(re=(0,d.Z)(function*(n,e){const r=yield s(n,e.argument);if((0,a.a)(r)){if("!"===e.operator)return!r;if("-"===e.operator)return-1*(0,a.g)(r);if("+"===e.operator)return 1*(0,a.g)(r);if("~"===e.operator)return~(0,a.g)(r);throw new o.aV(n,o.rH.UnsupportedUnaryOperator,e)}if("-"===e.operator)return-1*(0,a.g)(r);if("+"===e.operator)return 1*(0,a.g)(r);if("~"===e.operator)return~(0,a.g)(r);throw new o.aV(n,o.rH.UnsupportedUnaryOperator,e)})).apply(this,arguments)}function te(){return(te=(0,d.Z)(function*(n,e){const r=[];for(let t=0;t<e.elements.length;t++)r.push(yield s(n,e.elements[t]));for(let t=0;t<r.length;t++){if((0,a.i)(r[t]))throw new o.aV(n,o.rH.NoFunctionInArray,e);r[t]===a.x&&(r[t]=null)}return r})).apply(this,arguments)}function oe(){return(oe=(0,d.Z)(function*(n,e){const r=[];r[0]=yield s(n,e.left),r[1]=yield s(n,e.right);const t=r[0],i=r[1];switch(e.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,a.D)((0,a.g)(t),(0,a.g)(i),e.operator);case"==":return(0,a.C)(t,i);case"!=":return!(0,a.C)(t,i);case"<":case">":case"<=":case">=":return(0,a.B)(t,i,e.operator);case"+":return(0,a.c)(t)||(0,a.c)(i)?(0,a.j)(t)+(0,a.j)(i):(0,a.g)(t)+(0,a.g)(i);case"-":return(0,a.g)(t)-(0,a.g)(i);case"*":return(0,a.g)(t)*(0,a.g)(i);case"/":return(0,a.g)(t)/(0,a.g)(i);case"%":return(0,a.g)(t)%(0,a.g)(i);default:throw new o.aV(n,o.rH.UnsupportedOperator,e)}})).apply(this,arguments)}function ae(){return(ae=(0,d.Z)(function*(n,e){const r=yield s(n,e.left);let t=null;if(!(0,a.a)(r))throw new o.aV(n,o.rH.LogicalExpressionOnlyBoolean,e);switch(e.operator){case"||":if(!0===r)return r;if(t=yield s(n,e.right),(0,a.a)(t))return t;throw new o.aV(n,o.rH.LogicExpressionOrAnd,e);case"&&":if(!1===r)return r;if(t=yield s(n,e.right),(0,a.a)(t))return t;throw new o.aV(n,o.rH.LogicExpressionOrAnd,e);default:throw new o.aV(n,o.rH.LogicExpressionOrAnd,e)}})).apply(this,arguments)}function ie(n,e){return le.apply(this,arguments)}function le(){return(le=(0,d.Z)(function*(n,e){const r=e.name.toLowerCase();if(null!=n.localScope&&void 0!==n.localScope[r]){const t=n.localScope[r];if(!0===t.valueset)return t.value;if(null!==t.d)return t.d;t.d=s(n,t.node);const i=yield t.d;return t.value=i,t.valueset=!0,i}if(void 0!==n.globalScope[r]){const t=n.globalScope[r];if(!0===t.valueset)return t.value;if(null!==t.d)return t.d;t.d=s(n,t.node);const i=yield t.d;return t.value=i,t.valueset=!0,i}throw new o.aV(n,o.rH.InvalidIdentifier,e)})).apply(this,arguments)}function ue(){return(ue=(0,d.Z)(function*(n,e){if("MemberExpression"===e.callee.type){const r=yield s(n,e.callee.object);if(!(r instanceof b))throw new o.aV(n,o.rH.FunctionNotFound,e);const t=!1===e.callee.computed?e.callee.property.name:yield s(n,e.callee.property);if(!r.hasGlobal(t))throw new o.aV(n,o.rH.FunctionNotFound,e);const i=yield r.global(t);if(!(0,a.i)(i))throw new o.aV(n,o.rH.CallNonFunction,e);return i.call(n,e)}if("Identifier"!==e.callee.type)throw new o.aV(n,o.rH.FunctionNotFound,e);if(null!=n.localScope&&void 0!==n.localScope[e.callee.name.toLowerCase()]){const r=n.localScope[e.callee.name.toLowerCase()];if((0,a.i)(r.value))return r.value.call(n,e);throw new o.aV(n,o.rH.CallNonFunction,e)}if(void 0!==n.globalScope[e.callee.name.toLowerCase()]){const r=n.globalScope[e.callee.name.toLowerCase()];if((0,a.i)(r.value))return r.value.call(n,e);throw new o.aV(n,o.rH.CallNonFunction,e)}throw new o.aV(n,o.rH.FunctionNotFound,e)})).apply(this,arguments)}function se(){return(se=(0,d.Z)(function*(n,e){return e.value?e.value.cooked:""})).apply(this,arguments)}function fn(n,e,r){if((0,a.i)(n))throw new o.aV(e,o.rH.NoFunctionInTemplateLiteral,r);return n}function ce(){return(ce=(0,d.Z)(function*(n,e){const r=[];for(let l=0;l<e.expressions.length;l++){const u=yield s(n,e.expressions[l]);r[l]=(0,a.j)(u)}let t="",i=0;for(const l of e.quasis)t+=l.value?l.value.cooked:"",!1===l.tail&&(t+=r[i]?fn(r[i],n,e):"",i++);return t})).apply(this,arguments)}const y={};function Ie(n,e,r,t){return fe.apply(this,arguments)}function fe(){return(fe=(0,d.Z)(function*(n,e,r,t){const i=yield s(n,e.arguments[r]);if((0,a.C)(i,t))return s(n,e.arguments[r+1]);const l=e.arguments.length-r;return 1===l?s(n,e.arguments[r]):2===l?null:3===l?s(n,e.arguments[r+2]):Ie(n,e,r+2,t)})).apply(this,arguments)}function He(n,e,r,t){return pe.apply(this,arguments)}function pe(){return(pe=(0,d.Z)(function*(n,e,r,t){if(!0===t)return s(n,e.arguments[r+1]);if(e.arguments.length-r==3)return s(n,e.arguments[r+2]);const i=yield s(n,e.arguments[r+2]);if(!1===(0,a.a)(i))throw new o.aV(n,o.rH.ModuleExportNotFound,e.arguments[r+2]);return He(n,e,r+2,i)})).apply(this,arguments)}function de(n,e,r,t){return he.apply(this,arguments)}function he(){return(he=(0,d.Z)(function*(n,e,r,t){const i=n.body;if(r.length!==n.params.length)throw new o.aV(e,o.rH.WrongNumberOfParameters,null);for(let u=0;u<r.length;u++){const c=n.params[u];"Identifier"===c.type&&null!=e.localScope&&(e.localScope[c.name.toLowerCase()]={d:null,value:r[u],valueset:!0,node:null})}const l=yield s(e,i);if(l instanceof a.R)return l.value;if(l===a.y)throw new o.aV(e,o.rH.UnexpectedToken,t);if(l===a.z)throw new o.aV(e,o.rH.UnexpectedToken,t);return l instanceof a.I?l.value:l})).apply(this,arguments)}(0,Oe.r)(y,x),(0,Be.r)(y,x),(0,Pe.r)(y,x),(0,E.r)(y,x),(0,De.r)(y,x),(0,Fe.registerFunctions)({functions:y,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:x,standardFunctionAsync:S}),y.iif=function(){var n=(0,d.Z)(function*(e,r){(0,a.E)(null===r.arguments?[]:r.arguments,3,3,e,r);const t=yield s(e,r.arguments[0]);if(!1===(0,a.a)(t))throw new o.aV(e,o.rH.BooleanConditionRequired,r);return s(e,t?r.arguments[1]:r.arguments[2])});return function(e,r){return n.apply(this,arguments)}}(),y.decode=function(){var n=(0,d.Z)(function*(e,r){if(r.arguments.length<2)throw new o.aV(e,o.rH.WrongNumberOfParameters,r);if(2===r.arguments.length)return s(e,r.arguments[1]);if((r.arguments.length-1)%2==0)throw new o.aV(e,o.rH.WrongNumberOfParameters,r);return Ie(e,r,1,yield s(e,r.arguments[0]))});return function(e,r){return n.apply(this,arguments)}}(),y.when=function(){var n=(0,d.Z)(function*(e,r){if(r.arguments.length<3)throw new o.aV(e,o.rH.WrongNumberOfParameters,r);if(r.arguments.length%2==0)throw new o.aV(e,o.rH.WrongNumberOfParameters,r);const t=yield s(e,r.arguments[0]);if(!1===(0,a.a)(t))throw new o.aV(e,o.rH.BooleanConditionRequired,r.arguments[0]);return He(e,r,0,t)});return function(e,r){return n.apply(this,arguments)}}();const dn={fixSpatialReference:a.A,parseArguments:R,standardFunction:x,standardFunctionAsync:S,evaluateIdentifier:ie};for(const n in y)y[n]={value:new m.Bx(y[n]),valueset:!0,node:null};const V=function(){};function Ee(n,e,r){const t=new V;null==n&&(n={}),null==e&&(e={});const i=new v.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});i.immutable=!1,t.textformatting={value:i,valueset:!0,node:null};for(const l in e)t[l]={value:new m.Bx(e[l]),native:!0,valueset:!0,node:null};for(const l in n)t[l]=n[l]&&"esri.Graphic"===n[l].declaredClass?{value:_e.Z.createFromGraphic(n[l],r),valueset:!0,node:null}:{value:n[l],valueset:!0,node:null};return t}function Re(n){console.log(n)}V.prototype=y,V.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},V.prototype.pi={value:Math.PI,valueset:!0,node:null};const hn=dn;function Ce(n){const e={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:x,standardFunctionAsync:S,evaluateIdentifier:ie};for(let r=0;r<n.length;r++)n[r].registerFunctions(e);for(const r in e.functions)y[r]={value:new m.Bx(e.functions[r]),valueset:!0,node:null},V.prototype[r]=y[r];for(let r=0;r<e.signatures.length;r++)(0,Ze.gW)(e.signatures[r],"async")}function yn(n,e){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(n,e){let r=e.spatialReference;null==r&&(r=new we.Z({wkid:102100}));let t=null;n.usesModules&&(t=new me.s(new Map,n.loadedModules));const i=Ee(e.vars,e.customfunctions,e.timeZone),l={spatialReference:r,services:e.services,exports:{},libraryResolver:t,abortSignal:null==e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:i,console:e.console??Re,timeZone:e.timeZone??null,lrucache:e.lrucache,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}};let u=yield s(l,n);if(u instanceof a.R&&(u=u.value),u instanceof a.I&&(u=u.value),u===a.x&&(u=null),u===a.y)throw new o.aV(l,o.rH.IllegalResult,null);if(u===a.z)throw new o.aV(l,o.rH.IllegalResult,null);if((0,a.i)(u))throw new o.aV(l,o.rH.IllegalResult,null);return u})).apply(this,arguments)}Ce([Ae.A])}}]);