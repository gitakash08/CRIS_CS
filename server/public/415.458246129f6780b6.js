"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[415,9683,514],{80415:(H,P,r)=>{r.r(P),r.d(P,{default:()=>lt});var o=r(15861),n=r(17626),y=r(73281),N=(r(4832),r(49067),r(96794),r(69747),r(40425),r(69357),r(40342),r(73640),r(33474)),q=r(32088),Y=r(84792),K=r(20383),ie=r(79608),A=r(74333),S=r(26584),z=r(58817),B=r(63290),f=r(99959),O=r(94113),M=r(10699),k=r(95737),X=r(21726),u=r(77712),oe=r(66656),F=r(68653),_=r(76898),ee=r(99433),le=r(9256),x=r(14077),de=r(65234),ge=r(44917),Q=(r(29132),r(88879)),ne=r(8314),be=r(47996),ue=r(60330),R=r(97347),pe=r(90912),ye=(r(85931),r(61039)),Ce=r(20514),ce=r(61515),he=r(17253),E=r(2004),T=r(37118),v=r(71774);let c=0,I=class extends(be.Z.LoadableMixin((0,ue.v)(A.Z))){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){return this.addResolvingPromise(this._startWorker(null!=t?t.signal:null)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const t=this.layer?.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(t,e={}){var i=this;return(0,o.Z)(function*(){yield i.load(e);const s=yield i._connection.invoke("queryFeatures",t?t.toJSON():null,e);(0,ce.p)(t,i.layer.spatialReference,s);const a=he.Z.fromJSON(s);if(!i._requiresClientGraphicMapping())return a;const p=i.layer.objectIdField;for(const b of a.features){const V=i._idToClientGraphic.get(b.attributes[p]);V&&(b.geometry=V.geometry)}return a.geometryType=i.layer.geometryType,a})()}queryFeaturesJSON(t,e={}){var i=this;return(0,o.Z)(function*(){if(i._requiresClientGraphicMapping())throw new S.Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");yield i.load(e);const s=yield i._connection.invoke("queryFeatures",t?t.toJSON():null,e);return(0,ce.p)(t,i.layer.spatialReference,s),s})()}queryFeatureCount(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,e))}queryObjectIds(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,e))}queryExtent(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,e)).then(i=>({count:i.count,extent:E.Z.fromJSON(i.extent)}))}querySnapping(t,e={}){return this.load(e).then(()=>this._connection.invoke("querySnapping",t,e))}_applyEdits(t){var e=this;return(0,o.Z)(function*(){if(!e._connection)throw new S.Z("feature-layer-source:edit-failure","Memory source not loaded");const i=e.layer.objectIdField;let s=null;const a=[],p=[];yield Promise.all([e._prepareClientMapping(t.addFeatures,null),e._prepareClientMapping(t.updateFeatures,null)]);const b=D=>"objectId"in D&&null!=D.objectId?D.objectId:"attributes"in D&&null!=D.attributes[i]?D.attributes[i]:null;if(t.addFeatures&&(s=e._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const D of t.deleteFeatures){const $=b(D);null!=$&&a.push($)}const Z=t.updateFeatures&&e._idToClientGraphic?new Map:null;if(t.updateFeatures)for(const D of t.updateFeatures)if(p.push(e._serializeFeature(D)),Z){const $=b(D);null!=$&&Z.set($,D)}(0,Ce.P)(s?s.features:null,p,e.layer.spatialReference);const{fullExtent:V,featureEditResults:L}=yield e._connection.invoke("applyEdits",{adds:s?s.features:[],updates:p,deletes:a});return e.fullExtent=V,s&&s.finish(L.uidToObjectId),e._updateClientGraphicIds(Z,L),e._createEditsResult(L)})()}_prepareClientMapping(t,e){var i=this;return(0,o.Z)(function*(){if("mesh"!==i._layerOrSourceGeometryType||null==t)return;const s=[];for(const{geometry:a}of t)null==a||"mesh"!==a.type||a.hasExtent||a.loaded||s.push(a.load({signal:e}));s.length&&(yield Promise.all(s))})()}_updateClientGraphicIds(t,e){if(this._idToClientGraphic){if(t)for(const i of e.updateResults){if(!i.success)continue;const s=t.get(i.objectId);null!=s&&this._addIdToClientGraphic(s)}for(const i of e.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const e=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:e?new S.Z("feature-layer-source:edit-failure",e.description,{code:e.code}):null}}_prepareAddFeatures(t){const e=new Map,i=new Array(t.length);let s=null;for(let p=0;p<t.length;p++){const b=t[p],Z=this._serializeFeature(b);s||null==b.geometry||(s=b.geometry.type),i[p]=Z,e.set(`${Z.uid}`,b)}const a=this;return{features:i,inferredGeometryType:s,finish(p){const b=a.sourceJSON.objectIdField;for(const Z in p){const V=p[Z],L=e.get(Z);L&&(L.attributes||(L.attributes={}),-1===V?delete L.attributes[b]:L.attributes[b]=V,a._addIdToClientGraphic(L))}}}}_addIdToClientGraphic(t){if(!this._idToClientGraphic)return;const i=t.attributes?.[this.sourceJSON.objectIdField];null!=i&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return"mesh"===t||"multipatch"===t||"extent"===t}_serializeFeature(t){const{attributes:e}=t,i=this._geometryForSerialization(t),s=(c++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:e}:{uid:s,attributes:e}}_geometryForSerialization(t){const{geometry:e}=t;return null==e?null:this._geometryRequiresClientGraphicMapping(e)?e.extent?T.Z.fromExtent(e.extent):null:e}_startWorker(t){var e=this;return(0,o.Z)(function*(){e._connection=yield(0,R.bA)("MemorySourceWorker",{strategy:(0,ne.Z)("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:e});const{fields:i,spatialReference:s,objectIdField:a,hasM:p,hasZ:b,timeInfo:Z,dateFieldsTimeZone:V}=e.layer,L="defaults"===e.layer.originOf("spatialReference");yield e._prepareClientMapping(e.items,t);const D=e._prepareAddFeatures(e.items);e.addHandles(e.on("before-changes",se=>{B.Z.getLogger(e).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),se.preventDefault()}));const $={features:D.features,fields:i?.map(se=>se.toJSON()),geometryType:v.P.toJSON(e._workerGeometryType),hasM:"mesh"!==e._layerOrSourceGeometryType&&p,hasZ:"mesh"===e._layerOrSourceGeometryType||b,objectIdField:a,spatialReference:L?null:s&&s.toJSON(),timeInfo:Z?.toJSON()??null,dateFieldsTimeZone:V},J=yield e._connection.invoke("load",$,{signal:t});for(const se of J.warnings)B.Z.getLogger(e.layer).warn("#load()",`${se.message} (title: '${e.layer.title||"no title"}', id: '${e.layer.id??"no id"}')`,{warning:se});J.featureErrors.length&&B.Z.getLogger(e.layer).warn("#load()",`Encountered ${J.featureErrors.length} validation errors while loading features. (title: '${e.layer.title||"no title"}', id: '${e.layer.id??"no id"}')`,{errors:J.featureErrors});const Me=J.layerDefinition;e._geometryTypeRequiresClientGraphicMapping(D.inferredGeometryType)&&(Me.geometryType=v.P.toJSON(D.inferredGeometryType)),e.sourceJSON=Me,e._requiresClientGraphicMapping()&&(e._idToClientGraphic=new Map),D.finish(J.assignedObjectIds)})()}};(0,n._)([(0,ye.c)({Type:Q.Z,ensureType:(0,pe.se)(Q.Z)})],I.prototype,"itemType",void 0),(0,n._)([(0,u.Cb)()],I.prototype,"type",void 0),(0,n._)([(0,u.Cb)({constructOnly:!0})],I.prototype,"layer",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],I.prototype,"_workerGeometryType",null),(0,n._)([(0,u.Cb)()],I.prototype,"sourceJSON",void 0),I=(0,n._)([(0,_.j)("esri.layers.graphics.sources.MemorySource")],I);var te=r(50085),Ee=r(65088),Ie=r(552),Be=r(50107),Ue=r(6733),Ge=r(35126),Ne=r(58426),Je=r(15008),We=r(49286),Ve=r(32629),Ke=r(6647),ze=r(83761);let ae=class extends ze.Z{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};(0,n._)([(0,u.Cb)()],ae.prototype,"updating",void 0),(0,n._)([(0,u.Cb)()],ae.prototype,"status",void 0),ae=(0,n._)([(0,_.j)("esri.layers.support.PublishingInfo")],ae);const $e=ae,Pe="esri.layers.mixins.PublishableLayer",Ze=Symbol(Pe),Qe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const a=new $e;return this._checkPublishingStatus(a),a}_checkPublishingStatus(s){var a=this;let Z=0;const V=function(){var D=(0,o.Z)(function*($){let J;s.updating=!0;try{J=yield a.fetchPublishingStatus()}catch{J="unavailable"}"published"!==J&&"unavailable"!==J||("publishing"===s.status&&a.refresh(),L.remove()),s.status=J,s.updating=!1,L.removed||(Z=setTimeout(V,$,$+125))});return function(J){return D.apply(this,arguments)}}(),L={removed:!1,remove(){this.removed=!0,clearTimeout(Z)}};this.when().catch(()=>L.remove()),V(250),this.addHandles(L)}};return e=Ze,(0,n._)([(0,u.Cb)({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=(0,n._)([(0,_.j)(Pe)],i),i};var He=r(30346),Ye=r(99555),Xe=r(97941),Te=r(38305),re=r(13812),j=r(56347),xe=r(32777),Le=r(41638),qe=r(55911),Fe=r(90194),ke=r(170),Re=r(62667),_e=r(65151),et=r(73917),tt=r(5676),rt=r(15283),it=r(39683),ot=r(96854),fe=r(6871),st=r(49430),me=r(20885),nt=r(92236);const U="FeatureLayer",we="esri.layers.FeatureLayer",at=B.Z.getLogger(we);function ve(t,e){return new S.Z("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Ae(t){return t&&t instanceof A.Z}const je=(0,qe.v)();function Oe(t,e,i){const s=!!i?.writeLayerSchema;return{enabled:s,ignoreOrigin:s}}let d=class extends((0,Ne.B)((0,Je.M)((0,Ge.b)(Qe((0,Ue.o1)((0,Ie.h)((0,Ve.c)((0,Xe.n)((0,Ye.M)((0,He.Q)((0,Ee.Y)((0,We.q)((0,Ke.I)((0,f.R)((0,Be.N)((0,te.V)((0,ie.J)(ge.Z)))))))))))))))))){constructor(...t){var e;super(...t),e=this,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=de.Z.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=(0,M.Ds)(function(){var i=(0,o.Z)(function*(s,a,p){const{save:b,saveAs:Z}=yield Promise.all([r.e(8592),r.e(7969)]).then(r.bind(r,36912));switch(s){case me.x.SAVE:return b(e,a);case me.x.SAVE_AS:return Z(e,p,a)}});return function(s,a,p){return i.apply(this,arguments)}}())}destroy(){this.source?.destroy()}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}load(t){var e=this;const i=null!=t?t.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(a=>this.initLayerProperties(a))),Promise.resolve(this);const s=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(M.r9).then((0,o.Z)(function*(){if(e.url&&null==e.layerId&&/FeatureServer|MapServer\/*$/i.test(e.url)){const a=yield e._fetchFirstValidLayerId(i);null!=a&&(e.layerId=a)}if(!e.url&&!e._hasMemorySource())throw new S.Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return e.initLayerProperties(yield e.createGraphicsSource(i))})).then(()=>(0,j.nU)(this,"load",t));return this.addResolvingPromise(s),Promise.resolve(this)}readCapabilities(t,e){return(0,_e.h)(e=e.layerDefinition||e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,i){return this._readEditingEnabled(e,!0,i)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,i,s){this._writeEditingEnabled(t,e,!0,s)}get effectiveEditingEnabled(){return(0,j.sX)(this)}readIsTable(t,e){return"Table"===(e=e?.layerDefinition??e).type||!e.geometryType}writeIsTable(t,e,i,s){s?.writeLayerSchema&&(0,O.RB)(i,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return(0,j.rk)(e.layerDefinition||e)}readObjectIdField(t,e){return(0,j.kZ)(e.layerDefinition||e)}get parsedUrl(){const t=(0,X.mN)(this.url);return null!=t&&(null!=this.dynamicDataSource?t.path=(0,X.v_)(t.path,"dynamicLayer"):null!=this.layerId&&(t.path=(0,X.v_)(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){(0,Fe.YN)(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,i){const s=(e=e.layerDefinition||e).drawingInfo?.renderer;if(s){const a=(0,N.a)(s,e,i)??void 0;return a||at.error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:i}),a}return(0,j.Ob)(e,i)}set source(t){const e=this._get("source");e!==t&&(Ae(e)&&this._resetMemorySource(e),Ae(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof A.Z?new I({layer:this,items:t}):t:null}readSource(t,e){const i=he.Z.fromJSON(e.featureSet);return new I({layer:this,items:i?.features??[]})}readTemplates(t,e){const i=e.editFieldsInfo,s=i?.creatorField,a=i?.editorField;return t=t?.map(p=>xe.Z.fromJSON(p)),this._fixTemplates(t,s),this._fixTemplates(t,a),t}readTitle(t,e){const i=e.layerDefinition?.name??e.name,s=e.title||e.layerDefinition?.title;if(i){const a=this.portalItem?.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,Te.a7)(this.url,i):i;let p=i;if(!p&&this.url){const b=(0,Te.Qc)(this.url);null!=b&&(p=b.title)}return p?("item-title-and-service-name"===this.sublayerTitleMode&&a&&a!==p&&(p=a+" - "+p),(0,Te.ld)(p)):void 0}if("item-title"===this.sublayerTitleMode&&s)return s}readTitleFromWebMap(t,e){return e.title||e.layerDefinition?.name}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const s=e.fields.find(a=>a.name.toLowerCase()===i);s&&(i=s.name)}return i}readTypes(t,e){t=(e=e.layerDefinition||e).types;const i=e.editFieldsInfo,s=i?.creatorField,a=i?.editorField;return t?.map(p=>(p=Le.Z.fromJSON(p),this._fixTemplates(p.templates,s),this._fixTemplates(p.templates,a),p))}readVisible(t,e){return null!=e.layerDefinition?.defaultVisibility?!!e.layerDefinition.defaultVisibility:null!=e.visibility?!!e.visibility:void 0}addAttachment(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.JD)(i,t,e,U)})()}updateAttachment(t,e,i){var s=this;return(0,o.Z)(function*(){return(0,j.Y5)(s,t,e,i,U)})()}applyEdits(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.Jj)(i,t,e)})()}uploadAssets(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.uj)(i,t,e)})()}on(t,e){return super.on(t,e)}createPopupTemplate(t){return(0,st.eZ)(this,t)}createGraphicsSource(t){var e=this;return(0,o.Z)(function*(){if(e._hasMemorySource()&&e.source)return e.source.load({signal:t});const{default:i}=yield(0,M.Hl)(r.e(9739).then(r.bind(r,79739)),t);return new i({layer:e}).load({signal:t})})()}createQuery(){const t=(0,j.rP)(this);t.dynamicDataSource=this.dynamicDataSource;const i=(0,k._)(this.definitionExpression,null!=this.subtypeCode?`${this.subtypeField} = ${this.subtypeCode}`:null);return t.where=i||"1=1",t}deleteAttachments(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.FV)(i,t,e,U)})()}fetchRecomputedExtents(t){var e=this;return(0,o.Z)(function*(){return(0,j.Ci)(e,t,U)})()}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const s=t.attributes?t.attributes[e]:void 0;if(null==s)return null;let a=null;return i?.some(p=>{const{id:b}=p;return null!=b&&(b.toString()===s.toString()&&(a=p),!!a)}),a}getFieldDomain(t,e){const i=e?.feature,s=this.getFeatureType(i);if(s){const a=s.domains&&s.domains[t];if(a&&"inherited"!==a.type)return a}return this._getLayerDomain(t)}getField(t){return this.fieldsIndex.get(t)}queryAttachments(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.SU)(i,t,e,U)})()}queryFeatures(t,e){var i=this;return(0,o.Z)(function*(){const s=yield i.load(),a=yield s.source.queryFeatures(ot.Z.from(t)??s.createQuery(),e);if(a?.features)for(const p of a.features)p.layer=p.sourceLayer=s;return a})()}queryObjectIds(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.tD)(i,t,e,U)})()}queryFeatureCount(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.VG)(i,t,e,U)})()}queryExtent(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.KE)(i,t,e,U)})()}queryRelatedFeatures(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.kp)(i,t,e,U)})()}queryRelatedFeaturesCount(t,e){var i=this;return(0,o.Z)(function*(){return(0,j.C9)(i,t,e,U)})()}queryTopFeatures(t,e){var i=this;return(0,o.Z)(function*(){const{source:s,capabilities:a}=yield i.load();if(!s.queryTopFeatures||!a?.query?.supportsTopFeaturesQuery)throw new S.Z(U,"Layer source does not support queryTopFeatures capability");const p=yield s.queryTopFeatures(fe.Z.from(t),e);if(p?.features)for(const b of p.features)b.layer=b.sourceLayer=i;return p})()}queryTopObjectIds(t,e){var i=this;return(0,o.Z)(function*(){const{source:s,capabilities:a}=yield i.load();if(!s.queryTopObjectIds||!a?.query.supportsTopFeaturesQuery)throw new S.Z(U,"Layer source does not support queryTopObjectIds capability");return s.queryTopObjectIds(fe.Z.from(t),e)})()}queryTopFeaturesExtent(t,e){var i=this;return(0,o.Z)(function*(){const{source:s,capabilities:a}=yield i.load();if(!s.queryTopExtents||!a?.query?.supportsTopFeaturesQuery)throw new S.Z(U,"Layer source does not support queryTopExtents capability");return s.queryTopExtents(fe.Z.from(t),e)})()}queryTopFeatureCount(t,e){var i=this;return(0,o.Z)(function*(){const{source:s,capabilities:a}=yield i.load();if(!s.queryTopCount||!a?.query?.supportsTopFeaturesQuery)throw new S.Z(U,"Layer source does not support queryFeatureCount capability");return s.queryTopCount(fe.Z.from(t),e)})()}read(t,e){const i=t.featureCollection;if(i){this.resourceInfo=t;const s=i.layers;s&&1===s.length&&(super.read(s[0],e),null!=i.showLegend&&super.read({showLegend:i.showLegend},e))}super.read(t,e),e&&"service"===e.origin&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:e?.origin??void 0,writeLayerSchema:e?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:s,messages:a}=e;if(this.dynamicDataSource)return a?.push(ve(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(("web-map"===i||"web-scene"===i)&&"tables"!==s)return a?.push(ve(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return a?.push(ve(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&("web-map"===i||"web-scene"===i)&&"tables"===s)return a?.push(ve(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new S.Z(U,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){return!!this.loaded&&("memory"===this.source?.type||(0,tt.D)(this,t))}save(t){var e=this;return(0,o.Z)(function*(){return e._debouncedSaveOperations(me.x.SAVE,t)})()}saveAs(t,e){var i=this;return(0,o.Z)(function*(){return i._debouncedSaveOperations(me.x.SAVE_AS,e,t)})()}_readEditingEnabled(t,e,i){let s=t.layerDefinition?.capabilities;return s?this._hasEditingCapability(s):(s=t.capabilities,e&&"web-map"===i?.origin&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,i,s){if(!t){const a=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";(0,O.RB)("layerDefinition.capabilities",a,e),i&&!s?.writeLayerSchema&&(e.capabilities=a)}}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}_fetchFirstValidLayerId(t){return(0,Y.Z)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const i=e.data;if(i)return this.findFirstValidLayerId(i)})}initLayerProperties(t){var e=this;return(0,o.Z)(function*(){return e._set("source",t),t.sourceJSON&&(e.sourceJSON=t.sourceJSON,e.read(t.sourceJSON,{origin:"service",portalItem:e.portalItem,portal:e.portalItem?.portal,url:e.parsedUrl})),e._verifySource(),e._verifyFields(),(0,Fe.YN)(e.renderer,e.fieldsIndex),(0,Fe.UF)(e.timeInfo,e.fieldsIndex),(0,it.y)(e,{origin:"service"})})()}hasDataChanged(){var t=this;return(0,o.Z)(function*(){return(0,j.gG)(t)})()}fetchPublishingStatus(){var t=this;return(0,o.Z)(function*(){const e=t.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"})()}_verifyFields(){const t=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||-1!==t.search(/\/FeatureServer\//i)||this.fields?.some(e=>"geometry"===e.type)||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(i=>{const s=i.prototype?.attributes;s&&e&&delete s[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new S.Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new S.Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this.addHandles([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};(0,n._)([(0,F.r)("service","capabilities")],d.prototype,"readCapabilities",null),(0,n._)([(0,u.Cb)({json:{origins:{"web-scene":{write:!1}},write:!0}})],d.prototype,"charts",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],d.prototype,"createQueryVersion",null),(0,n._)([(0,u.Cb)({json:{read:{source:"layerDefinition.copyrightText"}}})],d.prototype,"copyright",void 0),(0,n._)([(0,u.Cb)({json:{read:{source:"layerDefinition.displayField"}}})],d.prototype,"displayField",void 0),(0,n._)([(0,u.Cb)({types:K.LB,readOnly:!0})],d.prototype,"defaultSymbol",void 0),(0,n._)([(0,u.Cb)({type:rt.n})],d.prototype,"dynamicDataSource",void 0),(0,n._)([(0,u.Cb)({type:Boolean})],d.prototype,"editingEnabled",null),(0,n._)([(0,F.r)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],d.prototype,"readEditingEnabled",null),(0,n._)([(0,F.r)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],d.prototype,"readEditingEnabledFromWebMap",null),(0,n._)([(0,ee.c)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],d.prototype,"writeEditingEnabled",null),(0,n._)([(0,ee.c)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],d.prototype,"writeEditingEnabledToWebMap",null),(0,n._)([(0,u.Cb)({readOnly:!0})],d.prototype,"effectiveEditingEnabled",null),(0,n._)([(0,u.Cb)({...je.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Oe}}}}})],d.prototype,"fields",void 0),(0,n._)([(0,u.Cb)(je.fieldsIndex)],d.prototype,"fieldsIndex",void 0),(0,n._)([(0,u.Cb)({type:x.Z,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"formTemplate",void 0),(0,n._)([(0,u.Cb)({json:{read:{source:"layerDefinition.extent"}}})],d.prototype,"fullExtent",void 0),(0,n._)([(0,u.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Oe,writer(t,e,i){const s=t?j.Fr.toJSON(t):null;s&&(0,O.RB)(i,s,e)}}}},read:{source:"layerDefinition.geometryType",reader:j.Fr.read}}})],d.prototype,"geometryType",void 0),(0,n._)([(0,u.Cb)({json:{read:{source:"layerDefinition.hasM"}}})],d.prototype,"hasM",void 0),(0,n._)([(0,u.Cb)({json:{read:{source:"layerDefinition.hasZ"}}})],d.prototype,"hasZ",void 0),(0,n._)([(0,u.Cb)(re.id)],d.prototype,"id",void 0),(0,n._)([(0,u.Cb)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],d.prototype,"infoFor3D",void 0),(0,n._)([(0,u.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],d.prototype,"isTable",void 0),(0,n._)([(0,F.r)("service","isTable",["type","geometryType"]),(0,F.r)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],d.prototype,"readIsTable",null),(0,n._)([(0,ee.c)("web-map","isTable")],d.prototype,"writeIsTable",null),(0,n._)([(0,u.Cb)(re.iR)],d.prototype,"labelsVisible",void 0),(0,n._)([(0,u.Cb)({type:[ke.Z],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Re.r,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:Re.r,write:{enabled:!0,layerContainerTypes:le.C}}},name:"layerDefinition.drawingInfo.labelingInfo",read:Re.r,write:!0}})],d.prototype,"labelingInfo",void 0),(0,n._)([(0,u.Cb)((()=>{const t=(0,z.d9)(re.bT);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,s){(0,O.RB)(s,(0,nt.a)(e),i)}}},t})())],d.prototype,"opacity",void 0),(0,n._)([(0,u.Cb)(re.rn)],d.prototype,"legendEnabled",void 0),(0,n._)([(0,u.Cb)({type:["show","hide"],json:(()=>{const t=(0,z.d9)(re.rT.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],d.prototype,"listMode",void 0),(0,n._)([(0,F.r)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],d.prototype,"readGlobalIdField",null),(0,n._)([(0,u.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Oe}}}}})],d.prototype,"objectIdField",void 0),(0,n._)([(0,F.r)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],d.prototype,"readObjectIdField",null),(0,n._)([(0,u.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],d.prototype,"operationalLayerType",void 0),(0,n._)([(0,u.Cb)(je.outFields)],d.prototype,"outFields",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],d.prototype,"parsedUrl",null),(0,n._)([(0,u.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],d.prototype,"path",void 0),(0,n._)([(0,u.Cb)(re.C_)],d.prototype,"popupEnabled",void 0),(0,n._)([(0,u.Cb)({type:y.Z,json:{name:"popupInfo",write:!0}})],d.prototype,"popupTemplate",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],d.prototype,"defaultPopupTemplate",null),(0,n._)([(0,u.Cb)({types:q.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:q.o,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:le.C,overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema})}}})],d.prototype,"renderer",null),(0,n._)([(0,F.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,F.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],d.prototype,"readRenderer",null),(0,n._)([(0,u.Cb)()],d.prototype,"resourceInfo",void 0),(0,n._)([(0,u.Cb)((()=>{const t=(0,z.d9)(re.YI);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],d.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,u.Cb)({clonable:!1})],d.prototype,"source",null),(0,n._)([(0,oe.p)("source")],d.prototype,"castSource",null),(0,n._)([(0,F.r)("portal-item","source",["featureSet"]),(0,F.r)("web-map","source",["featureSet"])],d.prototype,"readSource",null),(0,n._)([(0,u.Cb)({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],d.prototype,"spatialReference",void 0),(0,n._)([(0,u.Cb)({type:Number})],d.prototype,"subtypeCode",void 0),(0,n._)([(0,u.Cb)({type:[xe.Z]})],d.prototype,"templates",void 0),(0,n._)([(0,F.r)("templates",["editFieldsInfo","creatorField","editorField","templates"])],d.prototype,"readTemplates",null),(0,n._)([(0,u.Cb)({type:et.Z})],d.prototype,"timeInfo",void 0),(0,n._)([(0,u.Cb)()],d.prototype,"title",void 0),(0,n._)([(0,F.r)("service","title",["name"]),(0,F.r)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],d.prototype,"readTitle",null),(0,n._)([(0,F.r)("web-map","title",["layerDefinition.name","title"])],d.prototype,"readTitleFromWebMap",null),(0,n._)([(0,u.Cb)({type:String})],d.prototype,"sublayerTitleMode",void 0),(0,n._)([(0,u.Cb)({json:{read:!1}})],d.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:String})],d.prototype,"typeIdField",void 0),(0,n._)([(0,F.r)("service","typeIdField"),(0,F.r)("typeIdField",["layerDefinition.typeIdField"])],d.prototype,"readTypeIdField",null),(0,n._)([(0,u.Cb)({type:[Le.Z]})],d.prototype,"types",void 0),(0,n._)([(0,F.r)("service","types",["types"]),(0,F.r)("types",["layerDefinition.types"])],d.prototype,"readTypes",null),(0,n._)([(0,u.Cb)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],d.prototype,"visible",void 0),(0,n._)([(0,F.r)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],d.prototype,"readVisible",null),d=(0,n._)([(0,_.j)(we)],d);const lt=d},35126:(H,P,r)=>{r.d(P,{b:()=>g});var o=r(17626),n=r(77712),w=(r(90912),r(85931),r(8314),r(76898)),l=r(2319);const h={write:{allowNull:!0}},g=m=>{let C=class extends m{constructor(){super(...arguments),this.featureEffect=null}};return(0,o._)([(0,n.Cb)({type:l.Z,json:{origins:{"web-map":h,"portal-item":h}}})],C.prototype,"featureEffect",void 0),C=(0,o._)([(0,w.j)("esri.layers.mixins.FeatureEffectLayer")],C),C}},15008:(H,P,r)=>{r.d(P,{M:()=>he});var ee,o=r(17626),n=r(32917),y=r(77712),l=(r(90912),r(85931),r(8314),r(76898)),h=r(43149),g=r(9256),m=r(83989),C=r(73281),S=(r(4832),r(49067),r(96794),r(69747),r(40425),r(69357),r(40342)),B=(r(73640),r(33474)),f=r(32088),O=r(58817),M=r(94113),k=r(55342),X=r(68653),u=r(99433),oe=r(13812),F=r(56347),_=r(170);let x=ee=class extends m.B{constructor(E){super(E),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(E,T,v){const c=E.filter(I=>"avg_angle"!==I.statisticType).map(I=>I.toJSON());(0,M.RB)(v,c,T)}readRenderer(E,T,v){const c=T.drawingInfo?.renderer;return c?(0,B.a)(c,T,v)??void 0:(0,F.Ob)(T,v)}clone(){return new ee({fields:(0,O.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,O.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,O.d9)(this.popupTemplate),renderer:(0,O.d9)(this.renderer)})}};(0,o._)([(0,k.J)({binning:"binning"})],x.prototype,"type",void 0),(0,o._)([(0,k.J)({geohash:"geohash"})],x.prototype,"binType",void 0),(0,o._)([(0,y.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],x.prototype,"fixedBinLevel",void 0),(0,o._)([(0,y.Cb)({type:[_.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],x.prototype,"labelingInfo",void 0),(0,o._)([(0,y.Cb)(oe.iR)],x.prototype,"labelsVisible",void 0),(0,o._)([(0,y.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],x.prototype,"maxScale",void 0),(0,o._)([(0,y.Cb)(oe.C_)],x.prototype,"popupEnabled",void 0),(0,o._)([(0,y.Cb)({type:C.Z,json:{name:"popupInfo",write:!0}})],x.prototype,"popupTemplate",void 0),(0,o._)([(0,y.Cb)({type:[h.Z],json:{write:!0}})],x.prototype,"fields",void 0),(0,o._)([(0,u.c)("fields")],x.prototype,"writeFields",null),(0,o._)([(0,y.Cb)({types:f.A,json:{write:{target:"drawingInfo.renderer"}}})],x.prototype,"renderer",void 0),(0,o._)([(0,X.r)("renderer",["drawingInfo.renderer"])],x.prototype,"readRenderer",null),x=ee=(0,o._)([(0,l.j)("esri.layers.support.FeatureReductionBinning")],x);const de=x;var ne,ge=r(20383),De=r(86810),Q=r(23841);function ue(E){return"simple"===E.type&&!E.visualVariables?.length}let R=ne=class extends De.wq{constructor(E){super(E),this.type="cluster",this.clusterRadius=(0,Q.t_)("80px"),this.clusterMinSize=(0,Q.t_)("12px"),this.clusterMaxSize=(0,Q.t_)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(E,T,v){const c=T.drawingInfo?.renderer;return c?.authoringInfo?.isAutoGenerated?null:c?ue(c)?null:(0,B.a)(c,T,v)??void 0:(0,F.Ob)(T,v)}readSymbol(E,T,v){const c=T.drawingInfo?.renderer;return c?.authoringInfo?.isAutoGenerated?null:c&&ue(c)?(0,B.a)(c,T,v)?.symbol:null}writeSymbol(E,T,v,c){const I=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||I){const te=new S.Z({symbol:E});T.drawingInfo={renderer:te.write({},c)}}}writeFields(E,T,v){const c=E.filter(I=>"avg_angle"!==I.statisticType).map(I=>I.toJSON());(0,M.RB)(v,c,T)}readFields(E,T,v){return E.filter(c=>!c.isAutoGenerated).map(c=>h.Z.fromJSON(c))}clone(){return new ne({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,O.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,O.d9)(this.fields),maxScale:this.maxScale,renderer:(0,O.d9)(this.renderer),symbol:(0,O.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,O.d9)(this.popupTemplate)})}};(0,o._)([(0,y.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],R.prototype,"type",void 0),(0,o._)([(0,y.Cb)({type:Number,cast:E=>"auto"===E?E:(0,Q.t_)(E),json:{write:!0}})],R.prototype,"clusterRadius",void 0),(0,o._)([(0,y.Cb)({type:Number,cast:Q.t_,json:{write:!0}})],R.prototype,"clusterMinSize",void 0),(0,o._)([(0,y.Cb)({type:Number,cast:Q.t_,json:{write:!0}})],R.prototype,"clusterMaxSize",void 0),(0,o._)([(0,y.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],R.prototype,"maxScale",void 0),(0,o._)([(0,y.Cb)(oe.C_)],R.prototype,"popupEnabled",void 0),(0,o._)([(0,y.Cb)({type:C.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],R.prototype,"popupTemplate",void 0),(0,o._)([(0,y.Cb)({types:f.A,json:{write:{target:"drawingInfo.renderer"}}})],R.prototype,"renderer",void 0),(0,o._)([(0,X.r)("renderer",["drawingInfo.renderer"])],R.prototype,"readRenderer",null),(0,o._)([(0,y.Cb)({types:ge.AH})],R.prototype,"symbol",void 0),(0,o._)([(0,X.r)("symbol",["drawingInfo.renderer"])],R.prototype,"readSymbol",null),(0,o._)([(0,u.c)("symbol")],R.prototype,"writeSymbol",null),(0,o._)([(0,y.Cb)({type:[_.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],R.prototype,"labelingInfo",void 0),(0,o._)([(0,y.Cb)(oe.iR)],R.prototype,"labelsVisible",void 0),(0,o._)([(0,y.Cb)({type:[h.Z],json:{write:!0}})],R.prototype,"fields",void 0),(0,o._)([(0,u.c)("fields")],R.prototype,"writeFields",null),(0,o._)([(0,X.r)("fields")],R.prototype,"readFields",null),R=ne=(0,o._)([(0,l.j)("esri.layers.support.FeatureReductionCluster")],R);const pe=R;var Se=r(47058);const ye={key:"type",base:m.B,typeMap:{cluster:pe,binning:de}},Ce={types:{key:"type",base:m.B,typeMap:{selection:Se.Z,cluster:pe,binning:de}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:ye},"portal-item":{types:ye},"web-scene":{types:{key:"type",base:m.B,typeMap:{selection:Se.Z}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:g.C}}}}};var ce=r(62192);const he=E=>{let T=class extends E{constructor(...v){super(...v),this.addHandles((0,n.YP)(()=>this.renderer,()=>{if(this.featureReduction){const c=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",c)}},n.Z_))}set featureReduction(v){const c=this._normalizeFeatureReduction(v);this._set("featureReduction",c)}set renderer(v){}_normalizeFeatureReduction(v){if("cluster"!==v?.type)return v;const c=v.clone(),I=[new h.Z({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],te=(c.fields??[]).filter(Ie=>!Ie.isAutoGenerated);if(v.renderer&&!v.renderer.authoringInfo?.isAutoGenerated)return c.fields=[...I,...te],c;if(v.symbol)return c.fields=[...I,...te],c.renderer=null,c;if(!this.renderer)return v;const Ee=(0,ce.S1)(I,this.renderer,v,null,!1);return c.fields=[...I,...te],c.renderer=Ee,c}};return(0,o._)([(0,y.Cb)(Ce)],T.prototype,"featureReduction",null),T=(0,o._)([(0,l.j)("esri.layers.mixins.FeatureReductionLayer")],T),T}},32629:(H,P,r)=>{r.d(P,{c:()=>ie});var m,o=r(17626),n=r(94113),y=r(77712),l=(r(90912),r(85931),r(8314),r(76898)),h=r(2076),g=r(86810);const C=new h.X({asc:"ascending",desc:"descending"});let N=m=class extends g.wq{constructor(A){super(A),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new m({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,o._)([(0,y.Cb)({type:String,json:{write:!0}})],N.prototype,"field",void 0),(0,o._)([(0,y.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpression",void 0),(0,o._)([(0,y.Cb)({type:C.apiValues,json:{read:C.read,write:C.write}})],N.prototype,"order",void 0),N=m=(0,o._)([(0,l.j)("esri.layers.support.OrderByInfo")],N);const q=N;function Y(A,S,z){if(!A)return null;const B=A.find(O=>!!O.field);if(!B)return null;const f=new q;return f.read(B,z),[f]}function K(A,S,z,B){const f=A.find(O=>!!O.field);f&&(0,n.RB)(z,[f.toJSON()],S)}const ie=A=>{let S=class extends A{constructor(){super(...arguments),this.orderBy=null}};return(0,o._)([(0,y.Cb)({type:[q],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Y},write:{target:"layerDefinition.orderBy",writer:K}}})],S.prototype,"orderBy",void 0),S=(0,o._)([(0,l.j)("esri.layers.mixins.OrderedLayer")],S),S}},83989:(H,P,r)=>{r.d(P,{B:()=>h});var o=r(17626),n=r(86810),y=r(77712),l=(r(90912),r(85931),r(8314),r(76898));let h=class extends n.wq{constructor(){super(...arguments),this.type=null}};(0,o._)([(0,y.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=(0,o._)([(0,l.j)("esri.layers.support.FeatureReduction")],h)},47058:(H,P,r)=>{r.d(P,{Z:()=>m});var h,o=r(17626),n=r(77712),w=(r(90912),r(85931),r(8314),r(76898)),l=r(83989);let g=h=class extends l.B{constructor(C){super(C),this.type="selection"}clone(){return new h}};(0,o._)([(0,n.Cb)({type:["selection"]})],g.prototype,"type",void 0),g=h=(0,o._)([(0,w.j)("esri.layers.support.FeatureReductionSelection")],g);const m=g},39683:(H,P,r)=>{r.d(P,{y:()=>G});var o=r(15861),n=r(59213),y=r(10699),W=r(14889);function G(l,h,g){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)(function*(l,h,g){const m=l&&l.getAtOrigin&&l.getAtOrigin("renderer",h.origin);if(m&&"unique-value"===m.type&&m.styleOrigin){const C=yield(0,n.q6)(m.populateFromStyle());if((0,y.k_)(g),!1===C.ok){const N=C.error;h?.messages&&h.messages.push(new W.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${N.message}`,{error:N,context:h})),l.clear("renderer",h?.origin)}}})).apply(this,arguments)}},20514:(H,P,r)=>{r.d(P,{P:()=>W});var o=r(16730),n=r(37053);function y(l,h,g){if(null==l.hasM||l.hasZ)for(const m of h)for(const C of m)C.length>2&&(C[2]*=g)}function W(l,h,g){if(!l&&!h||!g)return;const m=(0,o._R)(g);G(l,g,m),G(h,g,m)}function G(l,h,g){if(l)for(const m of l)w(m.geometry,h,g)}function w(l,h,g){if(!l?.spatialReference||(0,n.fS)(l.spatialReference,h))return;const m=(0,o._R)(l.spatialReference)/g;if(1!==m)if("x"in l)null!=l.z&&(l.z*=m);else if("rings"in l)y(l,l.rings,m);else if("paths"in l)y(l,l.paths,m);else if("points"in l&&(null==l.hasM||l.hasZ))for(const C of l.points)C.length>2&&(C[2]*=m)}},6871:(H,P,r)=>{r.d(P,{Z:()=>O});var Y,o=r(17626),n=r(29132),y=r(97478),W=r(2076),G=r(86810),w=r(58817),l=r(77712),h=r(90912),g=r(76898),m=r(99433),C=r(91179);r(85931),r(8314);let K=Y=class extends G.wq{constructor(M){super(M),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new Y({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,o._)([(0,l.Cb)({type:[String],json:{write:!0}})],K.prototype,"groupByFields",void 0),(0,o._)([(0,l.Cb)({type:Number,json:{write:!0}})],K.prototype,"topCount",void 0),(0,o._)([(0,l.Cb)({type:[String],json:{write:!0}})],K.prototype,"orderByFields",void 0),K=Y=(0,o._)([(0,g.j)("esri.rest.support.TopFilter")],K);const ie=K;var S,A=r(65234);const z=new W.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),B=new W.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let f=S=class extends G.wq{constructor(M){super(M),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(M,k){k.resultOffset=this.start,k.resultRecordCount=this.num||10}clone(){return new S((0,w.d9)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,o._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"cacheHint",void 0),(0,o._)([(0,l.Cb)({type:Number,json:{write:{overridePolicy:M=>({enabled:M>0})}}})],f.prototype,"distance",void 0),(0,o._)([(0,l.Cb)({types:n.qM,json:{read:C.im,write:!0}})],f.prototype,"geometry",void 0),(0,o._)([(0,l.Cb)({type:Number,json:{write:!0}})],f.prototype,"geometryPrecision",void 0),(0,o._)([(0,l.Cb)({type:Number,json:{write:!0}})],f.prototype,"maxAllowableOffset",void 0),(0,o._)([(0,l.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],f.prototype,"num",void 0),(0,o._)([(0,l.Cb)({json:{write:!0}})],f.prototype,"objectIds",void 0),(0,o._)([(0,l.Cb)({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0),(0,o._)([(0,l.Cb)({type:[String],json:{write:!0}})],f.prototype,"outFields",void 0),(0,o._)([(0,l.Cb)({type:A.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],f.prototype,"outSpatialReference",void 0),(0,o._)([(0,l.Cb)({type:String,json:{write:!0}})],f.prototype,"resultType",void 0),(0,o._)([(0,l.Cb)({json:{write:!0}})],f.prototype,"returnGeometry",void 0),(0,o._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:M=>({enabled:M})}}})],f.prototype,"returnM",void 0),(0,o._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:M=>({enabled:M})}}})],f.prototype,"returnZ",void 0),(0,o._)([(0,l.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],f.prototype,"start",void 0),(0,o._)([(0,m.c)("start"),(0,m.c)("num")],f.prototype,"writeStart",null),(0,o._)([(0,l.Cb)({type:String,json:{read:{source:"spatialRel",reader:z.read},write:{target:"spatialRel",writer:z.write}}})],f.prototype,"spatialRelationship",void 0),(0,o._)([(0,l.Cb)({type:y.Z,json:{write:!0}})],f.prototype,"timeExtent",void 0),(0,o._)([(0,l.Cb)({type:ie,json:{write:!0}})],f.prototype,"topFilter",void 0),(0,o._)([(0,l.Cb)({type:String,json:{read:B.read,write:{writer:B.write,overridePolicy(M){return{enabled:null!=M&&null!=this.distance&&this.distance>0}}}}})],f.prototype,"units",void 0),(0,o._)([(0,l.Cb)({type:String,json:{write:!0}})],f.prototype,"where",void 0),f=S=(0,o._)([(0,g.j)("esri.rest.support.TopFeaturesQuery")],f),f.from=(0,h.se)(f);const O=f}}]);