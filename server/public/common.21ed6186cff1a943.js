"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[8592],{85840:(k,K,e)=>{e.d(K,{Z:()=>M});var n=e(17626),h=e(83761),f=e(85931),D=e(79608),u=e(61996),p=e(86810),c=e(77712),S=(e(90912),e(8314),e(76898));let x=0,R=class extends((0,p.eC)((0,D.J)((0,u.IG)(h.Z)))){constructor(O){super(O),this.id=`${Date.now().toString(16)}-analysis-${x++}`,this.title=null}get parent(){return this._get("parent")}set parent(O){const d=this.parent;if(null!=d)switch(d.type){case"line-of-sight":case"dimension":d.releaseAnalysis(this);break;case"2d":case"3d":d.analyses.includes(this)&&d.analyses.remove(this)}this._set("parent",O)}get isEditable(){return this.requiredPropertiesForEditing.every(f.pC)}};(0,n._)([(0,c.Cb)({type:String,constructOnly:!0,clonable:!1})],R.prototype,"id",void 0),(0,n._)([(0,c.Cb)({type:String})],R.prototype,"title",void 0),(0,n._)([(0,c.Cb)({constructOnly:!0})],R.prototype,"type",void 0),(0,n._)([(0,c.Cb)({clonable:!1,value:null})],R.prototype,"parent",null),(0,n._)([(0,c.Cb)({readOnly:!0})],R.prototype,"isEditable",null),(0,n._)([(0,c.Cb)({readOnly:!0})],R.prototype,"requiredPropertiesForEditing",void 0),R=(0,n._)([(0,S.j)("esri.analysis.Analysis")],R);const M=R},36607:(k,K,e)=>{e.d(K,{B:()=>f,R:()=>h});var n=e(68670);class h extends n.a5{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let u=this.width(),p=this.height(),c=u,T=p,g=c/Math.abs(u),S=T/Math.abs(p);if((0,n.g)(c)&&(0,n.g)(T)){let x=Math.min(c,T)/2,R=(0,n.az)(this.get("cornerRadiusTL",8),x),M=(0,n.az)(this.get("cornerRadiusTR",8),x),O=(0,n.az)(this.get("cornerRadiusBR",8),x),d=(0,n.az)(this.get("cornerRadiusBL",8),x),o=Math.min(Math.abs(c/2),Math.abs(T/2));R=(0,n.aj)(R,0,o),M=(0,n.aj)(M,0,o),O=(0,n.aj)(O,0,o),d=(0,n.aj)(d,0,o);const a=this._display;a.moveTo(R*g,0),a.lineTo(c-M*g,0),M>0&&a.arcTo(c,0,c,M*S,M),a.lineTo(c,T-O*S),O>0&&a.arcTo(c,T,c-O*g,T,O),a.lineTo(d*g,T),d>0&&a.arcTo(0,T,0,T-d*S,d),a.lineTo(0,R*S),R>0&&a.arcTo(0,0,R*g,0,R),a.closePath()}}}Object.defineProperty(h,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(h,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.a5.classNames.concat([h.className])});class f extends n.a3{_afterNew(){this._settings.themeTags=(0,n.ak)(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",h.new(this._root,{themeTags:(0,n.ak)(this._settings.themeTags,["background"])}))}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const u=this._prevSettings.icon,p=this.get("icon");p!==u&&(this._disposeProperty("icon"),u&&u.dispose(),p&&this.children.push(p),this._prevSettings.icon=p)}if(this.isDirty("label")){const u=this._prevSettings.label,p=this.get("label");p!==u&&(this._disposeProperty("label"),u&&u.dispose(),p&&this.children.push(p),this._prevSettings.label=p)}}}Object.defineProperty(f,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(f,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.a3.classNames.concat([f.className])})},43924:(k,K,e)=>{e.d(K,{T:()=>f});var n=e(68670);class h extends n.a7{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let u=this.width(),p=this.height();if(u>0&&p>0){let c=this.get("cornerRadius",8);c=(0,n.aj)(c,0,Math.min(u/2,p/2));let T=this.get("pointerX",0),g=this.get("pointerY",0),S=this.get("pointerBaseWidth",15)/2,x=0,R=0,M=0,O=(T-x)*(p-R)-(g-R)*(u-x),d=(T-M)*(0-p)-(g-p)*(u-M);const o=this._display;if(o.moveTo(c,0),O>0&&d>0){let a=Math.round((0,n.aj)(T,c+S,u-S-c));g=(0,n.aj)(g,-1/0,0),o.lineTo(a-S,0),o.lineTo(T,g),o.lineTo(a+S,0)}if(o.lineTo(u-c,0),o.arcTo(u,0,u,c,c),O>0&&d<0){let a=Math.round((0,n.aj)(g,c+S,p-S-c));T=(0,n.aj)(T,u,1/0),o.lineTo(u,c),o.lineTo(u,Math.max(a-S,c)),o.lineTo(T,g),o.lineTo(u,a+S)}if(o.lineTo(u,p-c),o.arcTo(u,p,u-c,p,c),O<0&&d<0){let a=Math.round((0,n.aj)(T,c+S,u-S-c));g=(0,n.aj)(g,p,1/0),o.lineTo(u-c,p),o.lineTo(a+S,p),o.lineTo(T,g),o.lineTo(a-S,p)}if(o.lineTo(c,p),o.arcTo(0,p,0,p-c,c),O<0&&d>0){let a=Math.round((0,n.aj)(g,c+S,p-c-S));T=(0,n.aj)(T,-1/0,0),o.lineTo(0,p-c),o.lineTo(0,a+S),o.lineTo(T,g),o.lineTo(0,Math.max(a-S,c))}o.lineTo(0,c),o.arcTo(0,0,c,0,c),o.closePath()}}}}Object.defineProperty(h,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(h,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.a7.classNames.concat([h.className])});class f extends n.a3{constructor(u,p,c,T=[]){super(u,p,c,T),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=(0,n.ak)(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",h.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(n.al.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",u=>{u&&((0,n.z)(u,"pointerover",p=>{this._htmlContentHovered=!0}),(0,n.z)(u,"pointerout",p=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),(0,n.ad)(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const u=this.get("background");this._keepHoverDp=new n.M([u.events.on("pointerover",p=>{let c=this.get("tooltipTarget");c&&(c.parent&&c.parent.getPrivate("tooltipTarget")==c&&(c=c.parent),c.hover())}),u.events.on("pointerout",p=>{let c=this.get("tooltipTarget");c&&(c.parent&&c.parent.getPrivate("tooltipTarget")==c&&(c=c.parent),this._htmlContentHovered||c.unhover())})]),this.label.onPrivate("htmlElement",p=>{this._keepHoverDp&&p&&this._keepHoverDp.disposers.push((0,n.z)(p,"pointerleave",c=>{const T=this.root._renderer.getEvent(c);u.events.dispatch("pointerout",{type:"pointerout",originalEvent:T.event,point:T.point,simulated:!1,target:u})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let u=this.get("tooltipTarget");const p=this.get("background");let c,T;u&&p&&(c=u.get("fill"),T=u.get("stroke"),null==c&&(c=T),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=c&&p.set("fill",c),this._fillDp=u.on("fill",g=>{null!=g&&(p.set("fill",g),this._updateTextColor(g))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=c&&p.set("stroke",c),this._strokeDp=u.on("fill",g=>{null!=g&&p.set("stroke",g)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=c&&this.label.set("fill",c),this._labelDp=u.on("fill",g=>{null!=g&&this.label.set("fill",g)}),this._disposers.push(this._labelDp))),this._updateTextColor(c)}_updateTextColor(u){this.get("autoTextColor")&&(null==u&&(u=this.get("background").get("fill")),null==u&&(u=this._root.interfaceColors.get("background")),u instanceof n.C&&this.label.set("fill",n.C.alternative(u,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(u){super._setDataItem(u),this.label._setDataItem(u)}_updateBackground(){super.updateBackground();const u=this._root.container;if(u){let p=.5,c=.5,T=this.get("centerX");T instanceof n.Q&&(p=T.value);let g=this.get("centerY");g instanceof n.Q&&(c=g.value);let S=u.width(),x=u.height(),R=this.parent,M=0,O=0;if(R){M=R.x(),O=R.y();const y=R.get("layerMargin");y&&(M+=y.left||0,O+=y.top||0,S+=(y.left||0)+(y.right||0),x+=(y.top||0)+(y.bottom||0))}const d=this.get("bounds",{left:-M,top:-O,right:S-M,bottom:x-O});this._updateBounds();let o=this.width(),a=this.height();0===o&&(o=this._w),0===a&&(a=this._h);let r=this.get("pointTo",{x:S/2,y:x/2}),l=r.x,i=r.y,_=this.get("pointerOrientation"),E=this.get("background"),v=0,A=0,j=0;E instanceof h&&(v=E.get("pointerLength",0),A=E.get("strokeWidth",0)/2,j=A,E.set("width",o),E.set("height",a));let I=0,b=0,B=d.right-d.left,P=d.bottom-d.top;"horizontal"==_||"left"==_||"right"==_?(A=0,"horizontal"==_?l>d.left+B/2?(l-=o*(1-p)+v,j*=-1):l+=o*p+v:"left"==_?l+=o*(1-p)+v:(l-=o*p+v,j*=-1)):(j=0,"vertical"==_?i>d.top+a/2+v?i-=a*(1-c)+v:(i+=a*c+v,A*=-1):"down"==_?i-=a*(1-c)+v:(i+=a*c+v,A*=-1)),l=(0,n.aj)(l,d.left+o*p,d.left+B-o*(1-p))+j,i=(0,n.aj)(i,d.top+a*c,d.top+P-a*(1-c))-A,I=r.x-l+o*p+j,b=r.y-i+a*c-A,this._fx=l,this._fy=i;const s=this.get("animationDuration",0);if(s>0&&this.get("visible")&&this.get("opacity")>.1){const y=this.get("animationEasing");this.animate({key:"x",to:l,duration:s,easing:y}),this.animate({key:"y",to:i,duration:s,easing:y})}else this.set("x",l),this.set("y",i);E instanceof h&&(E.set("pointerX",I),E.set("pointerY",b)),o>0&&(this._w=o),a>0&&(this._h=a)}}}Object.defineProperty(f,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(f,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.a3.classNames.concat([f.className])})},7006:(k,K,e)=>{e.d(K,{A:()=>B,B:()=>P,C:()=>s,D:()=>y,E:()=>C,F:()=>m,G:()=>L,H:()=>w,I:()=>N,J:()=>H,K:()=>V,L:()=>$,M:()=>W,N:()=>G,a:()=>u,b:()=>p,c:()=>D,d:()=>c,e:()=>f,f:()=>T,g:()=>J,h:()=>g,i:()=>S,j:()=>M,k:()=>o,l:()=>r,m:()=>l,n:()=>i,o:()=>O,p:()=>_,q:()=>v,r:()=>d,s:()=>a,t:()=>x,u:()=>E,v:()=>A,w:()=>R,x:()=>j,y:()=>I,z:()=>b});var n=e(4918),h=e(15994);function f(U){return n.G.extendedSpatialReferenceInfo(U)}function D(U,Z,F){return n.G.clip(h.N,U,Z,F)}function u(U,Z,F){return n.G.cut(h.N,U,Z,F)}function p(U,Z,F){return n.G.contains(h.N,U,Z,F)}function c(U,Z,F){return n.G.crosses(h.N,U,Z,F)}function T(U,Z,F,z){return n.G.distance(h.N,U,Z,F,z)}function g(U,Z,F){return n.G.equals(h.N,U,Z,F)}function S(U,Z,F){return n.G.intersects(h.N,U,Z,F)}function x(U,Z,F){return n.G.touches(h.N,U,Z,F)}function R(U,Z,F){return n.G.within(h.N,U,Z,F)}function M(U,Z,F){return n.G.disjoint(h.N,U,Z,F)}function O(U,Z,F){return n.G.overlaps(h.N,U,Z,F)}function d(U,Z,F,z){return n.G.relate(h.N,U,Z,F,z)}function o(U,Z){return n.G.isSimple(h.N,U,Z)}function a(U,Z){return n.G.simplify(h.N,U,Z)}function r(U,Z,F=!1){return n.G.convexHull(h.N,U,Z,F)}function l(U,Z,F){return n.G.difference(h.N,U,Z,F)}function i(U,Z,F){return n.G.symmetricDifference(h.N,U,Z,F)}function _(U,Z,F){return n.G.intersect(h.N,U,Z,F)}function E(U,Z,F=null){return n.G.union(h.N,U,Z,F)}function v(U,Z,F,z,Y,X,Q){return n.G.offset(h.N,U,Z,F,z,Y,X,Q)}function A(U,Z,F,z,Y=!1){return n.G.buffer(h.N,U,Z,F,z,Y)}function j(U,Z,F,z,Y,X,Q){return n.G.geodesicBuffer(h.N,U,Z,F,z,Y,X,Q)}function I(U,Z,F,z=!0){return n.G.nearestCoordinate(h.N,U,Z,F,z)}function b(U,Z,F){return n.G.nearestVertex(h.N,U,Z,F)}function B(U,Z,F,z,Y){return n.G.nearestVertices(h.N,U,Z,F,z,Y)}function P(U,Z,F,z){if(null==Z||null==z)throw new Error("Illegal Argument Exception");const Y=n.G.rotate(Z,F,z);return Y.spatialReference=U,Y}function s(U,Z,F){if(null==Z||null==F)throw new Error("Illegal Argument Exception");const z=n.G.flipHorizontal(Z,F);return z.spatialReference=U,z}function y(U,Z,F){if(null==Z||null==F)throw new Error("Illegal Argument Exception");const z=n.G.flipVertical(Z,F);return z.spatialReference=U,z}function C(U,Z,F,z,Y){return n.G.generalize(h.N,U,Z,F,z,Y)}function m(U,Z,F,z){return n.G.densify(h.N,U,Z,F,z)}function L(U,Z,F,z,Y=0){return n.G.geodesicDensify(h.N,U,Z,F,z,Y)}function w(U,Z,F){return n.G.planarArea(h.N,U,Z,F)}function N(U,Z,F){return n.G.planarLength(h.N,U,Z,F)}function H(U,Z,F,z){return n.G.geodesicArea(h.N,U,Z,F,z)}function V(U,Z,F,z){return n.G.geodesicLength(h.N,U,Z,F,z)}function $(U,Z,F){return null==Z||null==F?[]:n.G.intersectLinesToPoints(h.N,U,Z,F)}function W(U,Z){n.G.changeDefaultSpatialReferenceTolerance(U,Z)}function G(U){n.G.clearDefaultSpatialReferenceTolerance(U)}const J=Object.freeze(Object.defineProperty({__proto__:null,buffer:A,changeDefaultSpatialReferenceTolerance:W,clearDefaultSpatialReferenceTolerance:G,clip:D,contains:p,convexHull:r,crosses:c,cut:u,densify:m,difference:l,disjoint:M,distance:T,equals:g,extendedSpatialReferenceInfo:f,flipHorizontal:s,flipVertical:y,generalize:C,geodesicArea:H,geodesicBuffer:j,geodesicDensify:L,geodesicLength:V,intersect:_,intersectLinesToPoints:$,intersects:S,isSimple:o,nearestCoordinate:I,nearestVertex:b,nearestVertices:B,offset:v,overlaps:O,planarArea:w,planarLength:N,relate:d,rotate:P,simplify:a,symmetricDifference:i,touches:x,union:E,within:R},Symbol.toStringTag,{value:"Module"}))},128:(k,K,e)=>{e.d(K,{B:()=>x});var n=e(26584),h=e(50011),f=e(22558),D=e(21726),u=e(35948),p=e(34117),c=e(31283),T=e(77712),g=e(61556),S=e(29840);function x(_){const E=_?.origins??[void 0];return(v,A)=>{const j=function R(_,E,v){if("resource"===_?.type)return function M(_,E,v){const A=(0,p.Oe)(E,v);return{type:String,read:(j,I,b)=>{const B=(0,S.r)(j,I,b);return A.type===String?B:"function"==typeof A.type?new A.type({url:B}):void 0},write:{writer(j,I,b,B){if(!B?.resources)return"string"==typeof j?void(I[b]=(0,S.t)(j,B)):void(I[b]=j.write({},B));const P=function l(_){return null==_?null:"string"==typeof _?_:_.url}(j),s=(0,S.t)(P,{...B,verifyItemRelativeUrls:B?.verifyItemRelativeUrls?{writtenUrls:B.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},S.M.NO),y=A.type!==String&&(!(0,f.l)(this)||B?.origin&&this.originIdOf(v)>(0,c.M9)(B.origin)),C={object:this,propertyName:v,value:j,targetUrl:s,dest:I,targetPropertyName:b,context:B,params:_};B?.portalItem&&s&&!(0,D.YP)(s)?y&&_?.contentAddressed?O(C):y?function d(_){const{context:E,targetUrl:v,params:A,value:j,dest:I,targetPropertyName:b}=_;if(!E.portalItem)return;const B=E.portalItem.resourceFromPath(v),P=r(j,v,E),s=(0,g.B)(P),y=(0,D.Ml)(B.path),C=A?.compress??!1;s===y?(E.resources&&a({..._,resource:B,content:P,compress:C,updates:E.resources.toUpdate}),I[b]=v):O(_)}(C):function o({context:_,targetUrl:E,dest:v,targetPropertyName:A}){_.portalItem&&_.resources&&(_.resources.toKeep.push({resource:_.portalItem.resourceFromPath(E),compress:!1}),v[A]=E)}(C):B?.portalItem&&(null==s||null!=(0,S.i)(s)||(0,D.jc)(s)||y)?O(C):I[b]=s}}}}(_,E,v);switch(_?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:A,write:j}=S.a;return{read:A,write:j}}}}(_,v,A);for(const I of E){const b=(0,T.CJ)(v,I,A);for(const B in j)b[B]=j[B]}}}function O(_){const{targetUrl:E,params:v,value:A,context:j,dest:I,targetPropertyName:b}=_;if(!j.portalItem)return;const B=(0,S.p)(E),P=r(A,E,j);if(v?.contentAddressed&&"json"!==P.type)return void j.messages?.push(new n.Z("persistable:contentAddressingUnsupported",`Property "${b}" is trying to serializing a resource with content of type ${P.type} with content addressing. Content addressing is only supported for json resources.`,{content:P}));const s=v?.contentAddressed&&"json"===P.type?(0,h.F)(P.jsonString):B?.filename??(0,u.DO)(),y=(0,D.v_)(v?.prefix??B?.prefix,s),C=`${y}.${(0,g.B)(P)}`;if(v?.contentAddressed&&j.resources&&"json"===P.type){const w=j.resources.toKeep.find(N=>N.resource.path===C)??j.resources.toAdd.find(N=>N.resource.path===C);if(w)return void(I[b]=w.resource.itemRelativeUrl)}const m=j.portalItem.resourceFromPath(C);(0,D.jc)(E)&&j.resources&&j.resources.pendingOperations.push((0,D.gi)(E).then(w=>{m.path=`${y}.${(0,g.B)({type:"blob",blob:w})}`,I[b]=m.itemRelativeUrl}).catch(()=>{}));const L=v?.compress??!1;j.resources&&a({..._,resource:m,content:P,compress:L,updates:j.resources.toAdd}),I[b]=m.itemRelativeUrl}function a({object:_,propertyName:E,updates:v,resource:A,content:j,compress:I}){v.push({resource:A,content:j,compress:I,finish:b=>{!function i(_,E,v){"string"==typeof _[E]?_[E]=v.url:_[E].url=v.url}(_,E,b)}})}function r(_,E,v){return"string"==typeof _?{type:"url",url:E}:{type:"json",jsonString:JSON.stringify(_.toJSON(v))}}},83100:(k,K,e)=>{function n(T){return T=T||globalThis.location.hostname,c.some(g=>null!=T?.match(g))}function h(T,g){return T&&(g=g||globalThis.location.hostname)?null!=g.match(f)||null!=g.match(u)?T.replace("static.arcgis.com","staticdev.arcgis.com"):null!=g.match(D)||null!=g.match(p)?T.replace("static.arcgis.com","staticqa.arcgis.com"):T:T}e.d(K,{XO:()=>n,pJ:()=>h});const f=/^devext.arcgis.com$/,D=/^qaext.arcgis.com$/,u=/^[\w-]*\.mapsdevext.arcgis.com$/,p=/^[\w-]*\.mapsqa.arcgis.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,f,D,/^jsapps.esri.com$/,u,p]},75327:(k,K,e)=>{e.d(K,{Qc:()=>x,WU:()=>u,lt:()=>S});var n=e(77275),h=e(56683);const f={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function D(o=(0,h.Kd)()){let a=(o=o.toLowerCase())in f;if(!a){const _=o.split("-");_.length>1&&_[0]in f&&(o=_[0],a=!0),a||(o="en")}const[r,l,i="#,##0.###"]=f[o];return{decimal:r,group:l,pattern:i}}function u(o,a){const r=D((a={...a}).locale);a.customs=r;const l=a.pattern||r.pattern;return isNaN(o)||Math.abs(o)===1/0?null:function c(o,a,r){const l=(r=r||{}).customs.group,i=r.customs.decimal,_=a.split(";"),E=_[0];if((a=_[o<0?1:0]||"-"+E).includes("%"))o*=100;else if(a.includes("\u2030"))o*=1e3;else{if(a.includes("\xa4"))throw new Error("currency notation not supported");if(a.includes("E"))throw new Error("exponential notation not supported")}const v=p,A=E.match(v);if(!A)throw new Error("unable to find a number expression in pattern: "+a);return!1===r.fractional&&(r.places=0),a.replace(v,function T(o,a,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);const l=a.split("."),i="string"==typeof r.places&&r.places.indexOf(",");let _=r.places;i?_=r.places.substring(i+1):+_>=0||(_=(l[1]||[]).length),r.round<0||(o=Number(o.toFixed(Number(_))));const E=String(Math.abs(o)).split("."),v=E[1]||"";if(l[1]||r.places){i&&(r.places=r.places.substring(0,i));const s=void 0!==r.places?r.places:l[1]&&l[1].lastIndexOf("0")+1;+s>v.length&&(E[1]=v.padEnd(Number(s),"0")),+_<v.length&&(E[1]=v.substr(0,Number(_)))}else E[1]&&E.pop();const A=l[0].replace(",","");let j=A.indexOf("0");-1!==j&&(j=A.length-j,j>E[0].length&&(E[0]=E[0].padStart(j,"0")),A.includes("#")||(E[0]=E[0].substr(E[0].length-j)));let I,b,B=l[0].lastIndexOf(",");if(-1!==B){I=l[0].length-B-1;const s=l[0].substr(0,B);B=s.lastIndexOf(","),-1!==B&&(b=s.length-B-1)}const P=[];for(let s=E[0];s;){const y=s.length-I;P.push(y>0?s.substr(y):s),s=y>0?s.slice(0,y):"",b&&(I=b,b=void 0)}return E[0]=P.reverse().join(r.group||","),E.join(r.decimal||".")}(o,A[0],{decimal:i,group:l,places:r.places,round:r.round}))}(o,l,a)}const p=/[#0,]*[#0](?:\.0*#*)?/;function S(o){const a=D((o=o||{}).locale),r=o.pattern||a.pattern,l=a.group,i=a.decimal;let _=1;if(r.includes("%"))_/=100;else if(r.includes("\u2030"))_/=1e3;else if(r.includes("\xa4"))throw new Error("currency notation not supported");const E=r.split(";");return 1===E.length&&E.push("-"+E[0]),{regexp:O(E,A=>(A="(?:"+(0,n.Qs)(A,".")+")").replace(p,j=>{const I={signed:!1,separator:o.strict?l:[l,""],fractional:o.fractional,decimal:i,exponent:!1},b=j.split(".");let B=o.places;1===b.length&&1!==_&&(b[1]="###"),1===b.length||0===B?I.fractional=!1:(void 0===B&&(B=o.pattern?b[1].lastIndexOf("0")+1:1/0),B&&null==o.fractional&&(I.fractional=!0),!o.places&&+B<b[1].length&&(B+=","+b[1].length),I.places=B);const P=b[0].split(",");return P.length>1&&(I.groupSize=P.pop().length,P.length>1&&(I.groupSize2=P.pop().length)),"("+function R(o){"places"in(o=o||{})||(o.places=1/0),"string"!=typeof o.decimal&&(o.decimal="."),"fractional"in o&&!String(o.places).startsWith("0")||(o.fractional=[!0,!1]),"exponent"in o||(o.exponent=[!0,!1]),"eSigned"in o||(o.eSigned=[!0,!1]);const a=M(o),r=O(o.fractional,i=>{let _="";return i&&0!==o.places&&(_="\\"+o.decimal,o.places===1/0?_="(?:"+_+"\\d+)?":_+="\\d{"+o.places+"}"),_},!0);let l=a+r;return r&&(l="(?:(?:"+l+")|(?:"+r+"))"),l+O(o.exponent,i=>i?"([eE]"+M({signed:o.eSigned})+")":"")}(I)+")"}),!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:l,decimal:i,factor:_}}function x(o,a){const r=S(a),l=new RegExp("^"+r.regexp+"$").exec(o);if(!l)return NaN;let i=l[1];if(!l[1]){if(!l[2])return NaN;i=l[2],r.factor*=-1}return i=i.replaceAll(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(i)*r.factor}function M(o){return"signed"in(o=o||{})||(o.signed=[!0,!1]),"separator"in o?"groupSize"in o||(o.groupSize=3):o.separator="",O(o.signed,a=>a?"[-+]":"",!0)+O(o.separator,a=>{if(!a)return"(?:\\d+)";" "===(a=(0,n.Qs)(a))?a="\\s":"\xa0"===a&&(a="\\s\\xa0");const r=o.groupSize,l=o.groupSize2;if(l){const i="(?:0|[1-9]\\d{0,"+(l-1)+"}(?:["+a+"]\\d{"+l+"})*["+a+"]\\d{"+r+"})";return r-l>0?"(?:"+i+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":i}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+a+"]\\d{"+r+"})*)"},!0)}const O=(o,a,r)=>{if(!(o instanceof Array))return a(o);const l=[];for(let i=0;i<o.length;i++)l.push(a(o[i]));return d(l.join("|"),Boolean(r))},d=(o,a)=>"("+(a?"?:":"")+o+")"},88070:(k,K,e)=>{e.d(K,{E:()=>x,H:()=>S});var n=e(30217),h=e(550),f=e(67831),D=e(84161);const p=(0,e(28093).c)(),c=(0,h.a)(),T=(0,h.a)(),g=(0,h.a)();function S(M,O,d){return(0,D.s)(p,O[0],O[1],1),(0,D.t)(p,p,(0,n.t)(c,d)),0===p[2]?(0,f.s)(M,p[0],p[1]):(0,f.s)(M,p[0]/p[2],p[1]/p[2])}function x(M,O,d){return R(T,O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7]),R(g,d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7]),(0,n.m)(M,(0,n.a)(T,T),g),0!==M[8]&&(M[0]/=M[8],M[1]/=M[8],M[2]/=M[8],M[3]/=M[8],M[4]/=M[8],M[5]/=M[8],M[6]/=M[8],M[7]/=M[8],M[8]/=M[8]),M}function R(M,O,d,o,a,r,l,i,_){(0,n.s)(M,O,o,r,d,a,l,1,1,1),(0,D.s)(p,i,_,1),(0,n.a)(c,M);const[E,v,A]=(0,D.t)(p,p,(0,n.t)(c,c));return(0,n.s)(c,E,0,0,0,v,0,0,0,A),(0,n.m)(M,c,M)}},83274:(k,K,e)=>{e.d(K,{bU:()=>_,fC:()=>A,tp:()=>v,v7:()=>E});const p=new Float64Array(2),c=new Float64Array(2),R="0123456789bcdefghjkmnpqrstuvwxyz";function O(P){return R[P]}function d(P){return(P[0]+P[1])/2}function o(P,s,y){return P[0]=s,P[1]=y,P}function r(P,s){const y=s>d(P);return function a(P,s){const y=d(P),C=s,m=!s;P[0]=m*P[0]+C*y,P[1]=m*y+C*P[1]}(P,y),y}function _(P,s){let y=-90,C=90,m=-180,L=180;for(let w=0;w<s;w++){const N=Math.ceil((w+1)/2),H=Math.floor((w+1)/2),V=1-w%2,$=30-(3*N+2*H),W=30-(2*N+3*H),J=2*V+3*(1-V),Z=(7*V+3*(1-V)<<$&P.geohashX)>>$,F=(3*V+7*(1-V)<<W&P.geohashY)>>W;for(let z=3*V+2*(1-V)-1;z>=0;z--){const Y=(m+L)/2,X=Z&1<<z?1:0;m=(1-X)*m+X*Y,L=(1-X)*Y+X*L}for(let z=J-1;z>=0;z--){const Y=(y+C)/2,X=F&1<<z?1:0;y=(1-X)*y+X*Y,C=(1-X)*Y+X*C}}return[m,y,L,C]}function E(P,s,y,C){C%2&&(C+=1);let m=0,L=0,w=-90,N=90,H=-180,V=180;for(let $=0;$<C/2;$++){for(let W=0;W<5;W++){const G=(H+V)/2,J=y>G?1:0;m|=J<<29-(W+5*$),H=(1-J)*H+J*G,V=(1-J)*G+J*V}for(let W=0;W<5;W++){const G=(w+N)/2,J=s>G?1:0;L|=J<<29-(W+5*$),w=(1-J)*w+J*G,N=(1-J)*G+J*N}}P.geohashX=m,P.geohashY=L}function v(P,s,y,C,m){m%2&&(m+=1);let L=0,w=0,N=-90,H=90,V=-180,$=180;for(let W=0;W<m/2;W++){for(let G=0;G<5;G++){const J=(V+$)/2,U=C>J?1:0;L|=U<<29-(G+5*W),V=(1-U)*V+U*J,$=(1-U)*J+U*$}for(let G=0;G<5;G++){const J=(N+H)/2,U=y>J?1:0;w|=U<<29-(G+5*W),N=(1-U)*N+U*J,H=(1-U)*J+U*H}}P[2*s]=L,P[2*s+1]=w}function A(P,s,y){let C="";const m=o(p,-90,90),L=o(c,-180,180);for(let w=0;w<y;w++){let N=0;w%2?(N|=r(m,P)<<4,N|=r(L,s)<<3,N|=r(m,P)<<2,N|=r(L,s)<<1,N|=r(m,P)<<0):(N|=r(L,s)<<4,N|=r(m,P)<<3,N|=r(L,s)<<2,N|=r(m,P)<<1,N|=r(L,s)<<0),C+=O(N)}return C}},77777:(k,K,e)=>{e.r(K),e.d(K,{hydratedAdapter:()=>p});var n=e(2004),h=e(72854),f=e(72642),D=e(37118),u=e(55214);const p={convertToGEGeometry:function c(M,O){if(null==O)return null;let d="cache"in O?O.cache._geVersion:void 0;return null==d&&(d=M.convertJSONToGeometry(O),"cache"in O&&(O.cache._geVersion=d)),d},exportPoint:function T(M,O,d){const o=M.hasZ(O),a=M.hasM(O),r=new f.Z({x:M.getPointX(O),y:M.getPointY(O),spatialReference:d});return o&&(r.z=M.getPointZ(O)),a&&(r.m=M.getPointM(O)),r.cache._geVersion=O,r},exportPolygon:function g(M,O,d){const o=new D.Z({rings:M.exportPaths(O),hasZ:M.hasZ(O),hasM:M.hasM(O),spatialReference:d});return o.cache._geVersion=O,o},exportPolyline:function S(M,O,d){const o=new u.Z({paths:M.exportPaths(O),hasZ:M.hasZ(O),hasM:M.hasM(O),spatialReference:d});return o.cache._geVersion=O,o},exportMultipoint:function x(M,O,d){const o=new h.Z({hasZ:M.hasZ(O),hasM:M.hasM(O),points:M.exportPoints(O),spatialReference:d});return o.cache._geVersion=O,o},exportExtent:function R(M,O,d){const o=M.hasZ(O),a=M.hasM(O),r=new n.Z({xmin:M.getXMin(O),ymin:M.getYMin(O),xmax:M.getXMax(O),ymax:M.getYMax(O),spatialReference:d});if(o){const l=M.getZExtent(O);r.zmin=l.vmin,r.zmax=l.vmax}if(a){const l=M.getMExtent(O);r.mmin=l.vmin,r.mmax=l.vmax}return r.cache._geVersion=O,r}}},32825:(k,K,e)=>{e.r(K),e.d(K,{buffer:()=>f.v,changeDefaultSpatialReferenceTolerance:()=>f.M,clearDefaultSpatialReferenceTolerance:()=>f.N,clip:()=>f.c,contains:()=>f.b,convexHull:()=>f.l,crosses:()=>f.d,cut:()=>f.a,densify:()=>f.F,difference:()=>f.m,disjoint:()=>f.j,distance:()=>f.f,equals:()=>f.h,extendedSpatialReferenceInfo:()=>f.e,flipHorizontal:()=>f.C,flipVertical:()=>f.D,generalize:()=>f.E,geodesicArea:()=>f.J,geodesicBuffer:()=>f.x,geodesicDensify:()=>f.G,geodesicLength:()=>f.K,intersect:()=>f.p,intersectLinesToPoints:()=>f.L,intersects:()=>f.i,isSimple:()=>f.k,nearestCoordinate:()=>f.y,nearestVertex:()=>f.z,nearestVertices:()=>f.A,offset:()=>f.q,overlaps:()=>f.o,planarArea:()=>f.H,planarLength:()=>f.I,relate:()=>f.r,rotate:()=>f.B,simplify:()=>f.s,symmetricDifference:()=>f.n,touches:()=>f.t,union:()=>f.u,within:()=>f.w}),e(4918),e(15994);var f=e(7006)},36344:(k,K,e)=>{e.d(K,{JK:()=>u,QZ:()=>f,Rq:()=>D,bg:()=>h,mB:()=>p});var n=e(55713);function h(c,T=!1){return c<=n.c8?T?new Array(c).fill(0):new Array(c):new Float64Array(c)}function f(c){return((0,n.kJ)(c)?c.length:c.byteLength/8)<=n.c8?Array.from(c):new Float64Array(c)}function D(c,T,g){return Array.isArray(c)?c.slice(T,T+g):c.subarray(T,T+g)}function u(c,T){for(let g=0;g<T.length;++g)c[g]=T[g];return c}function p(c){return Array.isArray(c)?new Float64Array(c):c}},28036:(k,K,e)=>{e.d(K,{Z:()=>M});var n=e(17626),h=e(79608),f=e(86810),D=e(77712),T=(e(90912),e(85931),e(8314),e(55342)),g=e(76898),S=e(28093),x=e(72642);let R=class extends((0,h.J)(f.wq)){constructor(O){super(O),this.type="local",this.isRelative=!0,this.isGeoreferenced=!1,this.origin=(0,S.c)()}getOriginPoint(O){const[d,o,a]=this.origin;return new x.Z({x:d,y:o,z:a,spatialReference:O})}setOriginFromPoint({x:O,y:d,z:o}){this.origin=(0,S.f)(O,d,o??0)}};(0,n._)([(0,T.J)({local:"local"},{readOnly:!0})],R.prototype,"type",void 0),(0,n._)([(0,D.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],R.prototype,"origin",void 0),R=(0,n._)([(0,g.j)("esri.geometry.support.MeshLocalVertexSpace")],R);const M=R},51470:(k,K,e)=>{e.d(K,{Z:()=>O});var n=e(17626),h=e(77712),p=(e(90912),e(85931),e(8314),e(76898)),c=e(28705),T=e(44917),g=e(552),S=e(99555),x=e(51815),R=e(82706);let M=class extends((0,g.h)((0,S.M)(T.Z))){constructor(d){super(d),this.elevationInfo=null,this.graphics=new x.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(d){return this.graphics.add(d),this}addMany(d){return this.graphics.addMany(d),this}removeAll(){return this.graphics.removeAll(),this}remove(d){this.graphics.remove(d)}removeMany(d){this.graphics.removeMany(d)}on(d,o){return super.on(d,o)}graphicChanged(d){this.emit("graphic-update",d)}};(0,n._)([(0,h.Cb)({type:R.Z})],M.prototype,"elevationInfo",void 0),(0,n._)([(0,h.Cb)((0,c.z)(x.J,"graphics"))],M.prototype,"graphics",void 0),(0,n._)([(0,h.Cb)({type:["show","hide"]})],M.prototype,"listMode",void 0),(0,n._)([(0,h.Cb)()],M.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,h.Cb)({readOnly:!0})],M.prototype,"type",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],M.prototype,"internal",void 0),M=(0,n._)([(0,p.j)("esri.layers.GraphicsLayer")],M);const O=M},28678:(k,K,e)=>{e.r(K),e.d(K,{default:()=>y});var P,n=e(15861),h=e(17626),D=(e(29132),e(84792)),u=e(26584),p=e(99959),c=e(77275),T=e(21726),g=e(77712),M=(e(90912),e(85931),e(8314),e(68653)),O=e(76898),d=e(99433),o=e(44917),a=e(552),r=e(49286),l=e(6647),i=e(30346),_=e(99555),E=e(12585),v=e(72258),A=e(2584),j=e(91309),I=e(2004),b=e(65234),B=e(72642);let s=P=class extends((0,a.h)((0,i.Q)((0,_.M)((0,r.q)((0,l.I)((0,p.R)(o.Z))))))){constructor(...C){super(...C),this.copyright="",this.fullExtent=new I.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,b.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=b.Z.WebMercator,this.subDomains=null,this.tileInfo=new A.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new B.Z({x:-20037508.342787,y:20037508.342787,spatialReference:b.Z.WebMercator}),spatialReference:b.Z.WebMercator,lods:[new v.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new v.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new v.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new v.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new v.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new v.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new v.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new v.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new v.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new v.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new v.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new v.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new v.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new v.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new v.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new v.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new v.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new v.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new v.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new v.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new v.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new v.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new v.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new v.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(C,m){return"string"==typeof C?{urlTemplate:C,...m}:C}load(C){const m=this.loadFromPortal({supportedTypes:["WMTS"]},C).then(()=>{let L="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const w=new T.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&w.authority?.includes("{subDomain}")&&(L="is missing 'subDomains' property")}else L="spatialReference must match tileInfo.spatialReference";else L="is missing the required 'urlTemplate' property value";if(L)throw new u.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${L}`)});return this.addResolvingPromise(m),Promise.resolve(this)}get levelValues(){const C=[];if(!this.tileInfo)return null;for(const m of this.tileInfo.lods)C[m.level]=m.levelValue||m.level;return C}readSpatialReference(C,m){return C||b.Z.fromJSON(m.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const C=[],{urlTemplate:m,subDomains:L}=this,w=new T.R9(m),N=w.scheme?w.scheme+"://":"//",H=N+w.authority+"/",V=w.authority;if(V?.includes("{subDomain}")){if(L&&L.length>0&&V.split(".").length>1)for(const $ of L)C.push(N+V.replaceAll(/\{subDomain\}/gi,$)+"/")}else C.push(H);return C.map(T.xs)}get urlPath(){if(!this.urlTemplate)return null;const C=this.urlTemplate,m=new T.R9(C);return C.substring(((m.scheme?m.scheme+"://":"//")+m.authority+"/").length)}readUrlTemplate(C,m){return C||m.templateUrl}writeUrlTemplate(C,m){(0,T.oC)(C)&&(C="https:"+C),C&&(C=C.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),C=(0,T.Fv)(C)),m.templateUrl=C}fetchTile(C,m,L,w={}){const{signal:N}=w,H=this.getTileUrl(C,m,L),V={responseType:"image",signal:N,query:{...this.refreshParameters}};return(0,D.Z)(H,V).then($=>$.data)}fetchImageBitmapTile(C,m,L,w={}){var N=this;return(0,n.Z)(function*(){const{signal:H}=w;if(N.fetchTile!==P.prototype.fetchTile){const G=yield N.fetchTile(C,m,L,w);return(0,E.V)(G,C,m,L,H)}const V=N.getTileUrl(C,m,L),$={responseType:"blob",signal:H,query:{...N.refreshParameters}},{data:W}=yield(0,D.Z)(V,$);return(0,E.V)(W,C,m,L,H)})()}getTileUrl(C,m,L){const{levelValues:w,tileServers:N,urlPath:H}=this;if(!w||!N||!H)return"";const V=w[C];return N[m%N.length]+(0,c.gx)(H,{level:V,z:V,col:L,x:L,row:m,y:m})}};(0,h._)([(0,g.Cb)({type:String,value:"",json:{write:!0}})],s.prototype,"copyright",void 0),(0,h._)([(0,g.Cb)({type:I.Z,json:{write:!0},nonNullable:!0})],s.prototype,"fullExtent",void 0),(0,h._)([(0,g.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"legendEnabled",void 0),(0,h._)([(0,g.Cb)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,h._)([(0,g.Cb)({json:{read:!0,write:!0}})],s.prototype,"blendMode",void 0),(0,h._)([(0,g.Cb)()],s.prototype,"levelValues",null),(0,h._)([(0,g.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],s.prototype,"isReference",void 0),(0,h._)([(0,g.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],s.prototype,"operationalLayerType",void 0),(0,h._)([(0,g.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"popupEnabled",void 0),(0,h._)([(0,g.Cb)({type:b.Z})],s.prototype,"spatialReference",void 0),(0,h._)([(0,M.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],s.prototype,"readSpatialReference",null),(0,h._)([(0,g.Cb)({type:[String],json:{write:!0}})],s.prototype,"subDomains",void 0),(0,h._)([(0,g.Cb)({type:A.Z,json:{write:!0}})],s.prototype,"tileInfo",void 0),(0,h._)([(0,g.Cb)({readOnly:!0})],s.prototype,"tileServers",null),(0,h._)([(0,g.Cb)({json:{read:!1}})],s.prototype,"type",void 0),(0,h._)([(0,g.Cb)()],s.prototype,"urlPath",null),(0,h._)([(0,g.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],s.prototype,"urlTemplate",void 0),(0,h._)([(0,M.r)("urlTemplate",["urlTemplate","templateUrl"])],s.prototype,"readUrlTemplate",null),(0,h._)([(0,d.c)("urlTemplate",{templateUrl:{type:String}})],s.prototype,"writeUrlTemplate",null),(0,h._)([(0,g.Cb)({type:j.B,json:{write:!0}})],s.prototype,"wmtsInfo",void 0),s=P=(0,h._)([(0,O.j)("esri.layers.WebTileLayer")],s);const y=s},1476:(k,K,e)=>{e.d(K,{S:()=>h,X:()=>n});const n=1;function h(f,D){let u=0;for(const p of D){const c=p.attributes?.[f];"number"==typeof c&&isFinite(c)&&(u=Math.max(u,c))}return u}},20901:(k,K,e)=>{e.r(K),e.d(K,{createConnection:()=>P});var n=e(15861),h=e(17626),D=(e(29132),e(84792)),u=e(26584),p=e(63290),c=e(10699),T=e(21726),R=(e(90912),e(85931),e(8314),e(76898)),M=e(77712),O=e(33696),d=e(61885);let o=class extends d.Z.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new u.Z("stream-connection",this.errorString):null}onFeature(s){this.emit("data-received",s)}onMessage(s){this.emit("message-received",s)}};(0,h._)([(0,M.Cb)({readOnly:!0})],o.prototype,"connectionError",null),o=(0,h._)([(0,R.j)("esri.layers.support.StreamConnection")],o);const a=o;var r,s;(s=r||(r={}))[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSING=2]="CLOSING",s[s.CLOSED=3]="CLOSED";let l=class extends a{constructor(s){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:y,spatialReference:C,sourceSpatialReference:m}=s;this._config=s,this._featureZScaler=(0,O.k)(y,m,C),this._open()}_open(){var s=this;return(0,n.Z)(function*(){yield s._tryCreateWebSocket(),s.destroyed||(yield s._handshake())})()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case r.CONNECTING:case r.OPEN:return"connected";case r.CLOSING:case r.CLOSED:return"disconnected"}}sendMessageToSocket(s){null!=this._websocket?this._websocket.send(JSON.stringify(s)):this._outstandingMessages.push(s)}sendMessageToClient(s){this._onMessage(s)}updateCustomParameters(s){this._config.customParameters=s,null!=this._websocket&&this._websocket.close()}_tryCreateWebSocket(s=this._config.source.path,y=1e3,C=0){var m=this;return(0,n.Z)(function*(){try{if(m.destroyed)return;const L=(0,T.fl)(s,m._config.customParameters??{});m._websocket=yield m._createWebSocket(L),m.notifyChange("connectionStatus")}catch(L){const w=y/1e3;return m._config.maxReconnectionAttempts&&C>=m._config.maxReconnectionAttempts?(p.Z.getLogger(m).error(new u.Z("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void m.destroy()):(p.Z.getLogger(m).error(new u.Z("websocket-connection",`Failed to connect. Attempting to reconnect in ${w}s`,L)),yield(0,c.e4)(y),m._tryCreateWebSocket(s,Math.min(1.5*y,1e3*m._config.maxReconnectionInterval),C+1))}})()}_setWebSocketJSONParseHandler(s){s.onmessage=y=>{try{const C=JSON.parse(y.data);this._onMessage(C)}catch(C){return void p.Z.getLogger(this).error(new u.Z("websocket-connection","Failed to parse message, invalid JSON",{error:C}))}}}_createWebSocket(s){return new Promise((y,C)=>{const m=new WebSocket(s);m.onopen=()=>{if(m.onopen=null,this.destroyed)return m.onclose=null,void m.close();m.onclose=L=>this._onClose(L),m.onerror=L=>this._onError(L),this._setWebSocketJSONParseHandler(m),y(m)},m.onclose=L=>{m.onopen=m.onclose=null,C(L)}})}_handshake(s=1e4){var y=this;return(0,n.Z)(function*(){const C=y._websocket;if(null==C)return;const m=(0,c.hh)(),L=C.onmessage,{filter:w,outFields:N,spatialReference:H}=y._config;return m.timeout(s),C.onmessage=V=>{let $=null;try{$=JSON.parse(V.data)}catch{}$&&"object"==typeof $||(p.Z.getLogger(y).error(new u.Z("websocket-connection","Protocol violation. Handshake failed - malformed message",V.data)),m.reject(),y.destroy()),$.spatialReference?.wkid!==H?.wkid&&(p.Z.getLogger(y).error(new u.Z("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${H.wkid}`,V.data)),m.reject(),y.destroy()),"json"!==$.format&&(p.Z.getLogger(y).error(new u.Z("websocket-connection","Protocol violation. Handshake failed - format is not set",V.data)),m.reject(),y.destroy()),w&&$.filter!==w&&p.Z.getLogger(y).error(new u.Z("websocket-connection","Tried to set filter, but server doesn't support it")),N&&$.outFields!==N&&p.Z.getLogger(y).error(new u.Z("websocket-connection","Tried to set outFields, but server doesn't support it")),C.onmessage=L;for(const W of y._outstandingMessages)C.send(JSON.stringify(W));y._outstandingMessages=[],m.resolve()},C.send(JSON.stringify({filter:w,outFields:N,format:"json",spatialReference:{wkid:H.wkid}})),m.promise})()}_onMessage(s){if(this.onMessage(s),"type"in s)switch(s.type){case"features":case"featureResult":for(const y of s.features)null!=this._featureZScaler&&this._featureZScaler(y.geometry),this.onFeature(y)}}_onError(s){const y="Encountered an error over WebSocket connection";this._set("errorString",y),p.Z.getLogger(this).error("websocket-connection",y)}_onClose(s){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==s.code&&p.Z.getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${s.code}`),this.destroyed||this._open()}};(0,h._)([(0,M.Cb)()],l.prototype,"connectionStatus",null),(0,h._)([(0,M.Cb)()],l.prototype,"errorString",void 0),l=(0,h._)([(0,R.j)("esri.layers.graphics.sources.connections.WebSocketConnection")],l);var i=e(20477),_=e(96854),E=e(91179),v=e(65234);const j={maxQueryDepth:5,maxRecordCountFactor:3};let I=class extends l{constructor(s){super({...j,...s}),this._buddyServicesQuery=null,this._relatedFeatures=null}_open(){var s=this;return(0,n.Z)(function*(){const y=yield s._fetchServiceDefinition(s._config.source);y.timeInfo.trackIdField||p.Z.getLogger(s).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const C=s._fetchWebSocketUrl(y.streamUrls,s._config.spatialReference);s._buddyServicesQuery||(s._buddyServicesQuery=s._queryBuddyServices()),yield s._buddyServicesQuery,yield s._tryCreateWebSocket(C);const{filter:m,outFields:L}=s._config;s.destroyed||s._setFilter(m,L)})()}_onMessage(s){if("attributes"in s){let y;try{y=this._enrich(s),null!=this._featureZScaler&&this._featureZScaler(y.geometry)}catch(C){return void p.Z.getLogger(this).error(new u.Z("geoevent-connection","Failed to parse message",C))}this.onFeature(y)}else this.onMessage(s)}_fetchServiceDefinition(s){var y=this;return(0,n.Z)(function*(){const C={f:"json",...y._config.customParameters},m=(0,D.Z)(s.path,{query:C,responseType:"json"}),L=(yield m).data;return y._serviceDefinition=L,L})()}_fetchWebSocketUrl(s,y){const C=s[0],{urls:m,token:L}=C,w=this._inferWebSocketBaseUrl(m);return(0,T.fl)(`${w}/subscribe`,{outSR:""+y.wkid,token:L})}_inferWebSocketBaseUrl(s){if(1===s.length)return s[0];for(const y of s)if(y.includes("wss"))return y;return p.Z.getLogger(this).error(new u.Z("geoevent-connection","Unable to infer WebSocket url",s)),null}_setFilter(s,y){var C=this;return(0,n.Z)(function*(){const m=C._websocket;if(null==m||null==s&&null==y)return;const L=JSON.stringify({filter:C._serializeFilter(s,y)});let w=!1;const N=(0,c.hh)();return m.onmessage=$=>{const W=JSON.parse($.data);W.filter&&(W.error&&(p.Z.getLogger(C).error(new u.Z("geoevent-connection","Failed to set service filter",W.error)),C._set("errorString",`Could not set service filter - ${W.error}`),N.reject(W.error)),C._setWebSocketJSONParseHandler(m),w=!0,N.resolve())},m.send(L),setTimeout(()=>{w||(C.destroyed||C._websocket!==m||p.Z.getLogger(C).error(new u.Z("geoevent-connection","Server timed out when setting filter")),N.reject())},1e4),N.promise})()}_serializeFilter(s,y){const C={};if(null==s&&null==y)return C;if(s?.geometry)try{const m=(0,E.im)(s.geometry);if("extent"!==m.type)throw new u.Z(`Expected extent but found type ${m.type}`);C.geometry=JSON.stringify(m.shiftCentralMeridian())}catch(m){p.Z.getLogger(this).error(new u.Z("geoevent-connection","Encountered an error when setting connection geometryDefinition",m))}return s?.where&&"1 = 1"!==s.where&&"1=1"!==s.where&&(C.where=s.where),null!=y&&(C.outFields=y.join(",")),C}_enrich(s){if(!this._relatedFeatures)return s;const m=this._relatedFeatures.get(s.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!m)return p.Z.getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",s),s;const{attributes:L,geometry:w}=m;for(const N in L)s.attributes[N]=L[N];return w&&(s.geometry=w),s.geometry||s.centroid||p.Z.getLogger(this).error(new u.Z("geoevent-connection","Found malformed feature - no geometry found",s)),s}_queryBuddyServices(){var s=this;return(0,n.Z)(function*(){try{const{relatedFeatures:y,keepLatestArchive:C}=s._serviceDefinition,m=s._queryRelatedFeatures(y),L=s._queryArchive(C);yield m;const w=yield L;if(!w)return;for(const N of w.features)s.onFeature(s._enrich(N))}catch(y){p.Z.getLogger(s).error(new u.Z("geoevent-connection","Encountered an error when querying buddy services",{error:y}))}})()}_queryRelatedFeatures(s){var y=this;return(0,n.Z)(function*(){if(!s)return;const C=yield y._queryBuddy(s.featuresUrl);y._addRelatedFeatures(C)})()}_queryArchive(s){var y=this;return(0,n.Z)(function*(){if(s)return y._queryBuddy(s.featuresUrl)})()}_queryBuddy(s){var y=this;return(0,n.Z)(function*(){const C=new((yield Promise.all([e.e(4199),e.e(5366),e.e(4430),e.e(415)]).then(e.bind(e,80415))).default)({url:s}),{capabilities:m}=yield C.load(),L=m.query.supportsMaxRecordCountFactor,w=m.query.supportsPagination,N=m.query.supportsCentroid,H=y._config.maxRecordCountFactor,V=C.capabilities.query.maxRecordCount,$=L?V*H:V,W=new _.Z;if(W.outFields=y._config.outFields??["*"],W.where=y._config.filter?.where??"1=1",W.returnGeometry=!0,W.returnExceededLimitFeatures=!0,W.outSpatialReference=v.Z.fromJSON(y._config.spatialReference),N&&(W.returnCentroid=!0),L&&(W.maxRecordCountFactor=H),w)return W.num=$,C.destroy(),y._queryPages(s,W);const G=yield(0,i.JT)(s,W,y._config.sourceSpatialReference);return C.destroy(),G.data})()}_queryPages(s,y,C=[],m=0){var L=this;return(0,n.Z)(function*(){y.start=null!=y.num?m*y.num:null;const{data:w}=yield(0,i.JT)(s,y,L._config.sourceSpatialReference);return w.exceededTransferLimit&&m<(L._config.maxQueryDepth??0)?(w.features.forEach(N=>C.push(N)),L._queryPages(s,y,C,m+1)):(C.forEach(N=>w.features.push(N)),w)})()}_addRelatedFeatures(s){const y=new Map,C=s.features,m=this._serviceDefinition.relatedFeatures.joinField;for(const L of C)y.set(L.attributes[m],L);this._relatedFeatures=y}};I=(0,h._)([(0,R.j)("esri.layers.graphics.sources.connections.GeoEventConnection")],I);const b=I;let B=class extends a{constructor(s){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:y,spatialReference:C,sourceSpatialReference:m}=s;this._featureZScaler=(0,O.k)(y,m,C)}updateCustomParameters(s){}sendMessageToSocket(s){}sendMessageToClient(s){if("type"in s)switch(s.type){case"features":case"featureResult":for(const y of s.features)null!=this._featureZScaler&&this._featureZScaler(y.geometry),this.onFeature(y)}this.onMessage(s)}};function P(s,y,C,m,L,w,N,H){const V={source:s,sourceSpatialReference:y,spatialReference:C,geometryType:m,filter:L,maxReconnectionAttempts:w,maxReconnectionInterval:N,customParameters:H};return s?s.path.startsWith("wss://")||s.path.startsWith("ws://")?new l(V):new b(V):new B(V)}(0,h._)([(0,M.Cb)()],B.prototype,"connectionStatus",void 0),(0,h._)([(0,M.Cb)()],B.prototype,"errorString",void 0),B=(0,h._)([(0,R.j)("esri.layers.support.ClientSideConnection")],B)},35775:(k,K,e)=>{e.d(K,{O0:()=>x,av:()=>c,b:()=>r,d1:()=>g,og:()=>d});var n=e(15861),h=e(95324),f=e(37053),D=e(90194);class u{constructor(){this.code=null,this.description=null}}class p{constructor(_){this.error=new u,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=_}}function c(i){return new p(i)}class T{constructor(_){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=_}}function g(i){return new T(i)}const S=new Set;function x(i,_,E,v=!1){S.clear();for(const A in E){const j=i.get(A);if(!j)continue;const I=M(j,E[A]);if(S.add(j.name),j&&(v||j.editable)){const b=(0,D.Qc)(j,I);if(b)return c((0,D.vP)(b,j,I));_[j.name]=I}}for(const A of i?.requiredFields??[])if(!S.has(A.name))return c(`missing required field "${A.name}"`);return null}function M(i,_){let E=_;return(0,D.H7)(i)&&"string"==typeof _?E=parseFloat(_):(0,D.qN)(i)&&null!=_&&"string"!=typeof _?E=String(_):(0,D.y2)(i)&&"string"==typeof _&&(E=(0,h.sG)(_)),(0,D.Pz)(E)}let O;function d(i,_){if(!i||!(0,f.JY)(_))return i;if("rings"in i||"paths"in i){if(null==O)throw new TypeError("geometry engine not loaded");return O.simplify(_,i)}return i}function a(){return(a=(0,n.Z)(function*(){return null==O&&(O=yield Promise.all([e.e(4918),e.e(8592)]).then(e.bind(e,32825))),O})).apply(this,arguments)}function r(i,_){return l.apply(this,arguments)}function l(){return l=(0,n.Z)(function*(i,_){!(0,f.JY)(i)||"esriGeometryPolygon"!==_&&"esriGeometryPolyline"!==_||(yield function o(){return a.apply(this,arguments)}())}),l.apply(this,arguments)}},22825:(k,K,e)=>{e.d(K,{A:()=>h});const n=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function h(f){return null!=f&&n.some(([D,u])=>f>=D&&f<=u)}},82674:(k,K,e)=>{e.d(K,{DC:()=>g,Nw:()=>a,UY:()=>l,Ym:()=>O,a1:()=>E,jX:()=>i,po:()=>A,uT:()=>d,xG:()=>R});var n=e(15861),h=e(26584),f=e(52489),D=e(31099),u=e(55463),p=e(88755),c=e(37281),T=e(53543);function g(I,b,B){const P=B(I);if(!P.isValid)throw new h.Z(`${b}:invalid-parameters`,P.errorMessage,{layer:I})}function S(I){return x.apply(this,arguments)}function x(){return(x=(0,n.Z)(function*(I){const{layer:b,errorNamePrefix:B,validateLayer:P}=I;yield b.load(),g(b,B,P)})).apply(this,arguments)}function R(I,b){return`Layer (title: ${I.title}, id: ${I.id}) of type '${I.declaredClass}' ${b}`}function M(I){const{item:b,itemType:B,errorNamePrefix:P,layer:s,validateItem:y}=I;if((0,T.w)(b),b.type!==B)throw new h.Z(`${P}:portal-item-wrong-type`,`Portal item type should be "${B}"`,{item:b,layer:s});if(y){const C=y(b);if(!C.isValid)throw new h.Z(`${P}:invalid-parameters`,C.errorMessage,{layer:s})}}function O(I){const{layer:b,errorNamePrefix:B}=I,{portalItem:P}=b;if(!P)throw new h.Z(`${B}:portal-item-not-set`,R(b,"requires the portalItem property to be set"));if(!P.loaded)throw new h.Z(`${B}:portal-item-not-loaded`,R(b,"cannot be saved to a portal item that does not exist or is inaccessible"));M({...I,item:P})}function d(I){const{newItem:b,itemType:B}=I;let P=u.default.from(b);return P.id&&(P=P.clone(),P.id=null),P.type??=B,P.portal??=D.Z.getDefault(),M({...I,item:P}),P}function a(I,b,B){return r.apply(this,arguments)}function r(){return(r=(0,n.Z)(function*(I,b,B){"beforeSave"in I&&"function"==typeof I.beforeSave&&(yield I.beforeSave());const P=I.write({},b);return yield Promise.all(b.resources?.pendingOperations??[]),function o(I,b){let B=(I.messages??[]).filter(({type:P})=>"error"===P).map(({name:P,message:s,details:y})=>new h.Z(P,s,y));if(I.blockedRelativeUrls&&(B=B.concat(I.blockedRelativeUrls.map(P=>new h.Z("url:unsupported",`Relative url '${P}' is not supported`)))),b?.ignoreUnsupported&&(B=B.filter(({name:P})=>"layer:unsupported"!==P&&"symbol:unsupported"!==P&&"symbol-layer:unsupported"!==P&&"property:unsupported"!==P&&"url:unsupported"!==P)),B.length>0)throw new h.Z("layer-write:unsupported","Failed to save layer due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:B})}(b,B),P})).apply(this,arguments)}function l(I){(0,c.qj)(I,c.Kz.JSAPI),I.typeKeywords&&(I.typeKeywords=I.typeKeywords.filter((b,B,P)=>P.indexOf(b)===B))}function i(I,b,B){return _.apply(this,arguments)}function _(){return(_=(0,n.Z)(function*(I,b,B){const P=I.portal;yield P.signIn(),yield P.user?.addItem({item:I,data:b,folder:B?.folder})})).apply(this,arguments)}function E(I,b){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(function*(I,b){const{layer:B,createItemData:P,createJSONContext:s,saveResources:y}=I;yield S(I),O(I);const C=B.portalItem,m=s?s(C):(0,p.Yv)(C),L=yield a(B,m,b),w=yield P({layer:B,layerJSON:L},C);return l(C),yield C.update({data:w}),(0,f.D)(m),yield y?.(C,m),C})).apply(this,arguments)}function A(I,b){return j.apply(this,arguments)}function j(){return(j=(0,n.Z)(function*(I,b){const{layer:B,createItemData:P,createJSONContext:s,setItemProperties:y,saveResources:C}=I;yield S(I);const m=d(I),L=s?s(m):(0,p.Yv)(m),w=yield a(B,L,b),N=yield P({layer:B,layerJSON:w},m);return yield y(B,m),l(m),yield i(m,N,b),B.portalItem=m,(0,f.D)(L),yield C?.(m,L),m})).apply(this,arguments)}},51920:(k,K,e)=>{e.d(K,{j:()=>g});var n=e(17626),h=e(83761),f=e(77712),c=(e(90912),e(85931),e(8314),e(76898));const T={visible:"visibleSublayers"};let g=class extends h.Z{constructor(S){super(S),this.scale=0}set layer(S){this._get("layer")!==S&&(this._set("layer",S),this.removeHandles("layer"),S&&this.addHandles([S.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),S.on("wms-sublayer-update",x=>this.notifyChange(T[x.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:S})=>S).map(({name:S})=>S).join()}get version(){this.commitProperty("layers");const S=this.layer;return S&&S.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:S,scale:x}=this,R=S?.sublayers,M=[],O=d=>{const{minScale:o,maxScale:a,sublayers:r,visible:l}=d;l&&(0===x||(0===o||x<=o)&&(0===a||x>=a))&&(r?r.forEach(O):M.push(d))};return R?.forEach(O),M}toJSON(){const{layer:S,layers:x}=this,{imageFormat:R,imageTransparency:M,version:O}=S;return{format:R,request:"GetMap",service:"WMS",styles:"",transparent:M?"TRUE":"FALSE",version:O,layers:x}}};(0,n._)([(0,f.Cb)()],g.prototype,"layer",null),(0,n._)([(0,f.Cb)({readOnly:!0})],g.prototype,"layers",null),(0,n._)([(0,f.Cb)({type:Number})],g.prototype,"scale",void 0),(0,n._)([(0,f.Cb)({readOnly:!0})],g.prototype,"version",null),(0,n._)([(0,f.Cb)({readOnly:!0})],g.prototype,"visibleSublayers",null),g=(0,n._)([(0,c.j)("esri.layers.support.ExportWMSImageParameters")],g)},17732:(k,K,e)=>{e.d(K,{L:()=>R});var n=e(17626),h=e(83761),f=e(77712),c=(e(90912),e(85931),e(8314),e(76898)),T=e(37118),g=e(5464),S=e(65401),x=e(65629);let R=class extends h.Z{constructor(M){super(M)}get bounds(){const M=this.coords;return null==M?.extent?null:(0,S.oJ)(M.extent)}get coords(){const M=this.element.georeference?.coords;return(0,g.projectOrLoad)(M,this.spatialReference).geometry}get normalizedCoords(){return T.Z.fromJSON((0,x.Ui)(this.coords))}get normalizedBounds(){const M=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=M?(0,S.oJ)(M):null}};(0,n._)([(0,f.Cb)()],R.prototype,"spatialReference",void 0),(0,n._)([(0,f.Cb)()],R.prototype,"element",void 0),(0,n._)([(0,f.Cb)()],R.prototype,"bounds",null),(0,n._)([(0,f.Cb)()],R.prototype,"coords",null),(0,n._)([(0,f.Cb)()],R.prototype,"normalizedCoords",null),(0,n._)([(0,f.Cb)()],R.prototype,"normalizedBounds",null),R=(0,n._)([(0,c.j)("esri.layers.support.MediaElementView")],R)},91309:(k,K,e)=>{e.d(K,{B:()=>T});var c,n=e(17626),h=e(86810),f=e(58817),D=e(77712),p=(e(90912),e(76898));let T=c=class extends h.wq{constructor(g){super(g)}clone(){return new c({customLayerParameters:(0,f.d9)(this.customLayerParameters),customParameters:(0,f.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,n._)([(0,D.Cb)({json:{type:Object,write:!0}})],T.prototype,"customLayerParameters",void 0),(0,n._)([(0,D.Cb)({json:{type:Object,write:!0}})],T.prototype,"customParameters",void 0),(0,n._)([(0,D.Cb)({type:String,json:{write:!0}})],T.prototype,"layerIdentifier",void 0),(0,n._)([(0,D.Cb)({type:String,json:{write:!0}})],T.prototype,"tileMatrixSet",void 0),(0,n._)([(0,D.Cb)({type:String,json:{write:!0}})],T.prototype,"url",void 0),T=c=(0,n._)([(0,p.j)("esri.layer.support.WMTSLayerInfo")],T)},17196:(k,K,e)=>{e.d(K,{V:()=>f});var n=e(15861),h=e(45205);function f(x,R){return D.apply(this,arguments)}function D(){return(D=(0,n.Z)(function*(x,R){const M=yield(0,h.T)(x,R);S(M),c(M);const O={serviceJSON:M};if((M.currentVersion??0)<10.5)return O;const d=yield(0,h.T)(x+"/layers",R);return S(d),c(d),O.layersJSON={layers:d.layers,tables:d.tables},O})).apply(this,arguments)}function u(x){return"Feature Layer"===x.type||"Oriented Imagery Layer"===x.type}function p(x){return"Table"===x.type}function c(x){x.layers=x.layers?.filter(u),x.tables=x.tables?.filter(p)}function T(x){x.type||="Feature Layer"}function g(x){x.type||="Table"}function S(x){x.layers?.forEach(T),x.tables?.forEach(g)}},98686:(k,K,e)=>{e.d(K,{CS:()=>d,Cw:()=>O,Yu:()=>i,j5:()=>o,lm:()=>E});var n=e(15861),h=e(59318),f=e(24263),D=e(73281),u=e(84792),p=e(58817),c=e(21726),T=e(65234),g=e(5548),S=e(32442),x=e(33474),R=e(17253);const M={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function O(v){const A=v.folders||[],j=A.slice(),I=new Map,b=new Map,B=new Map,P=new Map,s=new Map,y={esriGeometryPoint:b,esriGeometryPolyline:B,esriGeometryPolygon:P};(v.featureCollection?.layers||[]).forEach(m=>{const L=(0,p.d9)(m);L.featureSet.features=[];const w=m.featureSet.geometryType;I.set(w,L);const N=m.layerDefinition.objectIdField;"esriGeometryPoint"===w?a(b,N,m.featureSet.features):"esriGeometryPolyline"===w?a(B,N,m.featureSet.features):"esriGeometryPolygon"===w&&a(P,N,m.featureSet.features)}),v.groundOverlays&&v.groundOverlays.forEach(m=>{s.set(m.id,m)}),A.forEach(m=>{m.networkLinkIds.forEach(L=>{const w=function l(v,A,j){const I=function r(v,A){let j;return A.some(I=>I.id===v&&(j=I,!0)),j}(v,j);return I&&(I.parentFolderId=A,I.networkLink=I),I}(L,m.id,v.networkLinks);w&&j.push(w)})}),j.forEach(m=>{if(m.featureInfos){m.points=(0,p.d9)(I.get("esriGeometryPoint")),m.polylines=(0,p.d9)(I.get("esriGeometryPolyline")),m.polygons=(0,p.d9)(I.get("esriGeometryPolygon")),m.mapImages=[];for(const L of m.featureInfos)switch(L.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const w=y[L.type].get(L.id);w&&m[M[L.type]]?.featureSet.features.push(w);break}case"GroundOverlay":{const w=s.get(L.id);w&&m.mapImages.push(w);break}}m.fullExtent=E([m])}});const C=E(j);return{folders:A,sublayers:j,extent:C}}function d(v,A,j,I){const b=f.id?.findCredential(v);return v=(0,c.fl)(v,{token:b?.token}),(0,u.Z)(h.Z.kmlServiceUrl,{query:{url:v,model:"simple",folders:"",refresh:0!==j||void 0,outSR:JSON.stringify(A)},responseType:"json",signal:I})}function o(v,A,j=null,I=[]){const b=[],B={},P=A.sublayers,s=new Set(A.folders.map(y=>y.id));return P.forEach(y=>{const C=new v;if(j?C.read(y,j):C.read(y),I.length&&s.has(C.id)&&(C.visible=I.includes(C.id)),B[y.id]=C,null!=y.parentFolderId&&-1!==y.parentFolderId){const m=B[y.parentFolderId];m.sublayers||(m.sublayers=[]),m.sublayers?.unshift(C)}else b.unshift(C)}),b}function a(v,A,j){j.forEach(I=>{v.set(I.attributes[A],I)})}function i(v){return _.apply(this,arguments)}function _(){return(_=(0,n.Z)(function*(v){const A=R.Z.fromJSON(v.featureSet).features,I=(0,x.i)(v.layerDefinition.drawingInfo.renderer),b=D.Z.fromJSON(v.popupInfo),B=[];for(const P of A){const s=yield I.getSymbolAsync(P);P.symbol=s,P.popupTemplate=b,P.visible=!0,B.push(P)}return B})).apply(this,arguments)}function E(v){const A=(0,g.Ue)(g.G_),j=(0,g.Ue)(g.G_);for(const I of v){if(I.polygons?.featureSet?.features)for(const b of I.polygons.featureSet.features)(0,S.Yg)(A,b.geometry),(0,g.TC)(j,A);if(I.polylines?.featureSet?.features)for(const b of I.polylines.featureSet.features)(0,S.Yg)(A,b.geometry),(0,g.TC)(j,A);if(I.points?.featureSet?.features)for(const b of I.points.featureSet.features)(0,S.Yg)(A,b.geometry),(0,g.TC)(j,A);if(I.mapImages)for(const b of I.mapImages)(0,S.Yg)(A,b.extent),(0,g.TC)(j,A)}return(0,g.fS)(j,g.G_)?void 0:{xmin:j[0],ymin:j[1],zmin:j[2],xmax:j[3],ymax:j[4],zmax:j[5],spatialReference:T.Z.WGS84}}},71074:(k,K,e)=>{e.r(K),e.d(K,{populateGroupLayer:()=>L,populateOperationalLayers:()=>M});var n=e(15861),h=e(74333),D=(e(8314),e(27369)),u=e(30164),p=e(55463);function S(W,G){return!(!W.layerType||"ArcGISFeatureLayer"!==W.layerType)&&W.featureCollectionType===G}var x=e(7534),R=e(39683);function M(W,G,J){return O.apply(this,arguments)}function O(){return(O=(0,n.Z)(function*(W,G,J){if(!G)return;const U=[];for(const F of G)U.push(j(F,J));const Z=yield Promise.allSettled(U);for(const F of Z)"rejected"===F.status||F.value&&W.add(F.value)})).apply(this,arguments)}const d={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},o={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},a={ArcGISFeatureLayer:"FeatureLayer"},r={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},l={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},i={ArcGISFeatureLayer:"FeatureLayer"},_={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},E={...l,LinkChartLayer:"LinkChartLayer"},v={...i},A={..._};function j(W,G){return I.apply(this,arguments)}function I(){return I=(0,n.Z)(function*(W,G){return function b(W,G,J){return B.apply(this,arguments)}(yield function P(W,G){return s.apply(this,arguments)}(W,G),W,G)}),I.apply(this,arguments)}function B(){return B=(0,n.Z)(function*(W,G,J){const U=new W;return U.read(G,J.context),"group"===U.type&&("GroupLayer"===G.layerType?yield L(U,G,J):C(G)?function N(W,G,J){G.itemId&&(W.portalItem=new p.default({id:G.itemId,portal:J?.portal}),W.when(()=>{const U=Z=>{const F=Z.layerId;$(Z,W,G,F,J);const z=G.featureCollection?.layers?.[F];z&&Z.read(z,J)};W.layers?.forEach(U),W.tables?.forEach(U)}))}(U,G,J.context):y(G)&&(yield function H(W,G,J){return V.apply(this,arguments)}(U,G,J.context))),yield(0,R.y)(U,J.context),U}),B.apply(this,arguments)}function s(){return(s=(0,n.Z)(function*(W,G){const J=G.context,U=function m(W){let G;switch(W.origin){case"web-scene":switch(W.layerContainerType){case"basemap":G=r;break;case"ground":G=o;break;case"tables":G=a;break;default:G=d}break;case"link-chart":switch(W.layerContainerType){case"basemap":G=A;break;case"tables":G=v;break;default:G=E}break;default:switch(W.layerContainerType){case"basemap":G=_;break;case"tables":G=i;break;default:G=l}}return G}(J);let Z=W.layerType||W.type;!Z&&G?.defaultLayerType&&(Z=G.defaultLayerType);const F=U[Z];let z=F?u.T[F]:u.T.UnknownLayer;if(C(W)){const Y=J?.portal;if(W.itemId){const X=new p.default({id:W.itemId,portal:Y});yield X.load();const Q=(yield(0,x.selectLayerClassPath)(X,new D.L)).className||"UnknownLayer";z=u.T[Q]}}else"ArcGISFeatureLayer"===Z?function c(W){return S(W,"notes")}(W)||function T(W){return S(W,"markup")}(W)?z=u.T.MapNotesLayer:function g(W){return S(W,"route")}(W)?z=u.T.RouteLayer:y(W)&&(z=u.T.GroupLayer):W.wmtsInfo?.url&&W.wmtsInfo.layerIdentifier?z=u.T.WMTSLayer:"WFS"===Z&&"2.0.0"!==W.wfsInfo?.version&&(z=u.T.UnsupportedLayer);return z()})).apply(this,arguments)}function y(W){return"ArcGISFeatureLayer"===W.layerType&&!C(W)&&(W.featureCollection?.layers?.length??0)>1}function C(W){return"Feature Collection"===W.type}function L(W,G,J){return w.apply(this,arguments)}function w(){return(w=(0,n.Z)(function*(W,G,J){const U=new h.Z,Z=M(U,Array.isArray(G.layers)?G.layers:[],J);try{try{if(yield Z,"group"===W.type)return W.layers.addMany(U),W}catch(F){W.destroy();for(const z of U)z.destroy();throw F}}catch(F){throw F}})).apply(this,arguments)}function V(){return(V=(0,n.Z)(function*(W,G,J){const U=u.T.FeatureLayer,Z=yield U(),F=G.featureCollection,z=F?.showLegend,Y=F?.layers?.map((X,Q)=>{const q=new Z;q.read(X,J);const ee={...J,ignoreDefaults:!0};return $(q,W,G,Q,ee),null!=z&&q.read({showLegend:z},ee),q});W.layers.addMany(Y??[])})).apply(this,arguments)}function $(W,G,J,U,Z){W.read({id:`${G.id}-sublayer-${U}`,visibility:J.visibleLayers?.includes(U)??!0},Z)}},61068:(k,K,e)=>{e.d(K,{OE:()=>x,Gc:()=>O,Qg:()=>R,Rq:()=>c,gX:()=>M,z2:()=>T,ET:()=>g,Vx:()=>o}),e(29132);var f=e(28594),D=e(72642);const u=new Map,p=new class h{constructor(r=15e3,l=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=r,this._interval=Math.min(r,l)}decreaseRefCount(r,l){const i=r+"/"+l,_=this._cachedBlocks;if(_.has(i)){const E=_.get(i);return E.refCount--,E.refCount<=0&&(_.delete(i),E.controller&&E.controller.abort()),E.refCount}return 0}getBlock(r,l){const i=r+"/"+l,_=this._cachedBlocks;if(_.has(i)){const E=_.get(i);return E.ts=Date.now(),E.refCount++,_.delete(i),_.set(i,E),E.block}return null}putBlock(r,l,i,_){const E=this._cachedBlocks,v=r+"/"+l;if(E.has(v)){const A=E.get(v);A.ts=Date.now(),A.refCount++}else E.set(v,{block:i,ts:Date.now(),refCount:1,controller:_});this._trim(),this._updateTimer()}deleteBlock(r,l){const i=this._cachedBlocks,_=r+"/"+l;i.has(_)&&i.delete(_)}updateMaxSize(r){this._size=r,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const r=this._cachedBlocks;this._timer=setInterval(()=>{const l=Array.from(r),i=Date.now();for(let _=0;_<l.length&&l[_][1].ts<=i-this._duration;_++)r.delete(l[_][0]);0===r.size&&this._clearTimer()},this._interval)}_trim(){const r=this._cachedBlocks;if(-1===this._size||this._size>=r.size)return;const l=Array.from(r);for(let i=0;i<l.length-this._size;i++)r.delete(l[i][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function c(a,r){return null==r?a:`${a}?sliceId=${r}`}function T(a,r){const l={extent:null,rasterInfo:r,cache:new Map},i=u.get(a);return i?(i.push(l),i.length-1):(u.set(a,[l]),0)}function g(a,r){const l=u.get(a);l&&(l[r]=null,l.some(i=>null!=i)||u.delete(a))}function x(a,r,l){const i=u.get(a);if(!i)return null==r?p.decreaseRefCount(a,l):0;if(null==r||null==i[r])return p.decreaseRefCount(a,l);const _=i[r]?.cache,E=_?.get(l);if(_&&E){if(E.refCount--,0===E.refCount){_.delete(l);for(let v=0;v<i.length;v++)i[v]?.cache.delete(l);E.controller&&E.controller.abort()}return E.refCount}return 0}function R(a,r,l){const i=u.get(a);if(!i)return null==r?p.getBlock(a,l):null;if(null==r||null==i[r]){for(let E=0;E<i.length;E++){const v=i[E]?.cache.get(l);if(v)return v.refCount++,v.block}return p.getBlock(a,l)}const _=i[r]?.cache.get(l);if(_)return _.refCount++,_.block;for(let E=0;E<i.length;E++){if(E===r||!i[E])continue;const v=i[E]?.cache,A=v?.get(l);if(v&&A)return A.refCount++,v.set(l,A),A.block}return null}function M(a,r,l,i,_=null){const E=u.get(a);if(!E)return void(null==r&&p.putBlock(a,l,i,_));if(null==r||null==E[r])return void p.putBlock(a,l,i,_);const v={refCount:1,block:i,isResolved:!1,isRejected:!1,controller:_};i.then(()=>v.isResolved=!0).catch(()=>v.isRejected=!0),E[r]?.cache.set(l,v)}function O(a,r,l){const i=u.get(a);i?null!=r&&null!=i[r]?i[r]?.cache.delete(l):p.deleteBlock(a,l):null==r&&p.deleteBlock(a,l)}function o(a,r,l,i,_,E,v=null){const A=function d(a,r){const l=u.get(a);return l?l[r]??null:null}(a,r);if(!A)return;const j=A.extent,{cache:I,rasterInfo:b}=A;if(j&&j.xmin===l.xmin&&j.xmax===l.xmax&&j.ymin===l.ymin&&j.ymax===l.ymax)return;i=i??0;const B=l.clone().normalize(),{spatialReference:P,transform:s}=b,y=new Set;for(let C=0;C<B.length;C++){const m=B[C];if(m.xmax-m.xmin<=i||m.ymax-m.ymin<=i)continue;let L=(0,f.tB)(m,P,v);null!=s&&(L=s.inverseTransform(L));const w=new D.Z({x:i,y:i,spatialReference:m.spatialReference});if(null==_&&!(_=(0,f.VO)(w,P,m,v)))return;const{pyramidLevel:N,pyramidResolution:H,excessiveReading:V}=(0,f.kr)(_,b,E||"closest");if(V)return;const{storageInfo:$}=b,{origin:W}=$,G={x:Math.max(0,Math.floor((L.xmin-W.x)/H.x)),y:Math.max(0,Math.floor((W.y-L.ymax)/H.y))},J=Math.ceil((L.xmax-L.xmin)/H.x-.1),U=Math.ceil((L.ymax-L.ymin)/H.y-.1),Z=N>0?$.pyramidBlockWidth:$.blockWidth,F=N>0?$.pyramidBlockHeight:$.blockHeight,z=1,Y=Math.max(0,Math.floor(G.x/Z)-z),X=Math.max(0,Math.floor(G.y/F)-z),Q=Math.floor((G.x+J-1)/Z)+z,q=Math.floor((G.y+U-1)/F)+z;for(let ee=X;ee<=q;ee++)for(let te=Y;te<=Q;te++)y.add(`${N}/${ee}/${te}`)}I.forEach((C,m)=>{if(!y.has(m)){const L=I.get(m);(null==L||L.isResolved||L.isRejected)&&I.delete(m)}}),A.extent={xmin:l.xmin,ymin:l.ymin,xmax:l.xmax,ymax:l.ymax}}},88755:(k,K,e)=>{e.d(K,{M4:()=>p,Yv:()=>D,ht:()=>f,wk:()=>u});var n=e(21726),h=e(31099);function f(c){return{origin:"portal-item",url:(0,n.mN)(c.itemUrl),portal:c.portal||h.Z.getDefault(),portalItem:c,readResourcePaths:[]}}function D(c){const T=(0,n.mN)(c.itemUrl);return{origin:"portal-item",messages:[],writtenProperties:[],url:T,portal:c.portal||h.Z.getDefault(),portalItem:c,verifyItemRelativeUrls:T?{rootPath:T.path,writtenUrls:[]}:null,blockedRelativeUrls:[]}}function u(c){return{origin:"web-map",url:(0,n.mN)(c.itemUrl),portal:c.portal||h.Z.getDefault(),portalItem:c,readResourcePaths:[]}}function p(c,T){const g=(0,n.mN)(c.itemUrl);return{origin:"web-map",messages:[],writtenProperties:[],url:g,portal:c.portal||h.Z.getDefault(),portalItem:c,initiator:T,verifyItemRelativeUrls:g?{rootPath:g.path,writtenUrls:[]}:null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}}},61556:(k,K,e)=>{e.d(K,{B:()=>h});var n=e(21726);function h(g){return u[function f(g){return"json"===g.type?"application/json":"blob"===g.type?g.blob.type:function D(g){const S=(0,n.Ml)(g);return T[S]||p}(g.url)}(g)]||c}const u={},p="text/plain",c=u[p],T={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const g in T)u[T[g]]=g},53776:(k,K,e)=>{e.d(K,{Z:()=>o});var x,n=e(17626),h=e(58817),f=e(77712),D=e(90912),u=e(55342),p=e(76898),c=e(80573),T=e(10914),g=e(91558),S=e(86810);let R=x=class extends S.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new x({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,h.d9)(this.color)})}};(0,n._)([(0,f.Cb)({type:String,json:{write:!0}})],R.prototype,"description",void 0),(0,n._)([(0,f.Cb)({type:String,json:{write:!0}})],R.prototype,"label",void 0),(0,n._)([(0,f.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],R.prototype,"minValue",void 0),(0,n._)([(0,f.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],R.prototype,"maxValue",void 0),(0,n._)([(0,f.Cb)({type:g.Z,json:{type:[D.z8],write:!0}})],R.prototype,"color",void 0),R=x=(0,n._)([(0,p.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],R);const M=R;var O;let d=O=class extends c.Z{constructor(a){super(a),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new O({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,h.d9)(this.colorClassBreakInfos),legendOptions:(0,h.d9)(this.legendOptions)})}};(0,n._)([(0,u.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],d.prototype,"type",void 0),(0,n._)([(0,f.Cb)({json:{write:!0},type:String})],d.prototype,"field",void 0),(0,n._)([(0,f.Cb)({type:T.I,json:{write:!0}})],d.prototype,"legendOptions",void 0),(0,n._)([(0,f.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],d.prototype,"fieldTransformType",void 0),(0,n._)([(0,f.Cb)({type:[M],json:{write:!0}})],d.prototype,"colorClassBreakInfos",void 0),d=O=(0,n._)([(0,p.j)("esri.renderers.PointCloudClassBreaksRenderer")],d);const o=d},80573:(k,K,e)=>{e.d(K,{Z:()=>I});var S,n=e(17626),h=e(2076),f=e(86810),D=e(58817),u=e(77712),c=(e(90912),e(76898));e(85931),e(8314);let x=S=class extends f.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new S({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,n._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"minValue",void 0),(0,n._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"maxValue",void 0),x=S=(0,n._)([(0,c.j)("esri.renderers.support.pointCloud.ColorModulation")],x);const R=x,M=new h.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let O=class extends f.wq{};(0,n._)([(0,u.Cb)({type:M.apiValues,readOnly:!0,nonNullable:!0,json:{type:M.jsonValues,read:!1,write:M.write}})],O.prototype,"type",void 0),O=(0,n._)([(0,c.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],O);const d=O;var a,o=e(55342);let r=a=class extends d{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new a({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,n._)([(0,o.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],r.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"size",void 0),(0,n._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],r.prototype,"useRealWorldSymbolSizes",void 0),r=a=(0,n._)([(0,c.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],r);const l=r;var i;let _=i=class extends d{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new i({scaleFactor:this.scaleFactor})}};(0,n._)([(0,o.J)({pointCloudSplatAlgorithm:"splat"})],_.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],_.prototype,"scaleFactor",void 0),_=i=(0,n._)([(0,c.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],_);const v={key:"type",base:d,typeMap:{"fixed-size":l,splat:_}},A=(0,h.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let j=class extends f.wq{constructor(b){super(b),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,D.d9)(this.pointSizeAlgorithm),colorModulation:(0,D.d9)(this.colorModulation),pointsPerInch:(0,D.d9)(this.pointsPerInch)}}};(0,n._)([(0,u.Cb)({type:A.apiValues,readOnly:!0,nonNullable:!0,json:{type:A.jsonValues,read:!1,write:A.write}})],j.prototype,"type",void 0),(0,n._)([(0,u.Cb)({types:v,json:{write:!0}})],j.prototype,"pointSizeAlgorithm",void 0),(0,n._)([(0,u.Cb)({type:R,json:{write:!0}})],j.prototype,"colorModulation",void 0),(0,n._)([(0,u.Cb)({json:{write:!0},nonNullable:!0,type:Number})],j.prototype,"pointsPerInch",void 0),j=(0,n._)([(0,c.j)("esri.renderers.PointCloudRenderer")],j),(j||(j={})).fieldTransformTypeKebabDict=new h.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const I=j},23899:(k,K,e)=>{e.d(K,{Z:()=>R});var S,n=e(17626),h=e(58817),f=e(77712),u=(e(90912),e(55342)),p=e(76898),c=e(80573),T=e(10914),g=e(8029);let x=S=class extends c.Z{constructor(M){super(M),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new S({...this.cloneProperties(),field:(0,h.d9)(this.field),fieldTransformType:(0,h.d9)(this.fieldTransformType),stops:(0,h.d9)(this.stops),legendOptions:(0,h.d9)(this.legendOptions)})}};(0,n._)([(0,u.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],x.prototype,"type",void 0),(0,n._)([(0,f.Cb)({json:{write:!0},type:String})],x.prototype,"field",void 0),(0,n._)([(0,f.Cb)({type:T.I,json:{write:!0}})],x.prototype,"legendOptions",void 0),(0,n._)([(0,f.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],x.prototype,"fieldTransformType",void 0),(0,n._)([(0,f.Cb)({type:[g.Z],json:{write:!0}})],x.prototype,"stops",void 0),x=S=(0,n._)([(0,p.j)("esri.renderers.PointCloudStretchRenderer")],x);const R=x},98610:(k,K,e)=>{e.d(K,{Z:()=>o});var x,n=e(17626),h=e(58817),f=e(77712),D=e(90912),u=e(55342),p=e(76898),c=e(80573),T=e(10914),g=e(91558),S=e(86810);let R=x=class extends S.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new x({description:this.description,label:this.label,values:(0,h.d9)(this.values),color:(0,h.d9)(this.color)})}};(0,n._)([(0,f.Cb)({type:String,json:{write:!0}})],R.prototype,"description",void 0),(0,n._)([(0,f.Cb)({type:String,json:{write:!0}})],R.prototype,"label",void 0),(0,n._)([(0,f.Cb)({type:[String],json:{write:!0}})],R.prototype,"values",void 0),(0,n._)([(0,f.Cb)({type:g.Z,json:{type:[D.z8],write:!0}})],R.prototype,"color",void 0),R=x=(0,n._)([(0,p.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],R);const M=R;var O;let d=O=class extends c.Z{constructor(a){super(a),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new O({...this.cloneProperties(),field:(0,h.d9)(this.field),fieldTransformType:(0,h.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,h.d9)(this.colorUniqueValueInfos),legendOptions:(0,h.d9)(this.legendOptions)})}};(0,n._)([(0,u.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],d.prototype,"type",void 0),(0,n._)([(0,f.Cb)({json:{write:!0},type:String})],d.prototype,"field",void 0),(0,n._)([(0,f.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],d.prototype,"fieldTransformType",void 0),(0,n._)([(0,f.Cb)({type:[M],json:{write:!0}})],d.prototype,"colorUniqueValueInfos",void 0),(0,n._)([(0,f.Cb)({type:T.I,json:{write:!0}})],d.prototype,"legendOptions",void 0),d=O=(0,n._)([(0,p.j)("esri.renderers.PointCloudUniqueValueRenderer")],d);const o=d},2543:(k,K,e)=>{e.d(K,{IJ:()=>x,m5:()=>d,vB:()=>a,w7:()=>M});var n=e(15861),h=e(84792),f=e(21726),D=e(91179),u=e(93555),p=e(37053),c=e(76391),T=e(61515);const g="Layer does not support extent calculation.";function S(l,i){const _=l.geometry,E=l.toJSON(),v=E;if(null!=_&&(v.geometry=JSON.stringify(_),v.geometryType=(0,D.Ji)(_),v.inSR=(0,p.B9)(_.spatialReference)),E.topFilter?.groupByFields&&(v.topFilter.groupByFields=E.topFilter.groupByFields.join(",")),E.topFilter?.orderByFields&&(v.topFilter.orderByFields=E.topFilter.orderByFields.join(",")),E.topFilter&&(v.topFilter=JSON.stringify(v.topFilter)),E.objectIds&&(v.objectIds=E.objectIds.join(",")),E.orderByFields&&(v.orderByFields=E.orderByFields.join(",")),E.outFields&&!(i?.returnCountOnly||i?.returnExtentOnly||i?.returnIdsOnly)?v.outFields=E.outFields.includes("*")?"*":E.outFields.join(","):delete v.outFields,E.outSR?v.outSR=(0,p.B9)(E.outSR):_&&E.returnGeometry&&(v.outSR=v.inSR),E.returnGeometry&&delete E.returnGeometry,E.timeExtent){const A=E.timeExtent,{start:j,end:I}=A;null==j&&null==I||(v.time=j===I?j:`${j??"null"},${I??"null"}`),delete E.timeExtent}return v}function x(l,i,_,E){return R.apply(this,arguments)}function R(){return(R=(0,n.Z)(function*(l,i,_,E){const v=yield r(l,i,"json",E);return(0,T.p)(i,_,v.data),v})).apply(this,arguments)}function M(l,i,_){return O.apply(this,arguments)}function O(){return(O=(0,n.Z)(function*(l,i,_){return null!=i.timeExtent&&i.timeExtent.isEmpty?{data:{objectIds:[]}}:r(l,i,"json",_,{returnIdsOnly:!0})})).apply(this,arguments)}function d(l,i,_){return o.apply(this,arguments)}function o(){return(o=(0,n.Z)(function*(l,i,_){return null!=i.timeExtent&&i.timeExtent.isEmpty?{data:{count:0,extent:null}}:r(l,i,"json",_,{returnExtentOnly:!0,returnCountOnly:!0}).then(E=>{const v=E.data;if(v.hasOwnProperty("extent"))return E;if(v.features)throw new Error(g);if(v.hasOwnProperty("count"))throw new Error(g);return E})})).apply(this,arguments)}function a(l,i,_){return null!=i.timeExtent&&i.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):r(l,i,"json",_,{returnIdsOnly:!0,returnCountOnly:!0})}function r(l,i,_,E={},v={}){const A="string"==typeof l?(0,f.mN)(l):l,j=i.geometry?[i.geometry]:[];return E.responseType="pbf"===_?"array-buffer":"json",(0,u.aX)(j,null,E).then(I=>{const b=I?.[0];null!=b&&((i=i.clone()).geometry=b);const B=(0,c.A)({...A.query,f:_,...v,...S(i,v)});return(0,h.Z)((0,f.v_)(A.path,"queryTopFeatures"),{...E,query:{...B,...E.query}})})}},70026:(k,K,e)=>{e.d(K,{t:()=>f});var n=e(15861),h=e(84792);function f(u,p){return D.apply(this,arguments)}function D(){return(D=(0,n.Z)(function*(u,p){const{data:c}=yield(0,h.Z)(u,{responseType:"image",...p});return c})).apply(this,arguments)}},57052:(k,K,e)=>{e.d(K,{Z:()=>D});var n=e(15861),h=e(17002),f=e(90740);class D{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(p){return this._resourceMap.get(p)??null}fetchResource(p,c){var T=this;return(0,n.Z)(function*(){const g=T._resourceMap.get(p);if(g)return{width:g.width,height:g.height};let S=T._inFlightResourceMap.get(p);return S?S.then(x=>({width:x.width,height:x.height})):(S=(0,f.n$)(p,c),T._inFlightResourceMap.set(p,S),S.then(x=>(T._inFlightResourceMap.delete(p),T._resourceMap.set(p,x),{width:x.width,height:x.height}),()=>({width:0,height:0})))})()}deleteResource(p){this._inFlightResourceMap.delete(p),this._resourceMap.delete(p)}loadFont(p){return(0,h.mx)(p)}}},50998:(k,K,e)=>{e.r(K),e.d(K,{fetchSymbolFromStyle:()=>M,getStyleItemFromStyle:()=>R,resolveWebStyleSymbol:()=>x});var n=e(20383),h=e(83100),f=e(26584),D=e(21726),u=e(31099),p=e(29840),c=e(65270),T=e(77345),g=e(71937),S=e(96296);function x(d,o,a,r){const l=d.name;return null==l?Promise.reject(new f.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):d.styleName&&"Esri2DPointSymbolsStyle"===d.styleName?function O(d,o,a){const r=g.wm.replaceAll(/\{SymbolName\}/gi,d),l=null!=o.portal?o.portal:u.Z.getDefault();return(0,g.EJ)(r,a).then(i=>{const _=(0,g.KV)(i.data);return(0,c.im)(_,{portal:l,url:(0,D.mN)((0,D.Yd)(r)),origin:"portal-item"})})}(l,o,r):(0,g.n2)(d,o,r).then(i=>M(i,l,o,a,g.v9,r))}function R(d,o){return o.items.find(a=>a.name===d)}function M(d,o,a,r,l,i){const _=null!=a?.portal?a.portal:u.Z.getDefault(),E={portal:_,url:(0,D.mN)(d.baseUrl),origin:"portal-item"},v=R(o,d.data);if(!v)return Promise.reject(new f.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${o}' could not be found`,{symbolName:o}));let A=(0,p.f)(l(v,r),E),j=v.thumbnail?.href??null;const I=v.thumbnail?.imageData;(0,h.XO)()&&(A=(0,h.pJ)(A)??"",j=(0,h.pJ)(j));const b={portal:_,url:(0,D.mN)((0,D.Yd)(A)),origin:"portal-item"};return(0,g.EJ)(A,i).then(B=>{const P="cimRef"===r?(0,g.KV)(B.data):B.data,s=(0,c.im)(P,b);if(s&&(0,n.dU)(s)){if(j){const y=(0,p.f)(j,E);s.thumbnail=new S.p({url:y})}else I&&(s.thumbnail=new S.p({url:`data:image/png;base64,${I}`}));d.styleUrl?s.styleOrigin=new T.Z({portal:a.portal,styleUrl:d.styleUrl,name:o}):d.styleName&&(s.styleOrigin=new T.Z({portal:a.portal,styleName:d.styleName,name:o}))}return s})}},91757:(k,K,e)=>{e.d(K,{c:()=>D});var n=e(93548),h=e(39406),f=e(44589);class D extends f.Z{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(p){super.beforeRender(p),this._manageFade()}prepareRenderPasses(p){const c=p.registerRenderPass({name:"bitmap",brushes:[n.U.bitmap],target:()=>this.children,drawPhase:h.jx.MAP});return[...super.prepareRenderPasses(p),c]}_manageFade(){this.children.reduce((p,c)=>p+(c.inFadeTransition?1:0),0)>=2?(this.children.forEach(p=>p.blendFunction="additive"),this._hasCrossfade=!0):(this.children.forEach(p=>p.blendFunction="standard"),this._hasCrossfade=!1)}}},91082:(k,K,e)=>{e.d(K,{Y:()=>g});var n=e(17626),c=(e(63290),e(90912),e(85931),e(8314),e(26584),e(76898)),T=e(71379);const g=S=>{let x=class extends S{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new T.s(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return x=(0,n._)([(0,c.j)("esri.views.2d.layers.BitmapTileLayerView2D")],x),x}},55746:(k,K,e)=>{e.d(K,{k:()=>R,p:()=>M});var n=e(65389),h=e(61885),D=(e(8314),e(76279)),u=e(5548),p=e(16669),c=e(52397);const T=(0,u.Ue)();function g(O,d){return O<<16|d}function S(O){return(4294901760&O)>>>16}function x(O){return 65535&O}const R={getObjectId:O=>O.getObjectId(),getAttributes:O=>O.readAttributes(),getAttribute:(O,d)=>O.readAttribute(d),getAttributeAsTimestamp:(O,d)=>O.readAttributeAsTimestamp(d),cloneWithGeometry:(O,d)=>O,getGeometry:O=>O.readHydratedGeometry(),getCentroid:(O,d)=>O.readCentroid()};class M extends p.J{constructor(d,o,a){super(d,o),this.featureAdapter=R,this.events=new h.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new n.Z(50),this._index=(0,D.r)(9,r=>({minX:this._storage.getXMin(r),minY:this._storage.getYMin(r),maxX:this._storage.getXMax(r),maxY:this._storage.getYMax(r)})),this.mode=a}get storeStatistics(){let d=0,o=0,a=0;return this.forEach(r=>{const l=r.readGeometry();l&&(o+=l.isPoint?1:l.lengths.reduce((i,_)=>i+_,0),a+=l.isPoint?1:l.lengths.length,d+=1)}),{featureCount:d,vertexCount:o,ringCount:a}}hasInstance(d){return this._featureSetsByInstance.has(d)}onTileData(d,o,a){if(null==o.addOrUpdate)return o;if(o.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const l=o.addOrUpdate.getCursor();for(;l.next();){const i=l.getDisplayId();this.setComputedAttributes(this._storage,l,i,d.scale,a)}return o}this._featureSetsByInstance.set(o.addOrUpdate.instance,o.addOrUpdate);const r=o.addOrUpdate.getCursor();for(;r.next();)this._insertFeature(r,d.scale,a);return this._spatialIndexInvalid=!0,this.events.emit("changed"),o}search(d){this._rebuildIndex();const o=d.id,a=this._indexSearchCache.find(_=>_.tileId===o);if(null!=a)return a.readers;const r=new Map,l=this._searchIndex(d.bounds),i=[];for(const _ of l){const E=this._storage.getInstanceId(_),v=S(E),A=x(E);r.has(v)||r.set(v,[]),r.get(v).push(A)}return r.forEach((_,E)=>{const v=this._featureSetsByInstance.get(E);i.push(c.t.from(v,_))}),this._indexSearchCache.enqueue({tileId:o,readers:i}),i}insert(d){const o=d.getCursor(),a=this._storage;for(;o.next();){const r=g(o.instance,o.getIndex()),l=o.getObjectId(),i=this._objectIdToDisplayId.get(l)??this._storage.createDisplayId();o.setDisplayId(i),a.setInstanceId(i,r),this._objectIdToDisplayId.set(l,i)}this._featureSetsByInstance.set(d.instance,d),this._spatialIndexInvalid=!0}remove(d){const o=this._objectIdToDisplayId.get(d);if(!o)return;const a=this._storage.getInstanceId(o),r=x(a),l=S(a),i=this._featureSetsByInstance.get(l);this._objectIdToDisplayId.delete(d),this._storage.releaseDisplayId(o),i.removeAtIndex(r),i.isEmpty&&this._featureSetsByInstance.delete(l),this._spatialIndexInvalid=!0}forEach(d){this._objectIdToDisplayId.forEach(o=>{const a=this._storage.getInstanceId(o),r=this._lookupFeature(a);d(r)})}forEachUnsafe(d){this._objectIdToDisplayId.forEach(o=>{const a=this._storage.getInstanceId(o),r=S(a),l=x(a),i=this._getFeatureSet(r);i.setIndex(l),d(i)})}forEachInBounds(d,o){const a=this._searchIndex(d);for(const r of a)o(this.lookupFeatureByDisplayId(r,this._storage))}forEachBounds(d,o){this._rebuildIndex();for(const a of d){if(!a.readGeometry())continue;const r=a.getDisplayId();(0,u.bZ)(T,this._storage.getXMin(r),this._storage.getYMin(r),this._storage.getXMax(r),this._storage.getYMax(r)),o(T)}}sweepFeatures(d,o,a){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((r,l)=>{d.has(r)||(o.releaseDisplayId(r),a&&a.unsetAttributeData(r),this._objectIdToDisplayId.delete(l))}),this.events.emit("changed")}sweepFeatureSets(d){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((o,a)=>{d.has(a)||this._featureSetsByInstance.delete(a)})}lookupObjectId(d,o){const a=this.lookupFeatureByDisplayId(d,o);return null==a?null:a.getObjectId()}lookupDisplayId(d){return this._objectIdToDisplayId.get(d)}lookupFeatureByDisplayId(d,o){const a=o.getInstanceId(d);return this._lookupFeature(a)}lookupByDisplayIdUnsafe(d){const o=this._storage.getInstanceId(d),a=S(o),r=x(o),l=this._getFeatureSet(a);return l?(l.setIndex(r),l):null}_insertFeature(d,o,a){const r=this._storage,l=d.getObjectId(),i=g(d.instance,d.getIndex());r.getInstanceId(d.getDisplayId());let _=this._objectIdToDisplayId.get(l);_||(_=r.createDisplayId(),this._objectIdToDisplayId.set(l,_),this._spatialIndexInvalid=!0),d.setDisplayId(_),r.setInstanceId(_,i),this.setComputedAttributes(r,d,_,o,a)}_searchIndex(d){return this._rebuildIndex(),this._index.search({minX:d[0],minY:d[1],maxX:d[2],maxY:d[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const d=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(o=>{const a=o.getCursor();for(;a.next();){const r=a.getDisplayId();this._storage.setBounds(r,a)&&d.push(r)}}):this._objectIdToDisplayId.forEach(o=>{const a=this._storage.getInstanceId(o);this._storage.setBounds(o,this._lookupFeature(a))&&d.push(o)}),this._index.clear(),this._index.load(d),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(d){const o=S(d),a=this._getFeatureSet(o);if(!a)return;const r=a.getCursor(),l=x(d);return r.setIndex(l),r}_getFeatureSet(d){return this._featureSetsByInstance.get(d)}}},16669:(k,K,e)=>{e.d(K,{J:()=>c});var n=e(15861),h=e(8314),f=e(84682),D=e(46679),u=e(63290);class c{constructor(g,S){this._canCacheExpressionValue=!1,this._sourceInfo=g,this._storage=S,this._bitsets={computed:S.getBitset(S.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(g,S){var x=this;return(0,n.Z)(function*(){const R=(0,f.Hg)(x._schema,S);if(x._schema=S,!S||null==R||!(0,f.uD)(R,"attributes"))return;(0,h.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",R),x._bitsets.computed.clear(),g.targets[S.name]=!0;const M=S.attributes,O=[],d=[];for(const o in M){const a=M[o];switch(a.type){case"field":break;case"expression":O.push(x._createArcadeComputedField(a));break;case"label-expression":O.push(x._createLabelArcadeComputedField(a));break;case"statistic":d.push(a)}}x._computedFields=yield Promise.all(O),x._canCacheExpressionValue=!x._computedFields.some(o=>"expression"===o.type&&null!=o.expression&&o.expression.referencesScale()),x._statisticFields=d})()}setComputedAttributes(g,S,x,R,M){const O=this._bitsets.computed;if(!this._canCacheExpressionValue||!O.has(x)){O.set(x);for(const d of this._computedFields){const o=this._evaluateField(S,d,R,M);switch(d.resultType){case"numeric":g.setComputedNumericAtIndex(x,d.fieldIndex,o);break;case"string":g.setComputedStringAtIndex(x,d.fieldIndex,o)}}}}_createArcadeComputedField(g){var S=this;return(0,n.Z)(function*(){const x=S._sourceInfo.spatialReference,R=S._sourceInfo.fieldsIndex;return{...g,expression:yield(0,D.Yi)(g.valueExpression,x,R)}})()}_createLabelArcadeComputedField(g){var S=this;return(0,n.Z)(function*(){const x=S._sourceInfo.spatialReference,R=S._sourceInfo.fieldsIndex,{createLabelFunction:M}=yield e.e(2445).then(e.bind(e,22445)),O=yield M(g.label,R,x);return{...g,builder:O}})()}_evaluateField(g,S,x,R){switch(S.type){case"label-expression":{const M=g.readArcadeFeature();return S.builder.evaluate(M,R)||""}case"expression":{const{expression:M}=S;return function p(T,g,S){if(null==T)return null;const x=g.readArcadeFeature();g.contextTimeZone=S.$view?.timeZone;try{return T.evaluate({...S,$feature:x},T.services)}catch(R){return u.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",R),null}}(M,g,{$view:{scale:x,timeZone:R}})}}}}},13112:(k,K,e)=>{e.d(K,{Z:()=>g});var n=e(17626),h=e(83761),f=e(77712),c=(e(90912),e(85931),e(8314),e(76898));let T=class extends h.Z{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const S=this.tileStore.tileScheme.spatialReference;return S&&S.toJSON()||null}};(0,n._)([(0,f.Cb)({readOnly:!0})],T.prototype,"supportsTileUpdates",null),(0,n._)([(0,f.Cb)({constructOnly:!0})],T.prototype,"remoteClient",void 0),(0,n._)([(0,f.Cb)({constructOnly:!0})],T.prototype,"service",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"spatialReference",null),(0,n._)([(0,f.Cb)({constructOnly:!0})],T.prototype,"tileInfo",void 0),(0,n._)([(0,f.Cb)({constructOnly:!0})],T.prototype,"tileStore",void 0),T=(0,n._)([(0,c.j)("esri.views.2d.layers.features.processors.BaseProcessor")],T);const g=T},52397:(k,K,e)=>{e.d(K,{t:()=>h});var n=e(25208);class h extends n.s{static from(D,u){return new h(D.copy(),u)}constructor(D,u){super(n.s.createInstance(),D.fullSchema()),this._currentIndex=-1,this._reader=D,this._indices=u}get fields(){return this._reader.fields}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const D=new h(this._reader.copy(),this._indices);return D._currentIndex=this._currentIndex,D}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(D){this._reader.setArcadeSpatialReference(D)}attachStorage(D){this._reader.attachStorage(D)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}get contextTimeZone(){return this._reader.contextTimeZone}set contextTimeZone(D){this._reader.contextTimeZone=D}getStorage(){return this._reader.getStorage()}getComputedNumeric(D){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(D,u){return this._reader.setComputedNumericAtIndex(u,0)}getComputedString(D){return this._reader.getComputedStringAtIndex(0)}setComputedString(D,u){return this._reader.setComputedStringAtIndex(0,u)}getComputedNumericAtIndex(D){return this._reader.getComputedNumericAtIndex(D)}setComputedNumericAtIndex(D,u){this._reader.setComputedNumericAtIndex(D,u)}getComputedStringAtIndex(D){return this._reader.getComputedStringAtIndex(D)}setComputedStringAtIndex(D,u){return this._reader.setComputedStringAtIndex(D,u)}transform(D,u,p,c){const T=this.copy();return T._reader=this._reader.transform(D,u,p,c),T}readAttribute(D,u=!1){return this._reader.readAttribute(D,u)}readAttributes(){return this._reader.readAttributes()}joinAttributes(D){return this._reader.joinAttributes(D)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(D){return this.readAttribute(D,!0)}hasField(D){return this._reader.hasField(D)}setField(D,u){return this._reader.setField(D,u)}keys(){return this._reader.keys()}castToText(D=!1){return this._reader.castToText(D)}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(D){return this._reader.setDisplayId(D)}getGroupId(){return this._reader.getGroupId()}setGroupId(D){return this._reader.setGroupId(D)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(D){return this._reader.setIndex(D)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(D,u){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},67802:(k,K,e)=>{e.d(K,{Z:()=>j});var n=e(15861),h=e(17626),f=e(83761),u=(e(8314),e(10699)),p=e(77712),g=(e(90912),e(85931),e(76898)),S=e(65401),x=e(37053),R=e(2584);const M=Math.PI/180;var a=e(90301),r=e(9598),l=e(58098);const i=(0,S.Ue)(),_=[0,0],E=new l.Z(0,0,0,0);let A=class extends f.Z{constructor(I){var b;super(I),b=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,u.Ds)(function(){var B=(0,n.Z)(function*(P,s){if((0,u.k_)(s),!P.stationary||b.destroyed)return;const y=P.state,C=(0,x.C5)(y.spatialReference),m=b.hidpi?P.pixelRatio:1,L=b.imageNormalizationSupported&&y.worldScreenWidth&&y.worldScreenWidth<y.size[0],w=b.imageMaxWidth??0,N=b.imageMaxHeight??0;L?(_[0]=y.worldScreenWidth,_[1]=y.size[1]):b.imageRotationSupported?(_[0]=y.size[0],_[1]=y.size[1]):function d(I,b){const B=function O(I){return I*M}(b.rotation),P=Math.abs(Math.cos(B)),s=Math.abs(Math.sin(B)),[y,C]=b.size;return I[0]=Math.round(C*s+y*P),I[1]=Math.round(C*P+y*s),I}(_,y);const H=Math.floor(_[0]*m)>w||Math.floor(_[1]*m)>N,$=!b.imageNormalizationSupported&&C&&(y.extent.xmin<C.valid[0]||y.extent.xmax>C.valid[1]),W=!H&&!$,G=b.imageRotationSupported?y.rotation:0,J=b.container.children.slice();if(W){const U=L?y.paddedViewState.center:y.center;b._imagePromise&&console.error("Image promise was not defined!"),b._imagePromise=b._singleExport(y,_,U,y.resolution,G,m,s)}else{let U=Math.min(w,N);$&&(U=Math.min(y.worldScreenWidth,U)),b._imagePromise=b._tiledExport(y,U,m,s)}try{const U=(yield b._imagePromise)??[];(0,u.k_)(s);const Z=[];if(b._imagePromise=null,b.destroyed)return;b.bitmaps=U;for(const F of J)U.includes(F)||Z.push(F.fadeOut().then(()=>{F.remove(),F.destroy()}));for(const F of U)Z.push(F.fadeIn());yield Promise.all(Z)}catch(U){b._imagePromise=null,(0,u.r9)(U)}});return function(P,s){return B.apply(this,arguments)}}(),5e3),this.updateExports=(0,u.Ds)(function(){var B=(0,n.Z)(function*(P){const s=[];for(const y of b.container.children){if(!y.visible||!y.stage)return;s.push(P(y).then(()=>{y.invalidateTexture(),y.requestRender()}))}b._imagePromise=(0,u.as)(s).then(()=>b._imagePromise=null),yield b._imagePromise});return function(P){return B.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(I=>I.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(I,b,B,P,s,y){var C=this;return(0,n.Z)(function*(){const m=yield C.fetchSource(I,Math.floor(b*s),Math.floor(B*s),{rotation:P,pixelRatio:s,signal:y});(0,u.k_)(y);const L=new a.eY(null,!0);return L.x=I.xmin,L.y=I.ymax,L.resolution=I.width/b,L.rotation=P,L.pixelRatio=s,L.opacity=0,C.container.addChild(L),yield L.setSourceAsync(m,y),(0,u.k_)(y),L})()}_singleExport(I,b,B,P,s,y,C){var m=this;return(0,n.Z)(function*(){!function o(I,b,B,P){const[s,y]=b,[C,m]=P,L=.5*B;I[0]=s-L*C,I[1]=y-L*m,I[2]=s+L*C,I[3]=y+L*m}(i,B,P,b);const L=(0,S.HH)(i,I.spatialReference);return[yield m._export(L,b[0],b[1],s,y,C)]})()}_tiledExport(I,b,B,P){const s=R.Z.create({size:b,spatialReference:I.spatialReference,scales:[I.scale]}),y=new r.Z(s),C=y.getTileCoverage(I);if(!C)return null;const m=[];return C.forEach((L,w,N,H)=>{E.set(L,w,N,0),y.getTileBounds(i,E);const V=(0,S.HH)(i,I.spatialReference);m.push(this._export(V,b,b,0,B,P).then($=>(0!==H&&(E.set(L,w,N,H),y.getTileBounds(i,E),$.x=i[0],$.y=i[3]),$)))}),Promise.all(m)}};(0,h._)([(0,p.Cb)()],A.prototype,"_imagePromise",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"bitmaps",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"container",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"fetchSource",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"hidpi",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"imageMaxWidth",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"imageMaxHeight",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"imageRotationSupported",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"imageNormalizationSupported",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"requestUpdate",void 0),(0,h._)([(0,p.Cb)()],A.prototype,"updating",null),A=(0,h._)([(0,g.j)("esri.views.2d.layers.support.ExportStrategy")],A);const j=A},88893:(k,K,e)=>{function f(u,p,c,T){if(c.level===T.level)return p;const g=u.tileInfo.size,S=u.getTileResolution(c.level),x=u.getTileResolution(T.level);let R=u.getLODInfoAt(T.level);const M=R.getXForColumn(T.col),O=R.getYForRow(T.row);R=u.getLODInfoAt(c.level);const d=R.getXForColumn(c.col),o=R.getYForRow(c.row),a=function n(u){return u instanceof HTMLImageElement?u.naturalWidth:u.width}(p)/g[0],r=function h(u){return u instanceof HTMLImageElement?u.naturalHeight:u.height}(p)/g[1],l=Math.round(a*((M-d)/S)),i=Math.round(r*(-(O-o)/S)),_=Math.round(a*g[0]*(x/S)),E=Math.round(r*g[1]*(x/S)),v=D(g);return v.getContext("2d").drawImage(p,l,i,_,E,0,0,g[0],g[1]),v}function D(u){const p=document.createElement("canvas");return[p.width,p.height]=u,p}e.d(K,{V:()=>D,i:()=>f})},38982:(k,K,e)=>{e.d(K,{Br:()=>c,Fm:()=>M,N9:()=>d,RA:()=>o,Tc:()=>g,Ue:()=>S,iC:()=>T,s9:()=>p,v:()=>O,xW:()=>R,zS:()=>x});var n=e(99770),h=e(80738),f=e(67969),D=e(18952),u=e(31548);function p(r,l,i="nearest",_=!1){const E=!(_&&"u8"===l.pixelType),v=E?f.Br.FLOAT:f.Br.UNSIGNED_BYTE,A=null==l.pixels||0===l.pixels.length?null:E?l.getAsRGBAFloat():l.getAsRGBA(),j=r.capabilities.textureFloat?.textureFloatLinear,I=new u.X;return I.width=l.width,I.height=l.height,I.internalFormat=r.type===h.zO.WEBGL2&&E?f.lP.RGBA32F:f.VI.RGBA,I.samplingMode=!j||"bilinear"!==i&&"cubic"!==i?f.cw.NEAREST:f.cw.LINEAR,I.dataType=v,I.wrapMode=f.e8.CLAMP_TO_EDGE,new D.x(r,I,A)}function c(r,l){const{spacing:i,offsets:_,coefficients:E,size:[v,A]}=l,j=i[0]>1,I=new u.X;I.width=j?4*v:v,I.height=A,I.internalFormat=r.type===h.zO.WEBGL2?f.lP.RGBA32F:f.VI.RGBA,I.dataType=f.Br.FLOAT,I.samplingMode=f.cw.NEAREST,I.wrapMode=f.e8.CLAMP_TO_EDGE;const b=new Float32Array(j?v*A*16:2*_.length);if(j&&null!=E)for(let B=0,P=0;B<E.length;B++)b[P++]=E[B],B%3==2&&(b[P++]=1);else for(let B=0;B<A;B++)for(let P=0;P<v;P++){const s=4*(B*v+P),y=2*(P*A+B);b[s]=_[y],b[s+1]=_[y+1],b[s+3]=-1===_[y]?0:1}return new D.x(r,I,b)}function T(r,l){const i=new u.X;return i.internalFormat=f.VI.RGBA,i.width=l.length/4,i.height=1,i.samplingMode=f.cw.NEAREST,i.wrapMode=f.e8.CLAMP_TO_EDGE,new D.x(r,i,l)}function g(r,l,i,_=1,E=!0){return{u_flipY:E,u_applyTransform:!!r,u_opacity:_,u_transformSpacing:r?r.spacing:n.Z,u_transformGridSize:r?r.size:n.Z,u_targetImageSize:l,u_srcImageSize:i}}function S(r,l){return{u_colormapOffset:l||0,u_colormapMaxIndex:r?r.length/4-1:0}}function x(r,l){return{u_scale:r,u_offset:l}}function R(r){return{u_bandCount:r.bandCount,u_minOutput:r.outMin,u_maxOutput:r.outMax,u_minCutOff:r.minCutOff,u_maxCutOff:r.maxCutOff,u_factor:r.factor,u_useGamma:r.useGamma,u_gamma:r.gamma,u_gammaCorrection:r.gammaCorrection}}function M(r){return{u_hillshadeType:r.hillshadeType,u_sinZcosAs:r.sinZcosAs,u_sinZsinAs:r.sinZsinAs,u_cosZs:r.cosZs,u_weights:r.weights,u_factor:r.factor,u_minValue:r.minValue,u_maxValue:r.maxValue}}function O(r,l){const i=r.gl,_=l.glName,E=new Map;if(null==_)return E;const v=i.getProgramParameter(_,i.ACTIVE_UNIFORMS);let A;for(let j=0;j<v;j++)A=i.getActiveUniform(_,j),A&&E.set(A.name,{location:i.getUniformLocation(_,A.name),info:A});return E}function d(r,l,i){Object.keys(i).forEach(_=>{const E=l.get(_)||l.get(_+"[0]");E&&function a(r,l,i,_){if(null===_||null==i)return!1;const{info:E}=_;switch(E.type){case f.Se.FLOAT:E.size>1?r.setUniform1fv(l,i):r.setUniform1f(l,i);break;case f.Se.FLOAT_VEC2:r.setUniform2fv(l,i);break;case f.Se.FLOAT_VEC3:r.setUniform3fv(l,i);break;case f.Se.FLOAT_VEC4:r.setUniform4fv(l,i);break;case f.Se.FLOAT_MAT3:r.setUniformMatrix3fv(l,i);break;case f.Se.FLOAT_MAT4:r.setUniformMatrix4fv(l,i);break;case f.Se.INT:E.size>1?r.setUniform1iv(l,i):r.setUniform1i(l,i);break;case f.Se.BOOL:r.setUniform1i(l,i?1:0);break;case f.Se.INT_VEC2:case f.Se.BOOL_VEC2:r.setUniform2iv(l,i);break;case f.Se.INT_VEC3:case f.Se.BOOL_VEC3:r.setUniform3iv(l,i);break;case f.Se.INT_VEC4:case f.Se.BOOL_VEC4:r.setUniform4iv(l,i);break;default:return!1}}(r,_,i[_],E)})}function o(r,l,i,_){i.length===_.length&&(_.some(E=>null==E)||i.some(E=>null==E)||i.forEach((E,v)=>{l.setUniform1i(E,v),r.bindTexture(_[v],v)}))}},21023:(k,K,e)=>{e.d(K,{A:()=>a,S:()=>M,d:()=>r});var n=e(15861),h=e(76210),f=e(8225),D=e(24189),u=e(23663),p=e(66554),c=e(34792),T=e(46203),g=e(48346),S=e(98635),x=e(85589),R=e(58293);const M={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},a=(0,h.GH)(class extends h.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.setMenuOpen=l=>{this.menuOpen=!!l.target.open},this.handleMenuActionsSlotChange=l=>{this.hasMenuActions=(0,T.e)(l)},this.expanded=!1,this.label=void 0,this.layout="vertical",this.columns=void 0,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.hasMenuActions=!1}expandedHandler(){this.menuOpen=!1}onMessagesChange(){}effectiveLocaleChange(){(0,p.u)(this,this.effectiveLocale)}setFocus(){var l=this;return(0,n.Z)(function*(){yield(0,D.c)(l),l.el.focus()})()}connectedCallback(){(0,u.c)(this),(0,p.c)(this),(0,f.c)(this)}disconnectedCallback(){(0,u.d)(this),(0,p.d)(this),(0,f.d)(this)}componentWillLoad(){var l=this;return(0,n.Z)(function*(){(0,D.a)(l),yield(0,p.s)(l)})()}componentDidLoad(){(0,D.s)(this)}renderMenu(){const{expanded:l,menuOpen:i,scale:_,layout:E,messages:v,overlayPositioning:A,hasMenuActions:j}=this;return(0,h.h)("calcite-action-menu",{expanded:l,flipPlacements:["left","right"],hidden:!j,label:v.more,onCalciteActionMenuOpen:this.setMenuOpen,open:i,overlayPositioning:A,placement:"horizontal"===E?"bottom-start":"leading-start",scale:_},(0,h.h)("calcite-action",{icon:"ellipsis",scale:_,slot:c.S.trigger,text:v.more,textEnabled:l}),(0,h.h)("slot",{name:M.menuActions,onSlotchange:this.handleMenuActionsSlotChange}),(0,h.h)("slot",{name:M.menuTooltip,slot:c.S.tooltip}))}render(){return(0,h.h)("div",{"aria-label":this.label,class:"container",role:"group"},(0,h.h)("slot",null),this.renderMenu())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return':host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0px;--calcite-action-group-columns:3;--calcite-action-group-gap:1px;--calcite-action-group-padding:1px}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-action-group-columns:1}:host([columns="2"]){--calcite-action-group-columns:2}:host([columns="3"]){--calcite-action-group-columns:3}:host([columns="4"]){--calcite-action-group-columns:4}:host([columns="5"]){--calcite-action-group-columns:5}:host([columns="6"]){--calcite-action-group-columns:6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:var(--calcite-ui-background);gap:var(--calcite-action-group-gap);padding:var(--calcite-action-group-gap);grid-template-columns:repeat(var(--calcite-action-group-columns), auto)}:host([hidden]){display:none}[hidden]{display:none}'}},[17,"calcite-action-group",{expanded:[516],label:[1],layout:[513],columns:[514],menuOpen:[1540,"menu-open"],overlayPositioning:[513,"overlay-positioning"],scale:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],hasMenuActions:[32],setFocus:[64]}]);function r(){typeof customElements>"u"||["calcite-action-group","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(i=>{switch(i){case"calcite-action-group":customElements.get(i)||customElements.define(i,a);break;case"calcite-action":customElements.get(i)||(0,g.d)();break;case"calcite-action-menu":customElements.get(i)||(0,c.d)();break;case"calcite-icon":customElements.get(i)||(0,S.d)();break;case"calcite-loader":customElements.get(i)||(0,x.d)();break;case"calcite-popover":customElements.get(i)||(0,R.d)()}})}r()},8225:(k,K,e)=>{e.d(K,{c:()=>p,d:()=>c});var n=e(76210),h=e(22757);const f=new Set;let D;const u={childList:!0};function p(g){D||(D=(0,h.c)("mutation",T)),D.observe(g.el,u)}function c(g){f.delete(g.el),T(D.takeRecords()),D.disconnect();for(const[S]of f.entries())D.observe(S,u)}function T(g){g.forEach(({target:S})=>{(0,n.xE)(S)})}},60863:(k,K,e)=>{e.d(K,{S:()=>x,d:()=>R});var n=e(15861),h=e(76210),f=e(23663),D=e(66554),u=e(22757),p=e(46203),c=e(85589);const x=(0,h.GH)(class extends h.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=(0,u.c)("resize",()=>this.handleResize()),this.handleDefaultSlotChange=M=>{this.hasContent=(0,p.w)(M)},this.storeLoaderEl=M=>{this.loaderEl=M,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){(0,D.u)(this,this.effectiveLocale)}connectedCallback(){(0,f.c)(this),(0,D.c)(this),this.resizeObserver?.observe(this.el)}componentWillLoad(){var M=this;return(0,n.Z)(function*(){yield(0,D.s)(M)})()}disconnectedCallback(){(0,f.d)(this),(0,D.d)(this),this.resizeObserver?.disconnect()}render(){const{hasContent:M,loading:O,messages:d}=this;return(0,h.h)("div",{class:"scrim"},O?(0,h.h)("calcite-loader",{label:d.loading,scale:this.loaderScale,ref:this.storeLoaderEl}):null,(0,h.h)("div",{class:"content",hidden:!M},(0,h.h)("slot",{onSlotchange:this.handleDefaultSlotChange})))}getScale(M){return M<72?"s":M>=480?"l":"m"}handleResize(){const{loaderEl:M,el:O}=this;M&&(this.loaderScale=this.getScale(Math.min(O.clientHeight,O.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return":host{position:absolute;inset:0px;z-index:var(--calcite-app-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]}]);function R(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(O=>{switch(O){case"calcite-scrim":customElements.get(O)||customElements.define(O,x);break;case"calcite-loader":customElements.get(O)||(0,c.d)()}})}R()},89251:(k,K,e)=>{e.d(K,{C:()=>h,I:()=>u,M:()=>D,S:()=>f,a:()=>x,g:()=>g,u:()=>S});var n=e(76210);const h={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",contentBottom:"content-bottom",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container",dragContainer:"drag-container"},f={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},D=0,u={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank",close:"x"},p="calcite-list",c="calcite-list-item-group",T="calcite-list-item";function g(R){const M=R.assignedElements({flatten:!0}),O=M.filter(a=>a?.matches(c)).map(a=>Array.from(a.querySelectorAll(T))).reduce((a,r)=>[...a,...r],[]),d=M.filter(a=>a?.matches(T));return[...M.filter(a=>a?.matches(p)).map(a=>Array.from(a.querySelectorAll(T))).reduce((a,r)=>[...a,...r],[]),...O,...d]}function S(R){R.forEach(M=>{M.setPosition=R.indexOf(M)+1,M.setSize=R.length})}function x(R,M=!1){return n.Z5.isBrowser?document.evaluate(M?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",R,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);