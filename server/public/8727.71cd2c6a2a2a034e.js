"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[8727,7010],{78727:(P,m,r)=>{r.r(m),r.d(m,{executeRelationshipQuery:()=>p,executeRelationshipQueryForCount:()=>x});var o=r(15861),j=r(2618),R=r(84792),C=r(37053),n=r(76391);function S(i,s){const t=i.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.orderByFields&&(t.orderByFields=t.orderByFields.join(",")),t.outFields&&!s?.returnCountOnly?t.outFields=t.outFields.includes("*")?"*":t.outFields.join(","):delete t.outFields,t.outSR&&(t.outSR=(0,C.B9)(t.outSR)),t.dynamicDataSource&&(t.layer=JSON.stringify({source:t.dynamicDataSource}),delete t.dynamicDataSource),t}function c(){return(c=(0,o.Z)(function*(i,s,t){const d=yield h(i,s,t),u=d.data,y=u.geometryType,l=u.spatialReference,_={};for(const v of u.relatedRecordGroups){const D={fields:void 0,objectIdFieldName:void 0,geometryType:y,spatialReference:l,hasZ:!!u.hasZ,hasM:!!u.hasM,features:v.relatedRecords};if(null!=v.objectId)_[v.objectId]=D;else for(const I of Object.keys(v))"relatedRecords"!==I&&(_[v[I]]=D)}return{...d,data:_}})).apply(this,arguments)}function f(){return(f=(0,o.Z)(function*(i,s,t){const d=yield h(i,s,t,{returnCountOnly:!0}),u=d.data,y={};for(const l of u.relatedRecordGroups)null!=l.objectId&&(y[l.objectId]=l.count);return{...d,data:y}})).apply(this,arguments)}function h(i,s){return e.apply(this,arguments)}function e(){return(e=(0,o.Z)(function*(i,s,t={},d){const u=(0,n.A)({...i.query,f:"json",...d,...S(s,d)});return(0,R.Z)(i.path+"/queryRelatedRecords",{...t,query:{...t.query,...u}})})).apply(this,arguments)}var O=r(17253),a=r(67010);function p(i,s,t){return b.apply(this,arguments)}function b(){return b=(0,o.Z)(function*(i,s,t){return s=a.default.from(s),function M(i,s,t){return c.apply(this,arguments)}((0,j.en)(i),s,t).then(u=>{const y=u.data,l={};return Object.keys(y).forEach(_=>l[_]=O.Z.fromJSON(y[_])),l})}),b.apply(this,arguments)}function x(i,s,t){return g.apply(this,arguments)}function g(){return g=(0,o.Z)(function*(i,s,t){return s=a.default.from(s),function E(i,s,t){return f.apply(this,arguments)}((0,j.en)(i),s,{...t}).then(u=>u.data)}),g.apply(this,arguments)}},67010:(P,m,r)=>{r.r(m),r.d(m,{default:()=>O});var h,o=r(17626),R=(r(29132),r(86810)),C=r(58817),n=r(77712),S=r(90912),M=r(76898),c=r(99433),E=r(15283),f=r(65234);let e=h=class extends R.wq{constructor(a){super(a),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(a,p){p.historicMoment=a&&a.getTime()}writeStart(a,p){p.resultOffset=this.start,p.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(p.definitionExpression="1=1")}clone(){return new h((0,C.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,o._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],e.prototype,"cacheHint",void 0),(0,o._)([(0,n.Cb)({type:E.n,json:{write:!0}})],e.prototype,"dynamicDataSource",void 0),(0,o._)([(0,n.Cb)({type:String,json:{write:!0}})],e.prototype,"gdbVersion",void 0),(0,o._)([(0,n.Cb)({type:Number,json:{write:!0}})],e.prototype,"geometryPrecision",void 0),(0,o._)([(0,n.Cb)({type:Date})],e.prototype,"historicMoment",void 0),(0,o._)([(0,c.c)("historicMoment")],e.prototype,"_writeHistoricMoment",null),(0,o._)([(0,n.Cb)({type:Number,json:{write:!0}})],e.prototype,"maxAllowableOffset",void 0),(0,o._)([(0,n.Cb)({type:[Number],json:{write:!0}})],e.prototype,"objectIds",void 0),(0,o._)([(0,n.Cb)({type:[String],json:{write:!0}})],e.prototype,"orderByFields",void 0),(0,o._)([(0,n.Cb)({type:[String],json:{write:!0}})],e.prototype,"outFields",void 0),(0,o._)([(0,n.Cb)({type:f.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],e.prototype,"outSpatialReference",void 0),(0,o._)([(0,n.Cb)({json:{write:!0}})],e.prototype,"relationshipId",void 0),(0,o._)([(0,n.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],e.prototype,"start",void 0),(0,o._)([(0,c.c)("start"),(0,c.c)("num")],e.prototype,"writeStart",null),(0,o._)([(0,n.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],e.prototype,"num",void 0),(0,o._)([(0,n.Cb)({json:{write:!0}})],e.prototype,"returnGeometry",void 0),(0,o._)([(0,n.Cb)({type:Boolean,json:{write:{overridePolicy:a=>({enabled:a})}}})],e.prototype,"returnM",void 0),(0,o._)([(0,n.Cb)({type:Boolean,json:{write:{overridePolicy:a=>({enabled:a})}}})],e.prototype,"returnZ",void 0),(0,o._)([(0,n.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],e.prototype,"where",void 0),e=h=(0,o._)([(0,M.j)("esri.rest.support.RelationshipQuery")],e),e.from=(0,S.se)(e);const O=e}}]);