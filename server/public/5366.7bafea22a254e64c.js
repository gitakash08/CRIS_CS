"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[5366,7010],{56347:(X,v,i)=>{i.d(v,{JD:()=>nt,Jj:()=>it,sX:()=>It,Ob:()=>vt,rP:()=>mt,FV:()=>ut,nU:()=>Et,Ci:()=>at,Fr:()=>rt,HW:()=>z,gG:()=>ht,uA:()=>Ot,SU:()=>lt,KE:()=>pt,VG:()=>dt,tD:()=>ct,kp:()=>yt,C9:()=>ft,rk:()=>gt,kZ:()=>_t,JY:()=>xt,Y5:()=>ot,uj:()=>st});var s=i(15861),_=i(24263),O=i(20383),j=i(59213),u=i(26584),M=i(2076),c=i(95737),h=i(383),d=i(96854);function b(){return(b=(0,s.Z)(function*(t,e,r){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=y(t));const n=function a(t){return y(t)*function Z(t){return t.capabilities.query.maxRecordCount||2e3}(t)}(t),o=t.capabilities.query.supportsPagination;e.start=0,e.num=n;let l=null;for(;;){const f=yield t.source.queryFeaturesJSON(e,r);if(null==l?l=f:l.features=l.features.concat(f.features),l.exceededTransferLimit=f.exceededTransferLimit,!o||!f.exceededTransferLimit)break;e.start+=n}return l})).apply(this,arguments)}function y(t){return t.capabilities.query.supportsMaxRecordCountFactor?d.Z.MAX_MAX_RECORD_COUNT_FACTOR:1}var E=i(72469),k=i(40342),tt=i(73640),et=i(67736),Y=i(67010);const rt=new M.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});function nt(t,e,r,n){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(function*(t,e,r,n){const o=yield x(t);if(yield F(t,e,n),!o.addAttachment)throw new u.Z(n,"Layer source does not support addAttachment capability");return o.addAttachment(e,r)})).apply(this,arguments)}function F(t,e,r){const{attributes:n}=e,{objectIdField:o}=t;return t.capabilities?.data?.supportsAttachment?e?n?o&&n[o]?Promise.resolve():Promise.reject(new u.Z(r,`feature is missing the identifying attribute ${o}`)):Promise.reject(new u.Z(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new u.Z(r,"A feature is required to add/delete/update attachments")):Promise.reject(new u.Z(r,"this layer doesn't support attachments"))}function ot(t,e,r,n,o){return R.apply(this,arguments)}function R(){return(R=(0,s.Z)(function*(t,e,r,n,o){const l=yield x(t);if(yield F(t,e,o),!l.updateAttachment)throw new u.Z(o,"Layer source does not support updateAttachment capability");return l.updateAttachment(e,r,n)})).apply(this,arguments)}function it(t,e,r){return A.apply(this,arguments)}function A(){return(A=(0,s.Z)(function*(t,e,r){const{applyEdits:n}=yield i.e(1913).then(i.bind(i,81913)),o=yield t.load(),{source:l,globalIdField:f}=o;let I=r;return"feature"===o.type&&o.infoFor3D&&null!=e.deleteFeatures&&null!=f&&(I={...I,globalIdToObjectId:yield z(t,e.deleteFeatures,f)}),n(o,l,e,r)})).apply(this,arguments)}function st(t,e,r){return D.apply(this,arguments)}function D(){return(D=(0,s.Z)(function*(t,e,r){const{uploadAssets:n}=yield i.e(1913).then(i.bind(i,81913)),o=yield t.load();return n(o,o.source,e,r)})).apply(this,arguments)}function ut(t,e,r,n){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)(function*(t,e,r,n){const o=yield x(t);if(yield F(t,e,n),!o.deleteAttachments)throw new u.Z(n,"Layer source does not support deleteAttachments capability");return o.deleteAttachments(e,r)})).apply(this,arguments)}function at(t,e,r){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(function*(t,e,r){const n=(yield t.load({signal:e?.signal})).source;if(!n.fetchRecomputedExtents)throw new u.Z(r,"Layer source does not support fetchUpdates capability");return n.fetchRecomputedExtents(e)})).apply(this,arguments)}function lt(t,e,r,n){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)(function*(t,e,r,n){e=et.Z.from(e),yield t.load();const o=t.source,l=t.capabilities;if(!l?.data?.supportsAttachment)throw new u.Z(n,"this layer doesn't support attachments");const{attachmentTypes:f,objectIds:I,globalIds:C,num:p,size:m,start:g,where:q}=e;if(!l?.operations?.supportsQueryAttachments&&(f?.length>0||C?.length>0||m?.length>0||p||g||q))throw new u.Z(n,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(I?.length||C?.length||q))throw new u.Z(n,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!o.queryAttachments)throw new u.Z(n,"Layer source does not support queryAttachments capability",e);return o.queryAttachments(e)})).apply(this,arguments)}function ct(t,e,r,n){return U.apply(this,arguments)}function U(){return(U=(0,s.Z)(function*(t,e,r,n){const o=yield x(t);if(!o.queryObjectIds)throw new u.Z(n,"Layer source does not support queryObjectIds capability");return o.queryObjectIds(d.Z.from(e)??t.createQuery(),r)})).apply(this,arguments)}function dt(t,e,r,n){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)(function*(t,e,r,n){const o=yield x(t);if(!o.queryFeatureCount)throw new u.Z(n,"Layer source does not support queryFeatureCount capability");return o.queryFeatureCount(d.Z.from(e)??t.createQuery(),r)})).apply(this,arguments)}function pt(t,e,r,n){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)(function*(t,e,r,n){const o=yield x(t);if(!o.queryExtent)throw new u.Z(n,"Layer source does not support queryExtent capability");return o.queryExtent(d.Z.from(e)??t.createQuery(),r)})).apply(this,arguments)}function yt(t,e,r,n){return K.apply(this,arguments)}function K(){return(K=(0,s.Z)(function*(t,e,r,n){const o=yield x(t);if(!o.queryRelatedFeatures)throw new u.Z(n,"Layer source does not support queryRelatedFeatures capability");return o.queryRelatedFeatures(Y.default.from(e),r)})).apply(this,arguments)}function ft(t,e,r,n){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)(function*(t,e,r,n){const o=yield x(t);if(!o.queryRelatedFeaturesCount)throw new u.Z(n,"Layer source does not support queryRelatedFeaturesCount capability");return o.queryRelatedFeaturesCount(Y.default.from(e),r)})).apply(this,arguments)}function ht(t){return W.apply(this,arguments)}function W(){return(W=(0,s.Z)(function*(t){const e=t.source;if(e?.refresh)try{const{dataChanged:r,updates:n}=yield e.refresh();if(null!=n&&(t.sourceJSON={...t.sourceJSON,...n},t.read(n,{origin:"service",url:t.parsedUrl})),r)return!0}catch{}if(t.definitionExpression)try{return(yield(0,c.E)(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1})).apply(this,arguments)}function mt(t){const e=new d.Z,r=t.capabilities?.data,n=t.capabilities?.query;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,n&&(e.compactGeometryEnabled=n.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference),r&&(r.supportsZ&&null!=t.returnZ&&(e.returnZ=t.returnZ),r.supportsM&&null!=t.returnM&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:o,timeExtent:l}=t;return e.timeExtent=null!=o&&null!=l?l.offset(-o.value,o.unit):l||null,e.multipatchOption="multipatch"===t.geometryType?"xyFootprint":null,e}function gt(t){const{globalIdField:e,fields:r}=t;if(e)return e;if(r)for(const n of r)if("esriFieldTypeGlobalID"===n.type)return n.name}function _t(t){const{objectIdField:e,fields:r}=t;if(e)return e;if(r)for(const n of r)if("esriFieldTypeOID"===n.type)return n.name}function xt(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function x(t){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(function*(t){return(yield t.load()).source})).apply(this,arguments)}function Q(){return(Q=(0,s.Z)(function*(t,e){if(!_.id||_.id.findCredential(t))return;let r;try{const n=yield(0,E.oP)(t,e);n&&(r=yield _.id.checkSignInStatus(`${n}/sharing`))}catch{}if(r)try{const n=null!=e?e.signal:null;yield _.id.getCredential(t,{signal:n})}catch{}})).apply(this,arguments)}function Et(t,e,r){return $.apply(this,arguments)}function $(){return $=(0,s.Z)(function*(t,e,r){const n=t.parsedUrl?.path;n&&t.authenticationTriggerEvent===e&&(yield function bt(t,e){return Q.apply(this,arguments)}(n,r))}),$.apply(this,arguments)}function It(t){return!t.sourceJSON?.isMultiServicesView&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const H=(0,h.d)({types:O.QT});function vt(t,e){if(t.defaultSymbol)return t.types?.length?new tt.Z({defaultSymbol:H(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:H(r.symbol,r,e)}))}):new k.Z({symbol:H(t.defaultSymbol,t,e)})}function Ot(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const r=t.editingInfo?.lastEditDate?.getTime();return null==r||(e*=1e3,Date.now()-r<e)}function z(t,e,r){return J.apply(this,arguments)}function J(){return J=(0,s.Z)(function*(t,e,r){if(null==e)return null;const n=[],{objectIdField:o}=t;if(e.forEach(p=>{let m=null;if("attributes"in p){const{attributes:g}=p;m={globalId:g[r],objectId:null!=g[o]&&-1!==g[o]?g[o]:null}}else m={globalId:p.globalId,objectId:null!=p.objectId&&-1!==p.objectId?p.objectId:null};null!=m.globalId&&(null!=m.objectId&&-1!==m.objectId||n.push(m.globalId))}),0===n.length)return null;const l=t.createQuery();l.where=n.map(p=>`${r}='${p}'`).join(" OR "),l.returnGeometry=!1,l.outFields=[o,r],l.cacheHint=!1;const f=yield(0,j.mt)(function P(t,e,r){return b.apply(this,arguments)}(t,l));if(!f.ok)return null;const I=new Map,C=f.value.features;for(const p of C){const m=p.attributes[r],g=p.attributes[o];null!=m&&null!=g&&-1!==g&&I.set(m,g)}return I}),J.apply(this,arguments)}},55911:(X,v,i)=>{i.d(v,{v:()=>M});var s=i(8314),_=i(63290),O=i(36255),j=i(60466),u=i(90194);function M(){return{fields:{type:[O.Z],value:null,set:function(c){if(c&&(0,s.Z)("big-integer-warning-enabled")){const h=c.filter(d=>"big-integer"===d.type||"oid"===d.type&&(d.length||0)>=8);if(h.length){const d=h.map(P=>`'${P.name}'`).join(", ");_.Z.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${d}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",c)}},fieldsIndex:{readOnly:!0,get(){return j.Z.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(c){this._userOutFields=c,this.notifyChange("outFields")},get:function(){const c=this._userOutFields;if(!c?.length)return null;if(c.includes("*"))return["*"];if(!this.fields)return c;for(const h of c)this.fieldsIndex?.has(h)||_.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${h} found in outFields`,{layer:this,outFields:c});return(0,u.Q0)(this.fieldsIndex,c)}}}}},67010:(X,v,i)=>{i.r(v),i.d(v,{default:()=>Z});var b,s=i(17626),O=(i(29132),i(86810)),j=i(58817),u=i(77712),M=i(90912),c=i(76898),h=i(99433),d=i(15283),P=i(65234);let a=b=class extends O.wq{constructor(y){super(y),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(y,E){E.historicMoment=y&&y.getTime()}writeStart(y,E){E.resultOffset=this.start,E.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(E.definitionExpression="1=1")}clone(){return new b((0,j.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,s._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],a.prototype,"cacheHint",void 0),(0,s._)([(0,u.Cb)({type:d.n,json:{write:!0}})],a.prototype,"dynamicDataSource",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],a.prototype,"gdbVersion",void 0),(0,s._)([(0,u.Cb)({type:Number,json:{write:!0}})],a.prototype,"geometryPrecision",void 0),(0,s._)([(0,u.Cb)({type:Date})],a.prototype,"historicMoment",void 0),(0,s._)([(0,h.c)("historicMoment")],a.prototype,"_writeHistoricMoment",null),(0,s._)([(0,u.Cb)({type:Number,json:{write:!0}})],a.prototype,"maxAllowableOffset",void 0),(0,s._)([(0,u.Cb)({type:[Number],json:{write:!0}})],a.prototype,"objectIds",void 0),(0,s._)([(0,u.Cb)({type:[String],json:{write:!0}})],a.prototype,"orderByFields",void 0),(0,s._)([(0,u.Cb)({type:[String],json:{write:!0}})],a.prototype,"outFields",void 0),(0,s._)([(0,u.Cb)({type:P.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0),(0,s._)([(0,u.Cb)({json:{write:!0}})],a.prototype,"relationshipId",void 0),(0,s._)([(0,u.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],a.prototype,"start",void 0),(0,s._)([(0,h.c)("start"),(0,h.c)("num")],a.prototype,"writeStart",null),(0,s._)([(0,u.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],a.prototype,"num",void 0),(0,s._)([(0,u.Cb)({json:{write:!0}})],a.prototype,"returnGeometry",void 0),(0,s._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:y=>({enabled:y})}}})],a.prototype,"returnM",void 0),(0,s._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:y=>({enabled:y})}}})],a.prototype,"returnZ",void 0),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],a.prototype,"where",void 0),a=b=(0,s._)([(0,c.j)("esri.rest.support.RelationshipQuery")],a),a.from=(0,M.se)(a);const Z=a}}]);