"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[2911],{82911:(B,v,t)=>{t.r(v),t.d(v,{getGeometryServiceURL:()=>j,projectGeometry:()=>G});var f=t(15861),h=t(59318),m=t(26584),U=t(31099),C=t(84792),J=t(90912),S=t(91179),d=t(2618),N=t(10920),a=t(17626),O=t(86810),u=t(77712),x=(t(85931),t(8314),t(76898)),R=t(37053);let s=class extends O.wq{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(o=>o.toJSON()),n=this.geometries[0],r={};return r.outSR=(0,R.B9)(this.outSpatialReference),r.inSR=(0,R.B9)(n.spatialReference),r.geometries=JSON.stringify({geometryType:(0,S.Ji)(n),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,a._)([(0,u.Cb)()],s.prototype,"geometries",void 0),(0,a._)([(0,u.Cb)({json:{read:{source:"outSR"}}})],s.prototype,"outSpatialReference",void 0),(0,a._)([(0,u.Cb)()],s.prototype,"transformation",void 0),(0,a._)([(0,u.Cb)()],s.prototype,"transformForward",void 0),s=(0,a._)([(0,x.j)("esri.rest.support.ProjectParameters")],s);const Z=s,F=(0,J.se)(Z);function c(){return(c=(0,f.Z)(function*(e,n,r){n=F(n);const o=(0,d.en)(e),p={...o.query,f:"json",...n.toJSON()},l=n.outSpatialReference,i=(0,S.Ji)(n.geometries[0]),P=(0,d.lA)(p,r);return(0,C.Z)(o.path+"/project",P).then(({data:{geometries:T}})=>(0,N.o)(T,i,l))})).apply(this,arguments)}function j(){return g.apply(this,arguments)}function g(){return(g=(0,f.Z)(function*(e=null,n){if(h.Z.geometryServiceUrl)return h.Z.geometryServiceUrl;if(!e)throw new m.Z("internal:geometry-service-url-not-configured");let r;r="portal"in e?e.portal||U.Z.getDefault():e,yield r.load({signal:n});const o=r.helperServices?.geometry?.url;if(!o)throw new m.Z("internal:geometry-service-url-not-configured");return o})).apply(this,arguments)}function G(e,n){return y.apply(this,arguments)}function y(){return y=(0,f.Z)(function*(e,n,r=null,o){const p=yield j(r,o),l=new Z;l.geometries=[e],l.outSpatialReference=n;const i=yield function A(e,n,r){return c.apply(this,arguments)}(p,l,{signal:o});if(i&&Array.isArray(i)&&1===i.length)return i[0];throw new m.Z("internal:geometry-service-projection-failed")}),y.apply(this,arguments)}}}]);