"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[8762],{98762:(N,b,e)=>{e.r(b),e.d(b,{default:()=>Ce});var r=e(15861),s=e(17626),T=(e(29132),e(73281)),J=(e(4832),e(49067),e(96794),e(69747),e(40425),e(69357),e(40342),e(73640),e(33474),e(32088)),B=e(99959),ee=e(94113),F=e(21726),o=e(77712),K=e(90912),x=(e(85931),e(8314)),O=e(76898),te=e(99433),Q=e(71774),V=e(44917),X=e(26584),Y=e(47996),$=e(10699),re=e(97347),H=e(56554),z=e(29636),g=e(17253),k=e(28302),se=e(2004);let D=class extends Y.Z{constructor(){var t;super(...arguments),t=this,this._connection=null,this.capabilities=(0,H.MS)(!1,!1),this.type="wfs",this.refresh=(0,$.Ds)(function(){var n=(0,r.Z)(function*(a){yield t.load();const{extent:f}=yield t._connection.invoke("refresh",a);return f&&(t.sourceJSON.extent=f),{dataChanged:!0,updates:{extent:t.sourceJSON.extent}}});return function(a){return n.apply(this,arguments)}}())}load(t){return this.addResolvingPromise(this._startWorker({signal:null!=t?t.signal:null})),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}openPorts(){var t=this;return(0,r.Z)(function*(){return yield t.load(),t._connection.openPorts()})()}queryFeatures(t,n={}){var a=this;return(0,r.Z)(function*(){yield a.load(n);const f=yield a._connection.invoke("queryFeatures",t?t.toJSON():null,n);return g.Z.fromJSON(f)})()}queryFeaturesJSON(t,n={}){var a=this;return(0,r.Z)(function*(){return yield a.load(n),a._connection.invoke("queryFeatures",t?t.toJSON():null,n)})()}queryFeatureCount(t,n={}){var a=this;return(0,r.Z)(function*(){return yield a.load(n),a._connection.invoke("queryFeatureCount",t?t.toJSON():null,n)})()}queryObjectIds(t,n={}){var a=this;return(0,r.Z)(function*(){return yield a.load(n),a._connection.invoke("queryObjectIds",t?t.toJSON():null,n)})()}queryExtent(t,n={}){var a=this;return(0,r.Z)(function*(){yield a.load(n);const f=yield a._connection.invoke("queryExtent",t?t.toJSON():null,n);return{count:f.count,extent:se.Z.fromJSON(f.extent)}})()}querySnapping(t,n={}){var a=this;return(0,r.Z)(function*(){return yield a.load(n),a._connection.invoke("querySnapping",t,n)})()}_createLoadOptions(t){var n=this;return(0,r.Z)(function*(){const{url:a,customParameters:f,name:j,namespaceUri:G,fields:R,geometryType:_,swapXY:ve}=n.layer,pe="defaults"===n.layer.originOf("spatialReference")?void 0:n.layer.spatialReference;if(!a)throw new X.Z("wfs-layer:missing-url","WFSLayer must be created with a url");n.wfsCapabilities||(n.wfsCapabilities=yield(0,z.FU)(a,{customParameters:f,...t}));const M=["fields","geometryType","name","namespaceUri","swapXY"].some(he=>null==n.layer[he])?yield(0,z.be)(n.wfsCapabilities,j,G,{spatialReference:pe,customParameters:f,signal:t?.signal}):{...(0,z.eB)(R??[]),geometryType:_,name:j,namespaceUri:G,spatialReference:pe,swapXY:ve},be=(0,z.ft)(n.wfsCapabilities.readFeatureTypes(),M.name,M.namespaceUri),Oe=Q.M.toJSON(M.geometryType);return{customParameters:f,featureType:be,fields:M.fields?.map(he=>he.toJSON())??[],geometryField:M.geometryField,geometryType:Oe,getFeatureUrl:n.wfsCapabilities.operations.GetFeature.url,getFeatureOutputFormat:n.wfsCapabilities.operations.GetFeature.outputFormat,objectIdField:M.objectIdField,spatialReference:M.spatialReference?.toJSON(),swapXY:!!M.swapXY}})()}_startWorker(t){var n=this;return(0,r.Z)(function*(){const[a,f]=yield(0,$.as)([n._createLoadOptions(t),(0,re.bA)("WFSSourceWorker",{...t,strategy:(0,x.Z)("feature-layers-workers")?"dedicated":"local",registryTarget:n})]),j=a.error||f.error||null,G=f.value||null;if(j)throw G&&G.close(),j;const R=a.value;n._connection=f.value;const _=(yield n._connection.invoke("load",R,t)).extent;n.sourceJSON={dateFieldsTimeReference:{timeZoneIANA:k.pt},extent:_,fields:R.fields,geometryType:R.geometryType,objectIdField:R.objectIdField,geometryField:R.geometryField,drawingInfo:(0,H.bU)(R.geometryType),name:R.featureType.title,wfsInfo:{name:R.featureType.name,featureUrl:R.getFeatureUrl,maxFeatures:3e3,swapXY:R.swapXY,supportedSpatialReferences:R.featureType.supportedSpatialReferences,version:"2.0.0",wfsNamespace:R.featureType.namespaceUri}}})()}};(0,s._)([(0,o.Cb)()],D.prototype,"capabilities",void 0),(0,s._)([(0,o.Cb)({constructOnly:!0})],D.prototype,"layer",void 0),(0,s._)([(0,o.Cb)()],D.prototype,"sourceJSON",void 0),(0,s._)([(0,o.Cb)()],D.prototype,"type",void 0),(0,s._)([(0,o.Cb)()],D.prototype,"wfsCapabilities",void 0),D=(0,s._)([(0,O.j)("esri.layers.graphics.sources.WFSSource")],D);var fe,w=e(552),q=e(50107),de=e(35126),oe=e(15008),v=e(49286),ne=e(32629),ie=e(6647),ae=e(30346),ue=e(99555),ye=e(97941),A=e(13812),y=e(36255),c=e(55911),d=e(90194),l=e(170),C=e(62667),P=e(96854),ce=e(49430),le=e(65234);const ge=(0,c.v)();let i=fe=class extends((0,ne.c)((0,q.N)((0,oe.M)((0,de.b)((0,w.h)((0,ye.n)((0,ae.Q)((0,ue.M)((0,v.q)((0,ie.I)((0,B.R)(V.Z)))))))))))){static fromWFSLayerInfo(t){const{customParameters:n,fields:a,geometryField:f,geometryType:j,name:G,namespaceUri:R,objectIdField:_,spatialReference:ve,swapXY:pe,url:me,wfsCapabilities:M}=t;return new fe({customParameters:n,fields:a,geometryField:f,geometryType:j,name:G,namespaceUri:R,objectIdField:_,spatialReference:ve,swapXY:pe,url:me,wfsCapabilities:M})}constructor(t){super(t),this.copyright=null,this.customParameters=null,this.dateFieldsTimeZone=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.featureUrl=void 0,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="WFS",this.maxFeatures=3e3,this.mode=0,this.name=null,this.namespaceUri=null,this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new D({layer:this}),this.spatialReference=le.Z.WGS84,this.spatialReferences=[4326],this.swapXY=void 0,this.title="WFS",this.type="wfs",this.url=null,this.version=void 0}destroy(){this.source?.destroy()}load(t){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WFS"]},t).then(()=>this.source.load(t)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo","spatialReference","name","namespaceUri"],"service"),(0,d.YN)(this.renderer,this.fieldsIndex),(0,d.UF)(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){return this.source?.capabilities}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}writeFields(t,n,a){const f=t.filter(j=>j.name!==z.u2);this.geometryField&&f.unshift(new y.Z({name:this.geometryField,alias:this.geometryField,type:"geometry"})),(0,ee.RB)(a,f.map(j=>j.toJSON()),n)}get parsedUrl(){return(0,F.mN)(this.url)}set renderer(t){(0,d.YN)(t,this.fieldsIndex),this._set("renderer",t)}get wfsCapabilities(){return this.source?.wfsCapabilities}set wfsCapabilities(t){this.source&&(this.source.wfsCapabilities=t)}createPopupTemplate(t){return(0,ce.eZ)(this,t)}createQuery(){const t=new P.Z;t.returnGeometry=!0,t.outFields=["*"],t.where=this.definitionExpression||"1=1";const{timeOffset:n,timeExtent:a}=this;return t.timeExtent=null!=n&&null!=a?a.offset(-n.value,n.unit):a||null,t}getFieldDomain(t,n){return this.getField(t)?.domain}getField(t){return this.fieldsIndex?.get(t)}queryFeatures(t,n){return this.load().then(()=>this.source.queryFeatures(P.Z.from(t)||this.createQuery(),n)).then(a=>{if(a?.features)for(const f of a.features)f.layer=f.sourceLayer=this;return a})}queryObjectIds(t,n){return this.load().then(()=>this.source.queryObjectIds(P.Z.from(t)||this.createQuery(),n))}queryFeatureCount(t,n){return this.load().then(()=>this.source.queryFeatureCount(P.Z.from(t)||this.createQuery(),n))}queryExtent(t,n){return this.load().then(()=>this.source.queryExtent(P.Z.from(t)||this.createQuery(),n))}hasDataChanged(){var t=this;return(0,r.Z)(function*(){try{const{dataChanged:n,updates:a}=yield t.source.refresh(t.customParameters);return null!=a&&t.read(a,{origin:"service",url:t.parsedUrl,ignoreDefaults:!0}),n}catch{}return!1})()}};(0,s._)([(0,o.Cb)({readOnly:!0})],i.prototype,"capabilities",null),(0,s._)([(0,o.Cb)({type:String})],i.prototype,"copyright",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],i.prototype,"createQueryVersion",null),(0,s._)([(0,o.Cb)({json:{name:"wfsInfo.customParameters",write:{overridePolicy:t=>({enabled:!!(t&&Object.keys(t).length>0),ignoreOrigin:!0})}}})],i.prototype,"customParameters",void 0),(0,s._)([(0,o.Cb)((0,k.mi)("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],i.prototype,"defaultPopupTemplate",null),(0,s._)([(0,o.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),(0,s._)([(0,o.Cb)({type:String})],i.prototype,"displayField",void 0),(0,s._)([(0,o.Cb)(A.PV)],i.prototype,"elevationInfo",void 0),(0,s._)([(0,o.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.featureUrl",write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"featureUrl",void 0),(0,s._)([(0,o.Cb)({type:[y.Z],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],i.prototype,"fields",void 0),(0,s._)([(0,te.c)("fields")],i.prototype,"writeFields",null),(0,s._)([(0,o.Cb)(ge.fieldsIndex)],i.prototype,"fieldsIndex",void 0),(0,s._)([(0,o.Cb)({type:se.Z,json:{name:"extent"}})],i.prototype,"fullExtent",void 0),(0,s._)([(0,o.Cb)()],i.prototype,"geometryField",void 0),(0,s._)([(0,o.Cb)({type:String,json:{read:{source:"layerDefinition.geometryType",reader:Q.M.read},write:{target:"layerDefinition.geometryType",writer:Q.M.write,ignoreOrigin:!0},origins:{service:{read:Q.M.read}}}})],i.prototype,"geometryType",void 0),(0,s._)([(0,o.Cb)({type:String})],i.prototype,"id",void 0),(0,s._)([(0,o.Cb)(A.iR)],i.prototype,"labelsVisible",void 0),(0,s._)([(0,o.Cb)({type:[l.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:C.r},write:!0}})],i.prototype,"labelingInfo",void 0),(0,s._)([(0,o.Cb)(A.rn)],i.prototype,"legendEnabled",void 0),(0,s._)([(0,o.Cb)({type:["show","hide"]})],i.prototype,"listMode",void 0),(0,s._)([(0,o.Cb)({type:String})],i.prototype,"objectIdField",void 0),(0,s._)([(0,o.Cb)({type:["WFS"]})],i.prototype,"operationalLayerType",void 0),(0,s._)([(0,o.Cb)({type:K.z8,json:{name:"wfsInfo.maxFeatures",write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"maxFeatures",void 0),(0,s._)([(0,o.Cb)({type:[0],readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],i.prototype,"mode",void 0),(0,s._)([(0,o.Cb)({type:String,json:{name:"wfsInfo.name",write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"name",void 0),(0,s._)([(0,o.Cb)({type:String,json:{name:"wfsInfo.wfsNamespace",write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"namespaceUri",void 0),(0,s._)([(0,o.Cb)(A.bT)],i.prototype,"opacity",void 0),(0,s._)([(0,o.Cb)(ge.outFields)],i.prototype,"outFields",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],i.prototype,"parsedUrl",null),(0,s._)([(0,o.Cb)(A.C_)],i.prototype,"popupEnabled",void 0),(0,s._)([(0,o.Cb)({type:T.Z,json:{name:"popupInfo",write:!0}})],i.prototype,"popupTemplate",void 0),(0,s._)([(0,o.Cb)({types:J.A,json:{origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:J.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:{ignoreOrigin:!0}}})],i.prototype,"renderer",null),(0,s._)([(0,o.Cb)(A.YI)],i.prototype,"screenSizePerspectiveEnabled",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],i.prototype,"source",void 0),(0,s._)([(0,o.Cb)({type:le.Z,json:{name:"layerDefinition.spatialReference",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"extent.spatialReference"}}}})],i.prototype,"spatialReference",void 0),(0,s._)([(0,o.Cb)({readOnly:!0,type:[K.z8],json:{name:"wfsInfo.supportedSpatialReferences",write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"spatialReferences",void 0),(0,s._)([(0,o.Cb)({type:Boolean,value:!1,json:{name:"wfsInfo.swapXY",write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"swapXY",void 0),(0,s._)([(0,o.Cb)({json:{write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"name"}}}})],i.prototype,"title",void 0),(0,s._)([(0,o.Cb)({json:{read:!1},readOnly:!0})],i.prototype,"type",void 0),(0,s._)([(0,o.Cb)(A.HQ)],i.prototype,"url",void 0),(0,s._)([(0,o.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.version",write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"version",void 0),(0,s._)([(0,o.Cb)()],i.prototype,"wfsCapabilities",null),i=fe=(0,s._)([(0,O.j)("esri.layers.WFSLayer")],i);const Ce=i},87757:(N,b,e)=>{e.d(b,{g:()=>r});const r={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},56554:(N,b,e)=>{e.d(b,{Dm:()=>m,Hq:()=>I,MS:()=>E,bU:()=>W});var r=e(8314),s=e(58817),p=e(87757),T=e(24837);function W(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?T.I4:"esriGeometryPolyline"===u?T.ET:T.lF}}}const U=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let S=1;function m(u,h){if((0,r.Z)("esri-csp-restrictions"))return()=>({[h]:null,...u});try{let L=`this.${h} = null;`;for(const B in u)L+=`this${U.test(B)?`.${B}`:`["${B}"]`} = ${JSON.stringify(u[B])};`;const J=new Function(`\n      return class AttributesClass$${S++} {\n        constructor() {\n          ${L};\n        }\n      }\n    `)();return()=>new J}catch{return()=>({[h]:null,...u})}}function I(u={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,s.d9)(u)}}]}function E(u,h){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:p.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:h,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},35126:(N,b,e)=>{e.d(b,{b:()=>I});var r=e(17626),s=e(77712),U=(e(90912),e(85931),e(8314),e(76898)),S=e(2319);const m={write:{allowNull:!0}},I=E=>{let u=class extends E{constructor(){super(...arguments),this.featureEffect=null}};return(0,r._)([(0,s.Cb)({type:S.Z,json:{origins:{"web-map":m,"portal-item":m}}})],u.prototype,"featureEffect",void 0),u=(0,r._)([(0,U.j)("esri.layers.mixins.FeatureEffectLayer")],u),u}},15008:(N,b,e)=>{e.d(b,{M:()=>A});var H,r=e(17626),s=e(32917),p=e(77712),S=(e(90912),e(85931),e(8314),e(76898)),m=e(43149),I=e(9256),E=e(83989),u=e(73281),o=(e(4832),e(49067),e(96794),e(69747),e(40425),e(69357),e(40342)),Z=(e(73640),e(33474)),x=e(32088),O=e(58817),te=e(94113),Q=e(55342),V=e(68653),X=e(99433),Y=e(13812),$=e(56347),re=e(170);let g=H=class extends E.B{constructor(y){super(y),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(y,c,d){const l=y.filter(C=>"avg_angle"!==C.statisticType).map(C=>C.toJSON());(0,te.RB)(d,l,c)}readRenderer(y,c,d){const l=c.drawingInfo?.renderer;return l?(0,Z.a)(l,c,d)??void 0:(0,$.Ob)(c,d)}clone(){return new H({fields:(0,O.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,O.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,O.d9)(this.popupTemplate),renderer:(0,O.d9)(this.renderer)})}};(0,r._)([(0,Q.J)({binning:"binning"})],g.prototype,"type",void 0),(0,r._)([(0,Q.J)({geohash:"geohash"})],g.prototype,"binType",void 0),(0,r._)([(0,p.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],g.prototype,"fixedBinLevel",void 0),(0,r._)([(0,p.Cb)({type:[re.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],g.prototype,"labelingInfo",void 0),(0,r._)([(0,p.Cb)(Y.iR)],g.prototype,"labelsVisible",void 0),(0,r._)([(0,p.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],g.prototype,"maxScale",void 0),(0,r._)([(0,p.Cb)(Y.C_)],g.prototype,"popupEnabled",void 0),(0,r._)([(0,p.Cb)({type:u.Z,json:{name:"popupInfo",write:!0}})],g.prototype,"popupTemplate",void 0),(0,r._)([(0,p.Cb)({type:[m.Z],json:{write:!0}})],g.prototype,"fields",void 0),(0,r._)([(0,X.c)("fields")],g.prototype,"writeFields",null),(0,r._)([(0,p.Cb)({types:x.A,json:{write:{target:"drawingInfo.renderer"}}})],g.prototype,"renderer",void 0),(0,r._)([(0,V.r)("renderer",["drawingInfo.renderer"])],g.prototype,"readRenderer",null),g=H=(0,r._)([(0,S.j)("esri.layers.support.FeatureReductionBinning")],g);const k=g;var q,se=e(20383),D=e(86810),w=e(23841);function oe(y){return"simple"===y.type&&!y.visualVariables?.length}let v=q=class extends D.wq{constructor(y){super(y),this.type="cluster",this.clusterRadius=(0,w.t_)("80px"),this.clusterMinSize=(0,w.t_)("12px"),this.clusterMaxSize=(0,w.t_)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(y,c,d){const l=c.drawingInfo?.renderer;return l?.authoringInfo?.isAutoGenerated?null:l?oe(l)?null:(0,Z.a)(l,c,d)??void 0:(0,$.Ob)(c,d)}readSymbol(y,c,d){const l=c.drawingInfo?.renderer;return l?.authoringInfo?.isAutoGenerated?null:l&&oe(l)?(0,Z.a)(l,c,d)?.symbol:null}writeSymbol(y,c,d,l){const C=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||C){const P=new o.Z({symbol:y});c.drawingInfo={renderer:P.write({},l)}}}writeFields(y,c,d){const l=y.filter(C=>"avg_angle"!==C.statisticType).map(C=>C.toJSON());(0,te.RB)(d,l,c)}readFields(y,c,d){return y.filter(l=>!l.isAutoGenerated).map(l=>m.Z.fromJSON(l))}clone(){return new q({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,O.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,O.d9)(this.fields),maxScale:this.maxScale,renderer:(0,O.d9)(this.renderer),symbol:(0,O.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,O.d9)(this.popupTemplate)})}};(0,r._)([(0,p.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],v.prototype,"type",void 0),(0,r._)([(0,p.Cb)({type:Number,cast:y=>"auto"===y?y:(0,w.t_)(y),json:{write:!0}})],v.prototype,"clusterRadius",void 0),(0,r._)([(0,p.Cb)({type:Number,cast:w.t_,json:{write:!0}})],v.prototype,"clusterMinSize",void 0),(0,r._)([(0,p.Cb)({type:Number,cast:w.t_,json:{write:!0}})],v.prototype,"clusterMaxSize",void 0),(0,r._)([(0,p.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],v.prototype,"maxScale",void 0),(0,r._)([(0,p.Cb)(Y.C_)],v.prototype,"popupEnabled",void 0),(0,r._)([(0,p.Cb)({type:u.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],v.prototype,"popupTemplate",void 0),(0,r._)([(0,p.Cb)({types:x.A,json:{write:{target:"drawingInfo.renderer"}}})],v.prototype,"renderer",void 0),(0,r._)([(0,V.r)("renderer",["drawingInfo.renderer"])],v.prototype,"readRenderer",null),(0,r._)([(0,p.Cb)({types:se.AH})],v.prototype,"symbol",void 0),(0,r._)([(0,V.r)("symbol",["drawingInfo.renderer"])],v.prototype,"readSymbol",null),(0,r._)([(0,X.c)("symbol")],v.prototype,"writeSymbol",null),(0,r._)([(0,p.Cb)({type:[re.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],v.prototype,"labelingInfo",void 0),(0,r._)([(0,p.Cb)(Y.iR)],v.prototype,"labelsVisible",void 0),(0,r._)([(0,p.Cb)({type:[m.Z],json:{write:!0}})],v.prototype,"fields",void 0),(0,r._)([(0,X.c)("fields")],v.prototype,"writeFields",null),(0,r._)([(0,V.r)("fields")],v.prototype,"readFields",null),v=q=(0,r._)([(0,S.j)("esri.layers.support.FeatureReductionCluster")],v);const ne=v;var ie=e(47058);const ae={key:"type",base:E.B,typeMap:{cluster:ne,binning:k}},ue={types:{key:"type",base:E.B,typeMap:{selection:ie.Z,cluster:ne,binning:k}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:ae},"portal-item":{types:ae},"web-scene":{types:{key:"type",base:E.B,typeMap:{selection:ie.Z}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:I.C}}}}};var ye=e(62192);const A=y=>{let c=class extends y{constructor(...d){super(...d),this.addHandles((0,s.YP)(()=>this.renderer,()=>{if(this.featureReduction){const l=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",l)}},s.Z_))}set featureReduction(d){const l=this._normalizeFeatureReduction(d);this._set("featureReduction",l)}set renderer(d){}_normalizeFeatureReduction(d){if("cluster"!==d?.type)return d;const l=d.clone(),C=[new m.Z({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],P=(l.fields??[]).filter(le=>!le.isAutoGenerated);if(d.renderer&&!d.renderer.authoringInfo?.isAutoGenerated)return l.fields=[...C,...P],l;if(d.symbol)return l.fields=[...C,...P],l.renderer=null,l;if(!this.renderer)return d;const ce=(0,ye.S1)(C,this.renderer,d,null,!1);return l.fields=[...C,...P],l.renderer=ce,l}};return(0,r._)([(0,p.Cb)(ue)],c.prototype,"featureReduction",null),c=(0,r._)([(0,S.j)("esri.layers.mixins.FeatureReductionLayer")],c),c}},32629:(N,b,e)=>{e.d(b,{c:()=>ee});var E,r=e(17626),s=e(94113),p=e(77712),S=(e(90912),e(85931),e(8314),e(76898)),m=e(2076),I=e(86810);const u=new m.X({asc:"ascending",desc:"descending"});let h=E=class extends I.wq{constructor(F){super(F),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new E({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,r._)([(0,p.Cb)({type:String,json:{write:!0}})],h.prototype,"field",void 0),(0,r._)([(0,p.Cb)({type:String,json:{write:!0}})],h.prototype,"valueExpression",void 0),(0,r._)([(0,p.Cb)({type:u.apiValues,json:{read:u.read,write:u.write}})],h.prototype,"order",void 0),h=E=(0,r._)([(0,S.j)("esri.layers.support.OrderByInfo")],h);const L=h;function J(F,o,K){if(!F)return null;const Z=F.find(O=>!!O.field);if(!Z)return null;const x=new L;return x.read(Z,K),[x]}function B(F,o,K,Z){const x=F.find(O=>!!O.field);x&&(0,s.RB)(K,[x.toJSON()],o)}const ee=F=>{let o=class extends F{constructor(){super(...arguments),this.orderBy=null}};return(0,r._)([(0,p.Cb)({type:[L],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:J},write:{target:"layerDefinition.orderBy",writer:B}}})],o.prototype,"orderBy",void 0),o=(0,r._)([(0,S.j)("esri.layers.mixins.OrderedLayer")],o),o}},83989:(N,b,e)=>{e.d(b,{B:()=>m});var r=e(17626),s=e(86810),p=e(77712),S=(e(90912),e(85931),e(8314),e(76898));let m=class extends s.wq{constructor(){super(...arguments),this.type=null}};(0,r._)([(0,p.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=(0,r._)([(0,S.j)("esri.layers.support.FeatureReduction")],m)},47058:(N,b,e)=>{e.d(b,{Z:()=>E});var m,r=e(17626),s=e(77712),U=(e(90912),e(85931),e(8314),e(76898)),S=e(83989);let I=m=class extends S.B{constructor(u){super(u),this.type="selection"}clone(){return new m}};(0,r._)([(0,s.Cb)({type:["selection"]})],I.prototype,"type",void 0),I=m=(0,r._)([(0,U.j)("esri.layers.support.FeatureReductionSelection")],I);const E=I}}]);