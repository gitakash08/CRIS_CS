"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[4629],{48977:(ne,G,Z)=>{Z.d(G,{a:()=>d,c:()=>_,g:()=>V,j:()=>E,k:()=>P,m:()=>z,s:()=>j});var p=Z(550),m=Z(78451),F=Z(28093),Y=Z(39863),U=Z(84161),D=Z(993);function j(e,o,l){l*=.5;const c=Math.sin(l);return e[0]=c*o[0],e[1]=c*o[1],e[2]=c*o[2],e[3]=Math.cos(l),e}function V(e,o){const l=2*Math.acos(o[3]),c=Math.sin(l/2);return c>(0,Y.g)()?(e[0]=o[0]/c,e[1]=o[1]/c,e[2]=o[2]/c):(e[0]=1,e[1]=0,e[2]=0),l}function z(e,o,l){const c=o[0],a=o[1],b=o[2],w=o[3],M=l[0],v=l[1],B=l[2],R=l[3];return e[0]=c*R+w*M+a*B-b*v,e[1]=a*R+w*v+b*M-c*B,e[2]=b*R+w*B+c*v-a*M,e[3]=w*R-c*M-a*v-b*B,e}function W(e,o,l,c){const a=o[0],b=o[1],w=o[2],M=o[3];let v,B,R,K,N,J=l[0],Q=l[1],ee=l[2],te=l[3];return B=a*J+b*Q+w*ee+M*te,B<0&&(B=-B,J=-J,Q=-Q,ee=-ee,te=-te),1-B>(0,Y.g)()?(v=Math.acos(B),R=Math.sin(v),K=Math.sin((1-c)*v)/R,N=Math.sin(c*v)/R):(K=1-c,N=c),e[0]=K*a+N*J,e[1]=K*b+N*Q,e[2]=K*w+N*ee,e[3]=K*M+N*te,e}function d(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e[3]=o[3],e}function A(e,o){const l=o[0]+o[4]+o[8];let c;if(l>0)c=Math.sqrt(l+1),e[3]=.5*c,c=.5/c,e[0]=(o[5]-o[7])*c,e[1]=(o[6]-o[2])*c,e[2]=(o[1]-o[3])*c;else{let a=0;o[4]>o[0]&&(a=1),o[8]>o[3*a+a]&&(a=2);const b=(a+1)%3,w=(a+2)%3;c=Math.sqrt(o[3*a+a]-o[3*b+b]-o[3*w+w]+1),e[a]=.5*c,c=.5/c,e[3]=(o[3*b+w]-o[3*w+b])*c,e[b]=(o[3*b+a]+o[3*a+b])*c,e[w]=(o[3*w+a]+o[3*a+w])*c}return e}function P(e,o,l,c){const a=.5*Math.PI/180;o*=a,l*=a,c*=a;const b=Math.sin(o),w=Math.cos(o),M=Math.sin(l),v=Math.cos(l),B=Math.sin(c),R=Math.cos(c);return e[0]=b*v*R-w*M*B,e[1]=w*M*R+b*v*B,e[2]=w*v*B-b*M*R,e[3]=w*v*R+b*M*B,e}const _=D.c,O=D.s,y=D.a,I=z,n=D.b,t=D.d,h=D.l,f=D.f,s=f,g=D.g,C=g,T=D.n,E=D.h,L=D.e,k=(0,F.c)(),ie=(0,F.f)(1,0,0),ce=(0,F.f)(0,1,0),oe=(0,m.a)(),re=(0,m.a)(),se=(0,p.a)();Object.freeze(Object.defineProperty({__proto__:null,add:y,calculateW:function H(e,o){const l=o[0],c=o[1],a=o[2];return e[0]=l,e[1]=c,e[2]=a,e[3]=Math.sqrt(Math.abs(1-l*l-c*c-a*a)),e},conjugate:d,copy:_,dot:t,equals:L,exactEquals:E,fromEuler:P,fromMat3:A,getAxisAngle:V,identity:function $(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:function u(e,o){const l=o[0],c=o[1],a=o[2],b=o[3],w=l*l+c*c+a*a+b*b,M=w?1/w:0;return e[0]=-l*M,e[1]=-c*M,e[2]=-a*M,e[3]=b*M,e},len:s,length:f,lerp:h,mul:I,multiply:z,normalize:T,random:function i(e){const o=Y.R,l=o(),c=o(),a=o(),b=Math.sqrt(1-l),w=Math.sqrt(l);return e[0]=b*Math.sin(2*Math.PI*c),e[1]=b*Math.cos(2*Math.PI*c),e[2]=w*Math.sin(2*Math.PI*a),e[3]=w*Math.cos(2*Math.PI*a),e},rotateX:function X(e,o,l){l*=.5;const c=o[0],a=o[1],b=o[2],w=o[3],M=Math.sin(l),v=Math.cos(l);return e[0]=c*v+w*M,e[1]=a*v+b*M,e[2]=b*v-a*M,e[3]=w*v-c*M,e},rotateY:function q(e,o,l){l*=.5;const c=o[0],a=o[1],b=o[2],w=o[3],M=Math.sin(l),v=Math.cos(l);return e[0]=c*v-b*M,e[1]=a*v+w*M,e[2]=b*v+c*M,e[3]=w*v-a*M,e},rotateZ:function S(e,o,l){l*=.5;const c=o[0],a=o[1],b=o[2],w=o[3],M=Math.sin(l),v=Math.cos(l);return e[0]=c*v+a*M,e[1]=a*v-c*M,e[2]=b*v+w*M,e[3]=w*v-b*M,e},rotationTo:function x(e,o,l){const c=(0,U.j)(o,l);return c<-.999999?((0,U.b)(k,ie,o),(0,U.k)(k)<1e-6&&(0,U.b)(k,ce,o),(0,U.n)(k,k),j(e,k,Math.PI),e):c>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,U.b)(k,o,l),e[0]=k[0],e[1]=k[1],e[2]=k[2],e[3]=1+c,T(e,e))},scale:n,set:O,setAxes:function ae(e,o,l,c){const a=se;return a[0]=l[0],a[3]=l[1],a[6]=l[2],a[1]=c[0],a[4]=c[1],a[7]=c[2],a[2]=-o[0],a[5]=-o[1],a[8]=-o[2],T(e,A(e,a))},setAxisAngle:j,slerp:W,sqlerp:function ue(e,o,l,c,a,b){return W(oe,o,a,b),W(re,l,c,b),W(e,oe,re,2*b*(1-b)),e},sqrLen:C,squaredLength:g,str:function r(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},92852:(ne,G,Z)=>{Z.d(G,{I_:()=>X,W7:()=>i,qM:()=>r});var p=Z(26584),m=Z(58817),F=Z(63290),Y=Z(61566),U=Z(16396);const D=F.Z.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function $(n,t,h){let f="",s=0;for(;s<h;){const g=n[t+s];if(g<128)f+=String.fromCharCode(g),s++;else if(g>=192&&g<224){if(s+1>=h)throw new p.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");f+=String.fromCharCode((31&g)<<6|63&n[t+s+1]),s+=2}else if(g>=224&&g<240){if(s+2>=h)throw new p.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");f+=String.fromCharCode((15&g)<<12|(63&n[t+s+1])<<6|63&n[t+s+2]),s+=3}else{if(!(g>=240&&g<248))throw new p.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(s+3>=h)throw new p.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const C=(7&g)<<18|(63&n[t+s+1])<<12|(63&n[t+s+2])<<6|63&n[t+s+3];f+=C>=65536?String.fromCharCode(55296+(C-65536>>10),56320+(1023&C)):String.fromCharCode(C),s+=4}}}return f}function j(n,t){const h={byteOffset:0,byteCount:0,fields:Object.create(null)};let f=0;for(let s=0;s<t.length;s++){const g=t[s],C=g.valueType||g.type;h.fields[g.property]=(0,O[C])(n,f),f+=_[C].BYTES_PER_ELEMENT}return h.byteCount=f,h}function z(n,t,h){const f=[];let s,g,C=0;for(g=0;g<n;g+=1){if(s=t[g],s>0){if(f.push($(h,C,s-1)),0!==h[C+s-1])throw new p.Z("string-array-error","Invalid string array: missing null termination.")}else f.push(null);C+=s}return f}function X(n,t){return new _[t.valueType](n,t.byteOffset,t.count*t.valuesPerElement)}function H(n,t,h){if(t!==n&&D.error(`Invalid ${h} buffer size\n expected: ${n}, actual: ${t})`),t<n)throw new p.Z("buffer-too-small","Binary buffer is too small",{expectedSize:n,actualSize:t})}function i(n,t){const h=j(n,t&&t.header);let f=h.byteCount;const s={isDraco:!1,header:h,byteOffset:h.byteCount,byteCount:0,vertexAttributes:{}},g=h.fields,C=null!=g.vertexCount?g.vertexCount:g.count;for(const L of t.ordering){if(!t.vertexAttributes[L])continue;const x={...t.vertexAttributes[L],byteOffset:f,count:C};s.vertexAttributes[P[L]||"_"+L]=x,f+=I(x.valueType)*x.valuesPerElement*C}const T=g.faceCount;if(t.faces&&T){s.faces={};for(const L of t.ordering){if(!t.faces[L])continue;const x={...t.faces[L],byteOffset:f,count:T};s.faces[L]=x,f+=I(x.valueType)*x.valuesPerElement*T}}const E=g.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&E){s.featureAttributes={};for(const L of t.featureAttributeOrder){if(!t.featureAttributes[L])continue;const x={...t.featureAttributes[L],byteOffset:f,count:E};s.featureAttributes[L]=x,f+=("UInt64"===x.valueType?8:I(x.valueType))*x.valuesPerElement*E}}return H(f,n.byteLength,"geometry"),s.byteCount=f-s.byteOffset,s}const P={position:U.T.POSITION,normal:U.T.NORMAL,color:U.T.COLOR,uv0:U.T.UV0,region:U.T.UVREGION};function r(n,t,h){if("lepcc-rgb"===n.encoding)return(0,Y.IT)(t);if("lepcc-intensity"===n.encoding)return(0,Y.ti)(t);if(null!=n.encoding&&""!==n.encoding)throw new p.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");n["attributeByteCounts "]&&!n.attributeByteCounts&&(D.warn("Warning: Trailing space in 'attributeByteCounts '."),n.attributeByteCounts=n["attributeByteCounts "]),"ObjectIds"===n.ordering[0]&&n.hasOwnProperty("objectIds")&&(D.warn("Warning: Case error in objectIds"),n.ordering[0]="objectIds");const f=function S(n,t,h){const f=null!=t.header?j(n,t.header):{byteOffset:0,byteCount:0,fields:{count:h}},s={header:f,byteOffset:f.byteCount,byteCount:0,entries:Object.create(null)};let g=f.byteCount;for(let C=0;C<t.ordering.length;C++){const T=t.ordering[C],E=(0,m.d9)(t[T]);if(E.count=f.fields.count??0,"String"===E.valueType){if(E.byteOffset=g,E.byteCount=f.fields[T+"ByteCount"],"UTF-8"!==E.encoding)throw new p.Z("unsupported-encoding","Unsupported String encoding.",{encoding:E.encoding});if(E.timeEncoding&&"ECMA_ISO8601"!==E.timeEncoding)throw new p.Z("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:E.timeEncoding})}else{if(!y(E.valueType))throw new p.Z("unsupported-value-type","Unsupported binary valueType",{valueType:E.valueType});{const L=I(E.valueType);g+=g%L!=0?L-g%L:0,E.byteOffset=g,E.byteCount=L*E.valuesPerElement*E.count}}g+=E.byteCount??0,s.entries[T]=E}return s.byteCount=g-s.byteOffset,s}(t,n,h);H(f.byteOffset+f.byteCount,t.byteLength,"attribute");const s=f.entries.attributeValues||f.entries.objectIds;if(s){if("String"===s.valueType){const g=f.entries.attributeByteCounts,C=X(t,g),T=function q(n,t){return new Uint8Array(n,t.byteOffset,t.byteCount)}(t,s);return s.timeEncoding?function V(n,t,h){return z(n,t,h).map(f=>{const s=f?Date.parse(f):null;return s&&!Number.isNaN(s)?s:null})}(g.count,C,T):z(g.count,C,T)}return X(t,s)}throw new p.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const _={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},O={Float32:(n,t)=>new DataView(n,0).getFloat32(t,!0),Float64:(n,t)=>new DataView(n,0).getFloat64(t,!0),UInt8:(n,t)=>new DataView(n,0).getUint8(t),Int8:(n,t)=>new DataView(n,0).getInt8(t),UInt16:(n,t)=>new DataView(n,0).getUint16(t,!0),Int16:(n,t)=>new DataView(n,0).getInt16(t,!0),UInt32:(n,t)=>new DataView(n,0).getUint32(t,!0),Int32:(n,t)=>new DataView(n,0).getInt32(t,!0)};function y(n){return _.hasOwnProperty(n)}function I(n){return y(n)?_[n].BYTES_PER_ELEMENT:0}},61566:(ne,G,Z)=>{Z.d(G,{Gi:()=>$,IT:()=>q,ti:()=>W});var p=Z(26584);const m=!0,F={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function Y(i,u,d){return{identifier:String.fromCharCode.apply(null,new Uint8Array(i,d+F.identifierOffset,F.identifierLength)),version:u.getUint16(d+F.versionOffset,m),checksum:u.getUint32(d+F.checksumOffset,m)}}const U={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function $(i){const u=new DataView(i,0);let d=0;const{identifier:A,version:P}=Y(i,u,d);if(d+=F.byteCount,"LEPCC     "!==A)throw new p.Z("lepcc-decode-error","Bad identifier");if(P>1)throw new p.Z("lepcc-decode-error","Unknown version");const r=function D(i,u){return{sizeLo:i.getUint32(u+U.sizeLo,m),sizeHi:i.getUint32(u+U.sizeHi,m),minX:i.getFloat64(u+U.minX,m),minY:i.getFloat64(u+U.minY,m),minZ:i.getFloat64(u+U.minZ,m),maxX:i.getFloat64(u+U.maxX,m),maxY:i.getFloat64(u+U.maxY,m),maxZ:i.getFloat64(u+U.maxZ,m),errorX:i.getFloat64(u+U.errorX,m),errorY:i.getFloat64(u+U.errorY,m),errorZ:i.getFloat64(u+U.errorZ,m),count:i.getUint32(u+U.count,m),reserved:i.getUint32(u+U.reserved,m)}}(u,d);if(d+=U.byteCount,r.sizeHi*2**32+r.sizeLo!==i.byteLength)throw new p.Z("lepcc-decode-error","Bad size");const _=new Float64Array(3*r.count),O=[],y=[],I=[],n=[];if(d=j(i,d,O),d=j(i,d,y),d=j(i,d,I),d=j(i,d,n),d!==i.byteLength)throw new p.Z("lepcc-decode-error","Bad length");let t=0,h=0;for(let f=0;f<O.length;f++){h+=O[f];let s=0;for(let g=0;g<y[f];g++){s+=I[t];const C=n[t];_[3*t]=Math.min(r.maxX,r.minX+2*r.errorX*s),_[3*t+1]=Math.min(r.maxY,r.minY+2*r.errorY*h),_[3*t+2]=Math.min(r.maxZ,r.minZ+2*r.errorZ*C),t++}}return{errorX:r.errorX,errorY:r.errorY,errorZ:r.errorZ,result:_}}function j(i,u,d){const A=[];u=V(i,u,A);const P=[];for(let r=0;r<A.length;r++){P.length=0,u=V(i,u,P);for(let _=0;_<P.length;_++)d.push(P[_]+A[r])}return u}function V(i,u,d){const A=new DataView(i,u),P=A.getUint8(0),r=31&P,_=!!(32&P),O=(192&P)>>6;let y=0;if(0===O)y=A.getUint32(1,m),u+=5;else if(1===O)y=A.getUint16(1,m),u+=3;else{if(2!==O)throw new p.Z("lepcc-decode-error","Bad count type");y=A.getUint8(1),u+=2}if(_)throw new p.Z("lepcc-decode-error","LUT not implemented");const I=Math.ceil(y*r/8),n=new Uint8Array(i,u,I);let t=0,h=0,f=0;const s=-1>>>32-r;for(let g=0;g<y;g++){for(;h<r;)t|=n[f]<<h,h+=8,f+=1;d[g]=t&s,t>>>=r,h-=r,h+r>32&&(t|=n[f-1]>>8-h)}return u+f}const z={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function q(i){const u=new DataView(i,0);let d=0;const{identifier:A,version:P}=Y(i,u,d);if(d+=F.byteCount,"ClusterRGB"!==A)throw new p.Z("lepcc-decode-error","Bad identifier");if(P>1)throw new p.Z("lepcc-decode-error","Unknown version");const r=function X(i,u){return{sizeLo:i.getUint32(u+z.sizeLo,m),sizeHi:i.getUint32(u+z.sizeHi,m),count:i.getUint32(u+z.count,m),colorMapCount:i.getUint16(u+z.colorMapCount,m),lookupMethod:i.getUint8(u+z.lookupMethod),compressionMethod:i.getUint8(u+z.compressionMethod)}}(u,d);if(d+=z.byteCount,r.sizeHi*2**32+r.sizeLo!==i.byteLength)throw new p.Z("lepcc-decode-error","Bad size");if((2===r.lookupMethod||1===r.lookupMethod)&&0===r.compressionMethod){if(3*r.colorMapCount+r.count+d!==i.byteLength||r.colorMapCount>256)throw new p.Z("lepcc-decode-error","Bad count");const _=new Uint8Array(i,d,3*r.colorMapCount),O=new Uint8Array(i,d+3*r.colorMapCount,r.count),y=new Uint8Array(3*r.count);for(let I=0;I<r.count;I++){const n=O[I];y[3*I]=_[3*n],y[3*I+1]=_[3*n+1],y[3*I+2]=_[3*n+2]}return y}if(0===r.lookupMethod&&0===r.compressionMethod){if(3*r.count+d!==i.byteLength||0!==r.colorMapCount)throw new p.Z("lepcc-decode-error","Bad count");return new Uint8Array(i,d).slice()}if(r.lookupMethod<=2&&1===r.compressionMethod){if(d+3!==i.byteLength||1!==r.colorMapCount)throw new p.Z("lepcc-decode-error","Bad count");const _=u.getUint8(d),O=u.getUint8(d+1),y=u.getUint8(d+2),I=new Uint8Array(3*r.count);for(let n=0;n<r.count;n++)I[3*n]=_,I[3*n+1]=O,I[3*n+2]=y;return I}throw new p.Z("lepcc-decode-error","Bad method "+r.lookupMethod+","+r.compressionMethod)}const S={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function W(i){const u=new DataView(i,0);let d=0;const{identifier:A,version:P}=Y(i,u,d);if(d+=F.byteCount,"Intensity "!==A)throw new p.Z("lepcc-decode-error","Bad identifier");if(P>1)throw new p.Z("lepcc-decode-error","Unknown version");const r=function H(i,u){return{sizeLo:i.getUint32(u+S.sizeLo,m),sizeHi:i.getUint32(u+S.sizeHi,m),count:i.getUint32(u+S.count,m),scaleFactor:i.getUint16(u+S.scaleFactor,m),bitsPerPoint:i.getUint8(u+S.bitsPerPoint),reserved:i.getUint8(u+S.reserved)}}(u,d);if(d+=S.byteCount,r.sizeHi*2**32+r.sizeLo!==i.byteLength)throw new p.Z("lepcc-decode-error","Bad size");const _=new Uint16Array(r.count);if(8===r.bitsPerPoint){if(r.count+d!==i.byteLength)throw new p.Z("lepcc-decode-error","Bad size");const O=new Uint8Array(i,d,r.count);for(let y=0;y<r.count;y++)_[y]=O[y]*r.scaleFactor}else if(16===r.bitsPerPoint){if(2*r.count+d!==i.byteLength)throw new p.Z("lepcc-decode-error","Bad size");const O=new Uint16Array(i,d,r.count);for(let y=0;y<r.count;y++)_[y]=O[y]*r.scaleFactor}else{const O=[];if(V(i,d,O)!==i.byteLength)throw new p.Z("lepcc-decode-error","Bad size");for(let y=0;y<r.count;y++)_[y]=O[y]*r.scaleFactor}return _}}}]);