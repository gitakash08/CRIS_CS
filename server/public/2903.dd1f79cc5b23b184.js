"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[2903],{72903:(J,C,e)=>{e.r(C),e.d(C,{default:()=>me});var s=e(15861),o=e(17626),x=(e(29132),e(73281)),z=(e(4832),e(49067),e(96794),e(69747),e(40425),e(69357),e(40342),e(73640),e(33474),e(32088)),L=e(99959),V=e(10699),j=e(21726),n=e(77712),D=(e(90912),e(85931),e(8314)),O=e(76898),H=e(71774),q=e(44917),G=e(26584),Y=e(47996),K=e(63290),_=e(97347),ee=e(56554),X=e(17253),te=e(2004),g=e(37118);let M=class extends Y.Z{constructor(){var t;super(...arguments),t=this,this.type="geojson",this.refresh=(0,V.Ds)(function(){var r=(0,s.Z)(function*(i){yield t.load();const{extent:f,timeExtent:P}=yield t._connection.invoke("refresh",i);return t.sourceJSON.extent=f,P&&(t.sourceJSON.timeInfo.timeExtent=[P.start,P.end]),{dataChanged:!0,updates:{extent:t.sourceJSON.extent,timeInfo:t.sourceJSON.timeInfo}}});return function(i){return r.apply(this,arguments)}}())}load(t){return this.addResolvingPromise(this._startWorker(null!=t?t.signal:null)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,r)).then(i=>X.Z.fromJSON(i))}queryFeaturesJSON(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,r))}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:te.Z.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}_applyEdits(t){if(!this._connection)throw new G.Z("geojson-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField,i=[],f=[],P=[];if(t.addFeatures)for(const R of t.addFeatures)i.push(this._serializeFeature(R));if(t.deleteFeatures)for(const R of t.deleteFeatures)"objectId"in R&&null!=R.objectId?f.push(R.objectId):"attributes"in R&&null!=R.attributes[r]&&f.push(R.attributes[r]);if(t.updateFeatures)for(const R of t.updateFeatures)P.push(this._serializeFeature(R));return this._connection.invoke("applyEdits",{adds:i,updates:P,deletes:f}).then(({extent:R,timeExtent:Z,featureEditResults:Q})=>(this.sourceJSON.extent=R,Z&&(this.sourceJSON.timeInfo.timeExtent=[Z.start,Z.end]),this._createEditsResult(Q)))}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new G.Z("geojson-layer-source:edit-failure",r.description,{code:r.code}):null}}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t);return i?{geometry:i.toJSON(),attributes:r}:{attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return null==r?null:"mesh"===r.type||"extent"===r.type?g.Z.fromExtent(r.extent):r}_startWorker(t){var r=this;return(0,s.Z)(function*(){r._connection=yield(0,_.bA)("GeoJSONSourceWorker",{strategy:(0,D.Z)("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:r});const{fields:i,spatialReference:f,hasZ:P,geometryType:R,objectIdField:Z,url:Q,timeInfo:ve,customParameters:ge}=r.layer,Ee="defaults"===r.layer.originOf("spatialReference"),Ce={url:Q,customParameters:ge,fields:i&&i.map(ie=>ie.toJSON()),geometryType:H.M.toJSON(R),hasZ:P,objectIdField:Z,timeInfo:ve?ve.toJSON():null,spatialReference:Ee?null:f&&f.toJSON()},k=yield r._connection.invoke("load",Ce,{signal:t});for(const ie of k.warnings)K.Z.getLogger(r.layer).warn("#load()",`$${ie.message} (title: '${r.layer.title||"no title"}', id: '${r.layer.id??"no id"}')`,{warning:ie});k.featureErrors.length&&K.Z.getLogger(r.layer).warn("#load()",`Encountered ${k.featureErrors.length} validation errors while loading features. (title: '${r.layer.title||"no title"}', id: '${r.layer.id??"no id"}')`,{errors:k.featureErrors}),r.sourceJSON=k.layerDefinition,r.capabilities=(0,ee.MS)(r.sourceJSON.hasZ,!0)})()}};(0,o._)([(0,n.Cb)()],M.prototype,"capabilities",void 0),(0,o._)([(0,n.Cb)()],M.prototype,"type",void 0),(0,o._)([(0,n.Cb)({constructOnly:!0})],M.prototype,"layer",void 0),(0,o._)([(0,n.Cb)()],M.prototype,"sourceJSON",void 0),M=(0,o._)([(0,O.j)("esri.layers.graphics.sources.GeoJSONSource")],M);var ae=e(552),le=e(50107),N=e(35126),w=e(15008),de=e(49286),re=e(32629),h=e(6647),se=e(30346),oe=e(99555),ne=e(97941),T=e(13812),pe=e(32777),ue=e(41638),y=e(36255),c=e(55911),p=e(90194),l=e(170),E=e(62667),F=e(96854),ye=e(49430),ce=e(28302),he=e(65234);const fe=(0,c.v)();let a=class extends((0,re.c)((0,le.N)((0,w.M)((0,N.b)((0,ae.h)((0,ne.n)((0,oe.M)((0,se.Q)((0,de.q)((0,h.I)((0,L.R)(q.Z)))))))))))){constructor(t){super(t),this.copyright=null,this.dateFieldsTimeZone=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new M({layer:this}),this.spatialReference=he.Z.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null}destroy(){this.source?.destroy()}load(t){const r=this.loadFromPortal({supportedTypes:["GeoJson"],supportsData:!1},t).catch(V.r9).then(()=>this.source.load(t)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),(0,p.YN)(this.renderer,this.fieldsIndex),(0,p.UF)(this.timeInfo,this.fieldsIndex)});return this.addResolvingPromise(r),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&null==this.geometryType}get parsedUrl(){return this.url?(0,j.mN)(this.url):null}set renderer(t){(0,p.YN)(t,this.fieldsIndex),this._set("renderer",t)}set url(t){if(!t)return void this._set("url",t);const r=(0,j.mN)(t);this._set("url",r.path),r.query&&(this.customParameters={...this.customParameters,...r.query})}applyEdits(t,r){var i=this;return(0,s.Z)(function*(){const{applyEdits:f}=yield e.e(1913).then(e.bind(e,81913));yield i.load();const P=yield f(i,i.source,t,r);return i.read({extent:i.source.sourceJSON.extent,timeInfo:i.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),P})()}on(t,r){return super.on(t,r)}createPopupTemplate(t){return(0,ye.eZ)(this,t)}createQuery(){const t=new F.Z,r=this.capabilities?.data;t.returnGeometry=!0,r&&r.supportsZ&&(t.returnZ=!0),t.outFields=["*"],t.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:f}=this;return t.timeExtent=null!=i&&null!=f?f.offset(-i.value,i.unit):f||null,t}getFieldDomain(t,r){let i,f=!1;const P=r?.feature,R=P?.attributes,Z=this.typeIdField&&R?.[this.typeIdField];return null!=Z&&this.types&&(f=this.types.some(Q=>Q.id==Z&&(i=Q.domains&&Q.domains[t],i&&"inherited"===i.type&&(i=this._getLayerDomain(t)),!0))),f||i||(i=this._getLayerDomain(t)),i}getField(t){return this.fieldsIndex.get(t)}queryFeatures(t,r){return this.load().then(()=>this.source.queryFeatures(F.Z.from(t)||this.createQuery(),r)).then(i=>{if(i?.features)for(const f of i.features)f.layer=f.sourceLayer=this;return i})}queryObjectIds(t,r){return this.load().then(()=>this.source.queryObjectIds(F.Z.from(t)||this.createQuery(),r))}queryFeatureCount(t,r){return this.load().then(()=>this.source.queryFeatureCount(F.Z.from(t)||this.createQuery(),r))}queryExtent(t,r){return this.load().then(()=>this.source.queryExtent(F.Z.from(t)||this.createQuery(),r))}hasDataChanged(){var t=this;return(0,s.Z)(function*(){try{const{dataChanged:r,updates:i}=yield t.source.refresh(t.customParameters);return null!=i&&t.read(i,{origin:"service",url:t.parsedUrl,ignoreDefaults:!0}),r}catch{}return!1})()}_getLayerDomain(t){if(!this.fields)return null;let r=null;return this.fields.some(i=>(i.name===t&&(r=i.domain),!!r)),r}};(0,o._)([(0,n.Cb)({readOnly:!0,json:{read:!1,write:!1}})],a.prototype,"capabilities",null),(0,o._)([(0,n.Cb)({type:String})],a.prototype,"copyright",void 0),(0,o._)([(0,n.Cb)({readOnly:!0})],a.prototype,"createQueryVersion",null),(0,o._)([(0,n.Cb)((0,ce.mi)("dateFieldsTimeReference"))],a.prototype,"dateFieldsTimeZone",void 0),(0,o._)([(0,n.Cb)({readOnly:!0})],a.prototype,"defaultPopupTemplate",null),(0,o._)([(0,n.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],a.prototype,"definitionExpression",void 0),(0,o._)([(0,n.Cb)({type:String})],a.prototype,"displayField",void 0),(0,o._)([(0,n.Cb)({type:Boolean})],a.prototype,"editingEnabled",void 0),(0,o._)([(0,n.Cb)(T.PV)],a.prototype,"elevationInfo",void 0),(0,o._)([(0,n.Cb)({type:[y.Z],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],a.prototype,"fields",void 0),(0,o._)([(0,n.Cb)(fe.fieldsIndex)],a.prototype,"fieldsIndex",void 0),(0,o._)([(0,n.Cb)({type:te.Z,json:{name:"extent"}})],a.prototype,"fullExtent",void 0),(0,o._)([(0,n.Cb)({type:["point","polygon","polyline","multipoint"],json:{read:{reader:H.M.read}}})],a.prototype,"geometryType",void 0),(0,o._)([(0,n.Cb)({type:Boolean})],a.prototype,"hasZ",void 0),(0,o._)([(0,n.Cb)(T.id)],a.prototype,"id",void 0),(0,o._)([(0,n.Cb)({type:Boolean,readOnly:!0})],a.prototype,"isTable",null),(0,o._)([(0,n.Cb)(T.iR)],a.prototype,"labelsVisible",void 0),(0,o._)([(0,n.Cb)({type:[l.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:E.r},write:!0}})],a.prototype,"labelingInfo",void 0),(0,o._)([(0,n.Cb)(T.rn)],a.prototype,"legendEnabled",void 0),(0,o._)([(0,n.Cb)({type:["show","hide"]})],a.prototype,"listMode",void 0),(0,o._)([(0,n.Cb)({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],a.prototype,"objectIdField",void 0),(0,o._)([(0,n.Cb)(T.Oh)],a.prototype,"opacity",void 0),(0,o._)([(0,n.Cb)({type:["GeoJSON"]})],a.prototype,"operationalLayerType",void 0),(0,o._)([(0,n.Cb)({readOnly:!0})],a.prototype,"parsedUrl",null),(0,o._)([(0,n.Cb)(T.C_)],a.prototype,"popupEnabled",void 0),(0,o._)([(0,n.Cb)({type:x.Z,json:{name:"popupInfo",write:!0}})],a.prototype,"popupTemplate",void 0),(0,o._)([(0,n.Cb)({types:z.A,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:z.o}}}})],a.prototype,"renderer",null),(0,o._)([(0,n.Cb)(T.YI)],a.prototype,"screenSizePerspectiveEnabled",void 0),(0,o._)([(0,n.Cb)({readOnly:!0})],a.prototype,"source",void 0),(0,o._)([(0,n.Cb)({type:he.Z})],a.prototype,"spatialReference",void 0),(0,o._)([(0,n.Cb)({type:[pe.Z]})],a.prototype,"templates",void 0),(0,o._)([(0,n.Cb)()],a.prototype,"title",void 0),(0,o._)([(0,n.Cb)({json:{read:!1},readOnly:!0})],a.prototype,"type",void 0),(0,o._)([(0,n.Cb)({type:String,readOnly:!0})],a.prototype,"typeIdField",void 0),(0,o._)([(0,n.Cb)({type:[ue.Z]})],a.prototype,"types",void 0),(0,o._)([(0,n.Cb)(T.HQ)],a.prototype,"url",null),a=(0,o._)([(0,O.j)("esri.layers.GeoJSONLayer")],a);const me=a},87757:(J,C,e)=>{e.d(C,{g:()=>s});const s={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},56554:(J,C,e)=>{e.d(C,{Dm:()=>v,Hq:()=>b,MS:()=>I,bU:()=>W});var s=e(8314),o=e(58817),d=e(87757),x=e(24837);function W(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?x.I4:"esriGeometryPolyline"===u?x.ET:x.lF}}}const B=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let S=1;function v(u,m){if((0,s.Z)("esri-csp-restrictions"))return()=>({[m]:null,...u});try{let A=`this.${m} = null;`;for(const L in u)A+=`this${B.test(L)?`.${L}`:`["${L}"]`} = ${JSON.stringify(u[L])};`;const z=new Function(`\n      return class AttributesClass$${S++} {\n        constructor() {\n          ${A};\n        }\n      }\n    `)();return()=>new z}catch{return()=>({[m]:null,...u})}}function b(u={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,o.d9)(u)}}]}function I(u,m){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:m,supportsDelete:m,supportsEditing:m,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:m,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:d.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:m,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},35126:(J,C,e)=>{e.d(C,{b:()=>b});var s=e(17626),o=e(77712),B=(e(90912),e(85931),e(8314),e(76898)),S=e(2319);const v={write:{allowNull:!0}},b=I=>{let u=class extends I{constructor(){super(...arguments),this.featureEffect=null}};return(0,s._)([(0,o.Cb)({type:S.Z,json:{origins:{"web-map":v,"portal-item":v}}})],u.prototype,"featureEffect",void 0),u=(0,s._)([(0,B.j)("esri.layers.mixins.FeatureEffectLayer")],u),u}},15008:(J,C,e)=>{e.d(C,{M:()=>ue});var X,s=e(17626),o=e(32917),d=e(77712),S=(e(90912),e(85931),e(8314),e(76898)),v=e(43149),b=e(9256),I=e(83989),u=e(73281),n=(e(4832),e(49067),e(96794),e(69747),e(40425),e(69357),e(40342)),U=(e(73640),e(33474)),D=e(32088),O=e(58817),H=e(94113),q=e(55342),G=e(68653),Y=e(99433),K=e(13812),_=e(56347),ee=e(170);let g=X=class extends I.B{constructor(y){super(y),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(y,c,p){const l=y.filter(E=>"avg_angle"!==E.statisticType).map(E=>E.toJSON());(0,H.RB)(p,l,c)}readRenderer(y,c,p){const l=c.drawingInfo?.renderer;return l?(0,U.a)(l,c,p)??void 0:(0,_.Ob)(c,p)}clone(){return new X({fields:(0,O.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,O.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,O.d9)(this.popupTemplate),renderer:(0,O.d9)(this.renderer)})}};(0,s._)([(0,q.J)({binning:"binning"})],g.prototype,"type",void 0),(0,s._)([(0,q.J)({geohash:"geohash"})],g.prototype,"binType",void 0),(0,s._)([(0,d.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],g.prototype,"fixedBinLevel",void 0),(0,s._)([(0,d.Cb)({type:[ee.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],g.prototype,"labelingInfo",void 0),(0,s._)([(0,d.Cb)(K.iR)],g.prototype,"labelsVisible",void 0),(0,s._)([(0,d.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],g.prototype,"maxScale",void 0),(0,s._)([(0,d.Cb)(K.C_)],g.prototype,"popupEnabled",void 0),(0,s._)([(0,d.Cb)({type:u.Z,json:{name:"popupInfo",write:!0}})],g.prototype,"popupTemplate",void 0),(0,s._)([(0,d.Cb)({type:[v.Z],json:{write:!0}})],g.prototype,"fields",void 0),(0,s._)([(0,Y.c)("fields")],g.prototype,"writeFields",null),(0,s._)([(0,d.Cb)({types:D.A,json:{write:{target:"drawingInfo.renderer"}}})],g.prototype,"renderer",void 0),(0,s._)([(0,G.r)("renderer",["drawingInfo.renderer"])],g.prototype,"readRenderer",null),g=X=(0,s._)([(0,S.j)("esri.layers.support.FeatureReductionBinning")],g);const M=g;var w,ae=e(20383),le=e(86810),N=e(23841);function re(y){return"simple"===y.type&&!y.visualVariables?.length}let h=w=class extends le.wq{constructor(y){super(y),this.type="cluster",this.clusterRadius=(0,N.t_)("80px"),this.clusterMinSize=(0,N.t_)("12px"),this.clusterMaxSize=(0,N.t_)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(y,c,p){const l=c.drawingInfo?.renderer;return l?.authoringInfo?.isAutoGenerated?null:l?re(l)?null:(0,U.a)(l,c,p)??void 0:(0,_.Ob)(c,p)}readSymbol(y,c,p){const l=c.drawingInfo?.renderer;return l?.authoringInfo?.isAutoGenerated?null:l&&re(l)?(0,U.a)(l,c,p)?.symbol:null}writeSymbol(y,c,p,l){const E=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||E){const F=new n.Z({symbol:y});c.drawingInfo={renderer:F.write({},l)}}}writeFields(y,c,p){const l=y.filter(E=>"avg_angle"!==E.statisticType).map(E=>E.toJSON());(0,H.RB)(p,l,c)}readFields(y,c,p){return y.filter(l=>!l.isAutoGenerated).map(l=>v.Z.fromJSON(l))}clone(){return new w({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,O.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,O.d9)(this.fields),maxScale:this.maxScale,renderer:(0,O.d9)(this.renderer),symbol:(0,O.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,O.d9)(this.popupTemplate)})}};(0,s._)([(0,d.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],h.prototype,"type",void 0),(0,s._)([(0,d.Cb)({type:Number,cast:y=>"auto"===y?y:(0,N.t_)(y),json:{write:!0}})],h.prototype,"clusterRadius",void 0),(0,s._)([(0,d.Cb)({type:Number,cast:N.t_,json:{write:!0}})],h.prototype,"clusterMinSize",void 0),(0,s._)([(0,d.Cb)({type:Number,cast:N.t_,json:{write:!0}})],h.prototype,"clusterMaxSize",void 0),(0,s._)([(0,d.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],h.prototype,"maxScale",void 0),(0,s._)([(0,d.Cb)(K.C_)],h.prototype,"popupEnabled",void 0),(0,s._)([(0,d.Cb)({type:u.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],h.prototype,"popupTemplate",void 0),(0,s._)([(0,d.Cb)({types:D.A,json:{write:{target:"drawingInfo.renderer"}}})],h.prototype,"renderer",void 0),(0,s._)([(0,G.r)("renderer",["drawingInfo.renderer"])],h.prototype,"readRenderer",null),(0,s._)([(0,d.Cb)({types:ae.AH})],h.prototype,"symbol",void 0),(0,s._)([(0,G.r)("symbol",["drawingInfo.renderer"])],h.prototype,"readSymbol",null),(0,s._)([(0,Y.c)("symbol")],h.prototype,"writeSymbol",null),(0,s._)([(0,d.Cb)({type:[ee.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],h.prototype,"labelingInfo",void 0),(0,s._)([(0,d.Cb)(K.iR)],h.prototype,"labelsVisible",void 0),(0,s._)([(0,d.Cb)({type:[v.Z],json:{write:!0}})],h.prototype,"fields",void 0),(0,s._)([(0,Y.c)("fields")],h.prototype,"writeFields",null),(0,s._)([(0,G.r)("fields")],h.prototype,"readFields",null),h=w=(0,s._)([(0,S.j)("esri.layers.support.FeatureReductionCluster")],h);const se=h;var oe=e(47058);const ne={key:"type",base:I.B,typeMap:{cluster:se,binning:M}},T={types:{key:"type",base:I.B,typeMap:{selection:oe.Z,cluster:se,binning:M}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:ne},"portal-item":{types:ne},"web-scene":{types:{key:"type",base:I.B,typeMap:{selection:oe.Z}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:b.C}}}}};var pe=e(62192);const ue=y=>{let c=class extends y{constructor(...p){super(...p),this.addHandles((0,o.YP)(()=>this.renderer,()=>{if(this.featureReduction){const l=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",l)}},o.Z_))}set featureReduction(p){const l=this._normalizeFeatureReduction(p);this._set("featureReduction",l)}set renderer(p){}_normalizeFeatureReduction(p){if("cluster"!==p?.type)return p;const l=p.clone(),E=[new v.Z({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],F=(l.fields??[]).filter(ce=>!ce.isAutoGenerated);if(p.renderer&&!p.renderer.authoringInfo?.isAutoGenerated)return l.fields=[...E,...F],l;if(p.symbol)return l.fields=[...E,...F],l.renderer=null,l;if(!this.renderer)return p;const ye=(0,pe.S1)(E,this.renderer,p,null,!1);return l.fields=[...E,...F],l.renderer=ye,l}};return(0,s._)([(0,d.Cb)(T)],c.prototype,"featureReduction",null),c=(0,s._)([(0,S.j)("esri.layers.mixins.FeatureReductionLayer")],c),c}},32629:(J,C,e)=>{e.d(C,{c:()=>V});var I,s=e(17626),o=e(94113),d=e(77712),S=(e(90912),e(85931),e(8314),e(76898)),v=e(2076),b=e(86810);const u=new v.X({asc:"ascending",desc:"descending"});let m=I=class extends b.wq{constructor(j){super(j),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new I({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],m.prototype,"field",void 0),(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0),(0,s._)([(0,d.Cb)({type:u.apiValues,json:{read:u.read,write:u.write}})],m.prototype,"order",void 0),m=I=(0,s._)([(0,S.j)("esri.layers.support.OrderByInfo")],m);const A=m;function z(j,n,$){if(!j)return null;const U=j.find(O=>!!O.field);if(!U)return null;const D=new A;return D.read(U,$),[D]}function L(j,n,$,U){const D=j.find(O=>!!O.field);D&&(0,o.RB)($,[D.toJSON()],n)}const V=j=>{let n=class extends j{constructor(){super(...arguments),this.orderBy=null}};return(0,s._)([(0,d.Cb)({type:[A],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:z},write:{target:"layerDefinition.orderBy",writer:L}}})],n.prototype,"orderBy",void 0),n=(0,s._)([(0,S.j)("esri.layers.mixins.OrderedLayer")],n),n}},83989:(J,C,e)=>{e.d(C,{B:()=>v});var s=e(17626),o=e(86810),d=e(77712),S=(e(90912),e(85931),e(8314),e(76898));let v=class extends o.wq{constructor(){super(...arguments),this.type=null}};(0,s._)([(0,d.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],v.prototype,"type",void 0),v=(0,s._)([(0,S.j)("esri.layers.support.FeatureReduction")],v)},47058:(J,C,e)=>{e.d(C,{Z:()=>I});var v,s=e(17626),o=e(77712),B=(e(90912),e(85931),e(8314),e(76898)),S=e(83989);let b=v=class extends S.B{constructor(u){super(u),this.type="selection"}clone(){return new v}};(0,s._)([(0,o.Cb)({type:["selection"]})],b.prototype,"type",void 0),b=v=(0,s._)([(0,B.j)("esri.layers.support.FeatureReductionSelection")],b);const I=b}}]);