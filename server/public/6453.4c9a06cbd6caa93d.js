"use strict";(self.webpackChunkCRIS=self.webpackChunkCRIS||[]).push([[6453],{79800:(vt,it,P)=>{P.d(it,{a:()=>X,b:()=>J,c:()=>M,d:()=>x,e:()=>L,n:()=>E,s:()=>F,t:()=>G});var N=P(96286);function M(h,v,O){G(h.typedBuffer,v.typedBuffer,O,h.typedBufferStride,v.typedBufferStride)}function G(h,v,O,W=3,rt=W){if(h.length/W!==Math.ceil(v.length/rt))return N.c.error("source and destination buffers need to have the same number of elements"),h;const $=h.length/W,st=O[0],tt=O[1],z=O[2],nt=O[4],I=O[5],w=O[6],D=O[8],et=O[9],ot=O[10],K=O[12],Q=O[13],Y=O[14];let ut=0,Z=0;for(let j=0;j<$;j++){const U=v[ut],at=v[ut+1],ft=v[ut+2];h[Z]=st*U+nt*at+D*ft+K,h[Z+1]=tt*U+I*at+et*ft+Q,h[Z+2]=z*U+w*at+ot*ft+Y,ut+=rt,Z+=W}return h}function J(h,v,O){X(h.typedBuffer,v.typedBuffer,O,h.typedBufferStride,v.typedBufferStride)}function X(h,v,O,W=3,rt=W){if(h.length/W!==Math.ceil(v.length/rt))return void N.c.error("source and destination buffers need to have the same number of elements");const $=h.length/W,st=O[0],tt=O[1],z=O[2],nt=O[3],I=O[4],w=O[5],D=O[6],et=O[7],ot=O[8];let K=0,Q=0;for(let Y=0;Y<$;Y++){const ut=v[K],Z=v[K+1],j=v[K+2];h[Q]=st*ut+nt*Z+D*j,h[Q+1]=tt*ut+I*Z+et*j,h[Q+2]=z*ut+w*Z+ot*j,K+=rt,Q+=W}}function L(h,v,O){F(h.typedBuffer,v,O,h.typedBufferStride)}function F(h,v,O,W=3){const rt=Math.min(h.length/W,v.count),$=v.typedBuffer,st=v.typedBufferStride;let tt=0,z=0;for(let nt=0;nt<rt;nt++)h[z]=O*$[tt],h[z+1]=O*$[tt+1],h[z+2]=O*$[tt+2],tt+=st,z+=W}function x(h,v){E(h.typedBuffer,v.typedBuffer,h.typedBufferStride,v.typedBufferStride)}function E(h,v,O=3,W=O){const rt=Math.min(h.length/O,v.length/W);let $=0,st=0;for(let tt=0;tt<rt;tt++){const z=v[$],nt=v[$+1],I=v[$+2],w=z*z+nt*nt+I*I;if(w>0){const D=1/Math.sqrt(w);h[st]=D*z,h[st+1]=D*nt,h[st+2]=D*I}$+=W,st+=O}}Object.freeze(Object.defineProperty({__proto__:null,normalize:E,normalizeView:x,scale:F,scaleView:L,shiftRight:function d(h,v,O){const W=Math.min(h.count,v.count),rt=h.typedBuffer,$=h.typedBufferStride,st=v.typedBuffer,tt=v.typedBufferStride;let z=0,nt=0;for(let I=0;I<W;I++)rt[nt]=st[z]>>O,rt[nt+1]=st[z+1]>>O,rt[nt+2]=st[z+2]>>O,z+=tt,nt+=$},transformMat3:X,transformMat3View:J,transformMat4:G,transformMat4View:M},Symbol.toStringTag,{value:"Module"}))},28844:(vt,it,P)=>{P.d(it,{$z:()=>J,KF:()=>E,mi:()=>M});var N=P(55713);function M(h){if((0,N.kJ)(h)){if(h.length<N.c8)return h}else if(h.length<N.c8)return Array.from(h);let v=!0,O=!0;return h.some((W,rt)=>(v=v&&0===W,O=O&&W===rt,!v&&!O)),v?function gt(h){if(1===h)return F;if(h<N.c8)return new Array(h).fill(0);if(h>d.length){const v=Math.max(2*d.length,h);d=new Uint8Array(v)}return new Uint8Array(d.buffer,0,h)}(h.length):O?E(h.length):(0,N.kJ)(h)||h.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?function G(h){let v=!0;for(const O of h){if(O>=65536)return(0,N.kJ)(h)?new Uint32Array(h):h;O>=256&&(v=!1)}return v?new Uint8Array(h):new Uint16Array(h)}(h):h}function J(h){return h<=N.c8?new Array(h):h<=65536?new Uint16Array(h):new Uint32Array(h)}let L=(()=>{const h=new Uint32Array(131072);for(let v=0;v<h.length;++v)h[v]=v;return h})();const F=[0],x=(()=>{const h=new Uint16Array(65536);for(let v=0;v<h.length;++v)h[v]=v;return h})();function E(h){if(1===h)return F;if(h<N.c8)return Array.from(new Uint16Array(x.buffer,0,h));if(h<x.length)return new Uint16Array(x.buffer,0,h);if(h>L.length){const v=Math.max(2*L.length,h);L=new Uint32Array(v);for(let O=0;O<L.length;O++)L[O]=O}return new Uint32Array(L.buffer,0,h)}let d=new Uint8Array(65536)},96286:(vt,it,P)=>{P.d(it,{c:()=>M});const M=P(63290).Z.getLogger("esri.views.3d.support.buffer.math")},10992:(vt,it,P)=>{P.d(it,{Ue:()=>L,nF:()=>v,zk:()=>d});var N=P(21286),M=P(97535),G=P(84161),J=P(28093),X=P(26242);function L(I){return I?{origin:(0,J.g)(I.origin),vector:(0,J.g)(I.vector)}:{origin:(0,J.c)(),vector:(0,J.c)()}}function d(I,w,D=L()){return(0,G.c)(D.origin,I),(0,G.f)(D.vector,w,I),D}function v(I,w,D){return function W(I,w,D,et,ot){const{vector:K,origin:Q}=I,Y=(0,G.f)(X.WM.get(),w,Q),ut=(0,G.j)(K,Y)/(0,G.m)(K);return(0,G.i)(ot,K,(0,N.uZ)(ut,D,et)),(0,G.g)(ot,ot,I.origin)}(I,w,0,1,D)}(0,J.c)(),(0,J.c)(),new M.x(()=>L())},12699:(vt,it,P)=>{P.d(it,{c:()=>M});var N=P(86236);class M{constructor(){this.id=(0,N.D)()}}},24425:(vt,it,P)=>{var N,M;P.d(it,{U:()=>N}),(M=N||(N={}))[M.Layer=0]="Layer",M[M.Object=1]="Object",M[M.Mesh=2]="Mesh",M[M.Line=3]="Line",M[M.Point=4]="Point",M[M.Material=5]="Material",M[M.Texture=6]="Texture",M[M.COUNT=7]="COUNT"},13150:(vt,it,P)=>{P.d(it,{Z:()=>Pt});var N=P(43703),M=P(84161),G=P(28844),J=P(55713);function X(_){if(_.length<J.c8)return Array.from(_);if((0,J.kJ)(_))return Float64Array.from(_);if(!("BYTES_PER_ELEMENT"in _))return Array.from(_);switch(_.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(_);case 2:return(0,J.Uc)(_)?Uint16Array.from(_):Int16Array.from(_);case 4:return Float32Array.from(_);default:return Float64Array.from(_)}}var L=P(42743),F=P(77029),x=P(28093),E=P(2282);class d{constructor(s,l,y){this.primitiveIndices=s,this._numIndexPerPrimitive=l,this.position=y,this._children=void 0,(0,E.hu)(s.length>=1),(0,E.hu)(3===y.size||4===y.size);const{data:A,size:C,indices:B}=y;(0,E.hu)(B.length%this._numIndexPerPrimitive==0),(0,E.hu)(B.length>=s.length*this._numIndexPerPrimitive);const k=s.length;let T=C*B[this._numIndexPerPrimitive*s[0]];gt.clear(),gt.push(T);const R=(0,x.f)(A[T],A[T+1],A[T+2]),b=(0,x.g)(R);for(let V=0;V<k;++V){const q=this._numIndexPerPrimitive*s[V];for(let ct=0;ct<this._numIndexPerPrimitive;++ct){T=C*B[q+ct],gt.push(T);let H=A[T];R[0]=Math.min(H,R[0]),b[0]=Math.max(H,b[0]),H=A[T+1],R[1]=Math.min(H,R[1]),b[1]=Math.max(H,b[1]),H=A[T+2],R[2]=Math.min(H,R[2]),b[2]=Math.max(H,b[2])}}this.bbMin=R,this.bbMax=b;const S=(0,M.p)((0,x.c)(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(b[0]-R[0],b[1]-R[1]),b[2]-R[2]);let ht=this.radius*this.radius;for(let V=0;V<gt.length;++V){T=gt.at(V);const q=A[T]-S[0],ct=A[T+1]-S[1],H=A[T+2]-S[2],_t=q*q+ct*ct+H*H;if(_t<=ht)continue;const mt=Math.sqrt(_t),Mt=.5*(mt-this.radius);this.radius=this.radius+Mt,ht=this.radius*this.radius;const pt=Mt/mt;S[0]+=q*pt,S[1]+=ct*pt,S[2]+=H*pt}this.center=S,gt.clear()}getChildren(){if(this._children||(0,M.a)(this.bbMin,this.bbMax)<=1)return this._children;const s=(0,M.p)((0,x.c)(),this.bbMin,this.bbMax,.5),l=this.primitiveIndices.length,y=new Uint8Array(l),A=new Array(8);for(let b=0;b<8;++b)A[b]=0;const{data:C,size:B,indices:k}=this.position;for(let b=0;b<l;++b){let S=0;const ht=this._numIndexPerPrimitive*this.primitiveIndices[b];let V=B*k[ht],q=C[V],ct=C[V+1],H=C[V+2];for(let _t=1;_t<this._numIndexPerPrimitive;++_t){V=B*k[ht+_t];const mt=C[V],Mt=C[V+1],pt=C[V+2];mt<q&&(q=mt),Mt<ct&&(ct=Mt),pt<H&&(H=pt)}q<s[0]&&(S|=1),ct<s[1]&&(S|=2),H<s[2]&&(S|=4),y[b]=S,++A[S]}let T=0;for(let b=0;b<8;++b)A[b]>0&&++T;if(T<2)return;const R=new Array(8);for(let b=0;b<8;++b)R[b]=A[b]>0?new Uint32Array(A[b]):void 0;for(let b=0;b<8;++b)A[b]=0;for(let b=0;b<l;++b){const S=y[b];R[S][A[S]++]=this.primitiveIndices[b]}this._children=new Array;for(let b=0;b<8;++b)void 0!==R[b]&&this._children.push(new d(R[b],this._numIndexPerPrimitive,this.position));return this._children}static prune(){gt.prune()}}const gt=new F.Z({deallocator:null});var h=P(12699),v=P(24425),O=P(97535),W=P(10992);function et(_,s,l){return(0,M.f)(Q,s,_),(0,M.f)(Y,l,_),(0,M.l)((0,M.b)(Q,Q,Y))/2}P(26242),new O.x(W.Ue),new O.x(()=>function $(_){return _?{p0:(0,x.g)(_.p0),p1:(0,x.g)(_.p1),p2:(0,x.g)(_.p2)}:{p0:(0,x.c)(),p1:(0,x.c)(),p2:(0,x.c)()}}());const Q=(0,x.c)(),Y=(0,x.c)(),U=(0,x.c)(),at=(0,x.c)(),ft=(0,x.c)(),lt=(0,x.c)();var It=P(86236);class Ut{constructor(s){this.channel=s,this.id=(0,It.D)()}}var dt=P(16396);P(2757),(0,x.c)(),new Float32Array(6);class Pt extends h.c{constructor(s,l,y=null,A=v.U.Mesh,C=null,B=-1){super(),this.material=s,this.mapPositions=y,this.type=A,this.objectAndLayerIdColor=C,this.edgeIndicesLength=B,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[k,T]of l)this._attributes.set(k,{...T,indices:(0,G.mi)(T.indices)}),k===dt.T.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(k).indices.length:this.edgeIndicesLength)}instantiate(s={}){const l=new Pt(s.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach((y,A)=>{y.exclusive=!1,l._attributes.set(A,y)}),l._boundingInfo=this._boundingInfo,l.transformation=s.transformation||this.transformation,l}get attributes(){return this._attributes}getMutableAttribute(s){let l=this._attributes.get(s);return l&&!l.exclusive&&(l={...l,exclusive:!0,data:X(l.data)},this._attributes.set(s,l)),l}setAttributeData(s,l){const y=this._attributes.get(s);y&&this._attributes.set(s,{...y,exclusive:!0,data:l})}get indexCount(){return this._attributes.values().next().value.indices?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(s){return!!(this.type===v.U.Mesh?this._computeAttachmentOriginTriangles(s):this.type===v.U.Line?this._computeAttachmentOriginLines(s):this._computeAttachmentOriginPoints(s))&&(null!=this._transformation&&(0,M.e)(s,s,this._transformation),!0)}_computeAttachmentOriginTriangles(s){return function ut(_,s){if(!_)return!1;const{size:l,data:y,indices:A}=_;(0,M.s)(s,0,0,0),(0,M.s)(lt,0,0,0);let C=0,B=0;for(let k=0;k<A.length-2;k+=3){const T=A[k]*l,R=A[k+1]*l,b=A[k+2]*l;(0,M.s)(U,y[T],y[T+1],y[T+2]),(0,M.s)(at,y[R],y[R+1],y[R+2]),(0,M.s)(ft,y[b],y[b+1],y[b+2]);const S=et(U,at,ft);S?((0,M.g)(U,U,at),(0,M.g)(U,U,ft),(0,M.i)(U,U,1/3*S),(0,M.g)(s,s,U),C+=S):((0,M.g)(lt,lt,U),(0,M.g)(lt,lt,at),(0,M.g)(lt,lt,ft),B+=3)}return!(0===B&&0===C||(0!==C?((0,M.i)(s,s,1/C),0):0===B||((0,M.i)(s,lt,1/B),0)))}(this.attributes.get(dt.T.POSITION),s)}_computeAttachmentOriginLines(s){const l=this.attributes.get(dt.T.POSITION);return function j(_,s,l){if(!_)return!1;(0,M.s)(l,0,0,0),(0,M.s)(lt,0,0,0);let y=0,A=0;const{size:C,data:B,indices:k}=_,T=k.length-1,R=T+(s?2:0);for(let b=0;b<R;b+=2){const ht=k[b<T?b:T]*C,V=k[b<T?b+1:0]*C;U[0]=B[ht],U[1]=B[ht+1],U[2]=B[ht+2],at[0]=B[V],at[1]=B[V+1],at[2]=B[V+2],(0,M.i)(U,(0,M.g)(U,U,at),.5);const q=(0,M.r)(U,at);q>0?((0,M.g)(l,l,(0,M.i)(U,U,q)),y+=q):0===y&&((0,M.g)(lt,lt,U),A++)}return 0!==y?((0,M.i)(l,l,1/y),!0):0!==A&&((0,M.i)(l,lt,1/A),!0)}(l,function St(_,s){return!(!("isClosed"in _)||!_.isClosed)&&s.indices.length>2}(this.material.parameters,l),s)}_computeAttachmentOriginPoints(s){return function Z(_,s){if(!_)return!1;const{size:l,data:y,indices:A}=_;(0,M.s)(s,0,0,0);let C=-1,B=0;for(let k=0;k<A.length;k++){const T=A[k]*l;C!==T&&(s[0]+=y[T],s[1]+=y[T+1],s[2]+=y[T+2],B++),C=T}return B>1&&(0,M.i)(s,s,1/B),B>0}(this.attributes.get(dt.T.POSITION),s)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const s=this.attributes.get(dt.T.POSITION);if(!s||0===s.indices.length)return null;const l=this.type===v.U.Mesh?3:1;(0,E.hu)(s.indices.length%l==0,"Indexing error: "+s.indices.length+" not divisible by "+l);const y=(0,G.KF)(s.indices.length/l);return new d(y,l,s)}get transformation(){return this._transformation??N.I}set transformation(s){this._transformation=s&&s!==N.I?(0,N.b)(s):null}addHighlight(){const s=new Ut(L.V_.Highlight);return this.highlights=function bt(_,s){return null==_&&(_=[]),_.push(s),_}(this.highlights,s),s}removeHighlight(s){this.highlights=function At(_,s){if(null==_)return null;const l=_.filter(y=>y!==s);return 0===l.length?null:l}(this.highlights,s)}}},42743:(vt,it,P)=>{var N,M,G,J,X,L,F,x,E,d;P.d(it,{Gv:()=>M,Iq:()=>x,JJ:()=>F,Rw:()=>J,Ti:()=>E,V_:()=>L,Vr:()=>N,hU:()=>X}),(d=N||(N={}))[d.None=0]="None",d[d.Front=1]="Front",d[d.Back=2]="Back",d[d.COUNT=3]="COUNT",function(d){d[d.Less=0]="Less",d[d.Lequal=1]="Lequal",d[d.COUNT=2]="COUNT"}(M||(M={})),function(d){d[d.BACKGROUND=0]="BACKGROUND",d[d.UPDATE=1]="UPDATE"}(G||(G={})),function(d){d[d.NOT_LOADED=0]="NOT_LOADED",d[d.LOADING=1]="LOADING",d[d.LOADED=2]="LOADED"}(J||(J={})),function(d){d[d.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",d[d.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(X||(X={})),function(d){d[d.Highlight=0]="Highlight",d[d.MaskOccludee=1]="MaskOccludee",d[d.COUNT=2]="COUNT"}(L||(L={})),function(d){d[d.Blend=0]="Blend",d[d.Opaque=1]="Opaque",d[d.Mask=2]="Mask",d[d.MaskBlend=3]="MaskBlend",d[d.COUNT=4]="COUNT"}(F||(F={})),function(d){d[d.OFF=0]="OFF",d[d.ON=1]="ON"}(x||(x={})),function(d){d.DDS_ENCODING="image/vnd-ms.dds",d.KTX2_ENCODING="image/ktx2",d.BASIS_ENCODING="image/x.basis"}(E||(E={}))},2757:(vt,it,P)=>{function N(L,F,x){for(let E=0;E<x;++E)F[2*E]=L[E],F[2*E+1]=L[E]-F[2*E]}function G(L,F){const x=L.length;for(let E=0;E<x;++E)X[0]=L[E],F[E]=X[0];return F}function J(L,F){const x=L.length;for(let E=0;E<x;++E)X[0]=L[E],X[1]=L[E]-X[0],F[E]=X[1];return F}P.d(it,{GB:()=>J,LF:()=>N,U8:()=>G});const X=new Float32Array(2)}}]);